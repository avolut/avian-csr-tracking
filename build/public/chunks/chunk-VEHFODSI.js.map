{
  "version": 3,
  "sources": ["../../../pkgs/web/utils/component.tsx"],
  "sourcesContent": ["/** @jsx jsx */\nimport { useWindow } from 'libs'\nimport { useEffect } from 'react'\n\nexport const useComponent = (\n  name: string,\n  _fileName: string,\n  passthrough: Record<string, any>\n) => {\n  const { window } = useWindow()\n  const def = window.cms_components[name]\n\n  if (!def) {\n    return {\n      render: `jsx('div', {})`,\n      extract: passthrough,\n    }\n  }\n  if (def.template.code) {\n    let extract: string[] = []\n    for (let k of Object.keys(passthrough)) {\n      k = k.trim()\n      if (k) {\n        extract.push(`const ${k} = _component.extract[\"${k}\"];`)\n      }\n    }\n\n    return {\n      render: `\\\n  const _component = this;\n  ${extract.join('\\n  ')}\n  const params = _component.extract.params || {};\n\n  ${def.template.code}\n  const finalResult = ccx_component(_component.extract);\n  window.cms_components['${name}'].cache = ccx_component\n\n  return finalResult;\n`,\n      extract: passthrough,\n    }\n  } else {\n    console.error(\n      `[ERROR] Failed to load component <${name} />, code not found.`\n    )\n  }\n\n  return {\n    render: `jsx('div', {})`,\n    extract: passthrough,\n  }\n}\n"],
  "mappings": "gFAIO,GAAM,GAAe,GAC1B,EACA,EACA,IACG,CACH,GAAM,CAAE,UAAW,IACb,EAAM,EAAO,eAAe,GAElC,GAAI,CAAC,EACH,MAAO,CACL,OAAQ,iBACR,QAAS,GAGb,GAAI,EAAI,SAAS,KAAM,CACrB,GAAI,GAAoB,GACxB,OAAS,KAAK,QAAO,KAAK,GACxB,EAAI,EAAE,OACF,GACF,EAAQ,KAAK,SAAS,2BAA2B,QAIrD,MAAO,CACL,OAAQ;AAAA,IAEV,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,IAGb,EAAI,SAAS;AAAA;AAAA,2BAEU;AAAA;AAAA;AAAA,EAIrB,QAAS,OAGX,SAAQ,MACN,qCAAqC,yBAIzC,MAAO,CACL,OAAQ,iBACR,QAAS,IA7Ce",
  "names": []
}
