import{b as F}from"./chunk-G5VUQIYN.js";import{c as z,i as U}from"./chunk-SD5ULMK3.js";import"./chunk-Y5EMNB45.js";import{a as L}from"./chunk-UMBFZAT7.js";import{a as J}from"./chunk-WJABE3AS.js";import{a as q}from"./chunk-IA5P3YQN.js";import{a as T}from"./chunk-ZUGU5IHP.js";import{a as v,e as M}from"./chunk-NXH6K27G.js";import{Ba as B,Ca as h,Z as P,na as S,oa as H,va as W}from"./chunk-IHSADOYH.js";import"./chunk-HP25GDQW.js";import{a as R}from"./chunk-2OZ4JKVY.js";import{b as E}from"./chunk-IRKXFVRU.js";import{a as m,e as _}from"./chunk-SDY2POXP.js";var r=_(R());var x=_(J()),y=_(E());var u=_(R());var I=_(E()),D=_(q());var K=m(({columns:o,state:e,meta:c,render:t,items:d})=>{let n=(0,I.useRef)(null);return(0,I.useEffect)(()=>{v(()=>n.current).then(()=>{let i=n.current;i&&!i.onscroll&&(i.onscroll=async s=>{let l=s.target;if(l.scrollTop/l.scrollHeight*100>60&&e.db.loading===!1){let k=l.scrollTop;await e.db.paging.loadNext(),l.scrollTop=k}},t())})},[n.current]),(0,u.jsx)("div",{ref:n,className:"absolute inset-0 flex flex-col overflow-y-auto"},n.current&&(0,u.jsx)(H,{mediaList:Array.isArray(o)&&o.length>1,virtualList:!0,virtualListParams:{items:d,scrollableParentEl:n.current}},e.table.mobile.swipeout!==!1&&window.mobileListHideInfo!==!1&&(0,u.jsx)("div",{className:"flex justify-end text-xs opacity-50 p-2 pr-6 transition-all "+(c.hideInfo===!0?" h-0 py-0":""),onClick:()=>{c.hideInfo=!0,setTimeout(()=>{window.mobileListHideInfo=!0},1e3),t()}},(0,u.jsx)("div",{className:"text-right whitespace-pre-wrap"},`Geser baris data dari kanan ke kiri 
untuk opsi tambahan`),(0,u.jsx)("img",{src:"/__ext/icons/swirly-arrow.svg",width:"30",className:"ml-3"})),d.map((i,s)=>{let l=m(()=>(0,u.jsx)(h,{color:"blue",onClick:f=>{e.table.onRowClick&&e.table.onRowClick(i,s,f,e)}},"Edit"),"EditButton"),p=m(()=>(0,u.jsx)(h,{overswipe:!0,confirmTitle:"Konfirmasi",confirmText:"Apakah Anda yakin akan dihapus?",delete:!0},"Hapus"),"DeleteButton"),k=e.table.mobile.swipeout!==!1?(0,u.jsx)(B,{right:!0},typeof e.table.mobile.swipeout=="function"?e.table.mobile.swipeout(i,{Swipe:h,Edit:l,Delete:p}):(0,u.jsx)(p,null)):null,a=typeof o=="function"?o({list:e.db.list,state:e,index:s,row:i}):{title:b(o[0],i,e),subtitle:b(o[1],i,e)+"",text:b(o[2],i,e),after:b(o[3],i,e)};typeof o=="function"&&i.__listMeta&&i.__listMeta.f7el&&!i.__listMeta.f7row&&(i.__listMeta.f7row=(0,D.createPortal)(a,i.__listMeta.f7el));let V=e.table.mobile.onSwipeoutDeleted?async()=>e.table.mobile.onSwipeoutDeleted(i):async()=>{e.db.definition&&(e.db.loading=!0,t(),await M[e.db.tableName].delete({where:{[e.db.definition.pk]:i[e.db.definition.pk]}}),e.db.loading=!1,t())};e.table.mobile.checked||(e.table.mobile.checked={});let C=e.table.mobile.checked,g=e.db.definition?i[e.db.definition.pk]:"";return(0,u.jsx)(S,{link:!0,noChevron:!0,key:s,checked:!!(g&&C[g]),checkbox:!!get(e,"table.mobile.checkbox"),onClick:f=>{if(get(e,"table.mobile.checkbox")&&e.db.definition){C[g]?delete C[g]:C[g]=i;let A=get(e,"table.mobile.onChecked");A&&A(C),t()}e.table.onRowClick&&e.table.onRowClick(i,s,f,e)},onSwipeoutDeleted:V,swipeout:!!k,...Array.isArray(o)?a:{},ref:f=>{f&&f.el&&typeof o=="function"&&i.__listMeta&&v(()=>f.el.querySelector(".item-inner")).then(()=>{i.__listMeta.f7el!==f.el.querySelector(".item-inner")&&(i.__listMeta.f7el=f.el.querySelector(".item-inner"),i.__listMeta.f7row=(0,D.createPortal)(a,i.__listMeta.f7el),t())})}},typeof o=="function"&&(0,u.jsx)("div",{onClick:f=>{f.stopPropagation(),f.preventDefault(),e.table.onRowClick&&e.table.onRowClick(i,s,f,e)}},i.__listMeta.f7row),k)})))},"MobileList");var w=_(R());var N=_(q());var G=m(({columns:o,state:e,meta:c,render:t,items:d})=>(0,w.jsx)("ul",{className:"base-list-static "},d.map((n,i)=>{let s=m(()=>(0,w.jsx)(h,{color:"blue",onClick:a=>{e.table.onRowClick&&e.table.onRowClick(n,i,a,e)}},"Edit"),"EditButton"),l=m(()=>(0,w.jsx)(h,{overswipe:!0,confirmTitle:"Konfirmasi",confirmText:"Apakah Anda yakin akan dihapus?",delete:!0},"Hapus"),"DeleteButton"),p=e.table.mobile.swipeout!==!1?(0,w.jsx)(B,{right:!0},typeof e.table.mobile.swipeout=="function"?e.table.mobile.swipeout(n,{Swipe:h,Edit:s,Delete:l}):(0,w.jsx)(l,null)):null,k=typeof o=="function"?o({list:e.db.list,state:e,index:i,row:n}):{title:b(o[0],n,e),subtitle:b(o[1],n,e)+"",text:b(o[2],n,e),after:b(o[3],n,e)};return typeof o=="function"&&n.__listMeta&&n.__listMeta.f7el&&!n.__listMeta.f7row&&(n.__listMeta.f7row=(0,N.createPortal)(k,n.__listMeta.f7el)),(0,w.jsx)(S,{link:!0,noChevron:!0,key:i,onClick:a=>{e.table.onRowClick&&e.table.onRowClick(n,i,a,e)},onSwipeoutDeleted:async()=>{e.db.loading=!0,t(),await M[e.db.tableName].delete({where:{[e.db.definition.pk]:n[e.db.definition.pk]}}),e.db.loading=!1,t()},swipeout:!!p,...Array.isArray(o)?k:{},ref:a=>{a&&a.el&&typeof o=="function"&&n.__listMeta&&v(()=>a.el.querySelector(".item-inner")).then(()=>{n.__listMeta.f7el!==a.el.querySelector(".item-inner")&&(n.__listMeta.f7el=a.el.querySelector(".item-inner"),n.__listMeta.f7row=(0,N.createPortal)(k,n.__listMeta.f7el),t())})}},typeof o=="function"&&(0,w.jsx)("div",{onClick:a=>{a.stopPropagation(),a.preventDefault(),e.table.onRowClick&&e.table.onRowClick(n,i,a,e)}},n.__listMeta.f7row),p)})),"MobileStatic");var me=m(({ctx:o})=>{let c=(0,y.useRef)({init:!1,hideInfo:!1}).current,t=(0,y.useContext)(o),d=T();if((0,y.useEffect)(()=>{c.init=!0,d()},[]),t.table.render=d,!c.init)return null;let n=t.db.list;t.filter.quickSearch&&(n=t.db.list.filter(p=>F(p,t.filter.quickSearch||"")));let i=t.table.columns,s=t.header?.action?.create,l=null;return s!==!1&&(typeof s=="function"?l=s({state:t,save:null,data:null}):typeof l=="object"&&((0,y.isValidElement)(s)?l=s:l=(0,r.jsx)(P,{fill:!0,large:!0,raised:!0,className:"self-stretch capitalize",onClick:()=>{let p=t.tree.parent;p.crud.setMode("form",{}),p.component.render()},children:typeof l=="string"?t.header?.action?.create:L("Tambah Baru","id"),...typeof l=="object"&&!(0,y.isValidElement)(l)?l:{}}))),(0,r.jsx)(React.Fragment,null,(0,r.jsx)("div",{className:"base-list-mobile relative flex-1",css:r.css`
          > div > ul {
            &::before,
            &::after {
              display: none;
            }
          }
          .item-content {
            background: white;
          }
        `},t.db.loading&&(0,r.jsx)(W,{className:"absolute top-0 left-0 right-0 rounded-none",infinite:!0}),n.length===0?(0,r.jsx)(React.Fragment,null,t.db.loading?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center flex-1 p-10 space-y-5"},(0,r.jsx)(z,null)):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center flex-1 p-10 space-y-5"},(0,r.jsx)("img",{src:"/__ext/icons/empty.svg"}),(0,r.jsx)("div",{className:"font-medium text-center uppercase text-md"},!t.filter.quickSearch&&L("Tidak ada [table]",{table:t.header?.title||""},"id"),(0,r.jsx)("div",{className:"capitalize whitespace-pre-wrap"},t.filter.quickSearch&&L(`[table] tidak ditemukan
 untuk pencarian "[search]"`,{table:t.header?.title||"",search:t.filter.quickSearch},"id"))),l)):(0,r.jsx)(React.Fragment,null,t.table.mobile.mode==="list"?(0,r.jsx)(K,{columns:i,items:n,meta:c,render:d,state:t}):(0,r.jsx)(G,{columns:i,items:n,meta:c,render:d,state:t}))))},"BaseListMobile"),b=m((o,e,c)=>{if(!!o){if(typeof o=="string")return O((0,x.default)(e,o),c,o);if(o[1]){let t=o[1];return t.value&&c?t.value(e,c):O((0,x.default)(e,"e.0"),c,o[0])}}},"columnized"),O=m((o,e,c)=>{let t="string",d=e?.db.definition?.columns[c||""];if(d)switch(t=d.type,t){case"date":return U(o)}return o},"formatString");export{me as BaseListMobile,b as columnized};
//# sourceMappingURL=BaseListMobile-YXX7WPQ2.js.map
