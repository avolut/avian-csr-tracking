import{a as l}from"./chunk-SDY2POXP.js";function _(r){for(var i=[],e=0;e<r.length;){var f=r[e];if(f==="*"||f==="+"||f==="?"){i.push({type:"MODIFIER",index:e,value:r[e++]});continue}if(f==="\\"){i.push({type:"ESCAPED_CHAR",index:e++,value:r[e++]});continue}if(f==="{"){i.push({type:"OPEN",index:e,value:r[e++]});continue}if(f==="}"){i.push({type:"CLOSE",index:e,value:r[e++]});continue}if(f===":"){for(var c="",n=e+1;n<r.length;){var u=r.charCodeAt(n);if(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||u===95){c+=r[n++];continue}break}if(!c)throw new TypeError("Missing parameter name at "+e);i.push({type:"NAME",index:e,value:c}),e=n;continue}if(f==="("){var g=1,p="",n=e+1;if(r[n]==="?")throw new TypeError('Pattern cannot start with "?" at '+n);for(;n<r.length;){if(r[n]==="\\"){p+=r[n++]+r[n++];continue}if(r[n]===")"){if(g--,g===0){n++;break}}else if(r[n]==="("&&(g++,r[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+n);p+=r[n++]}if(g)throw new TypeError("Unbalanced pattern at "+e);if(!p)throw new TypeError("Missing pattern at "+e);i.push({type:"PATTERN",index:e,value:p}),e=n;continue}i.push({type:"CHAR",index:e,value:r[e++]})}return i.push({type:"END",index:e,value:""}),i}l(_,"lexer");function O(r,i){i===void 0&&(i={});for(var e=_(r),f=i.prefixes,c=f===void 0?"./":f,n="[^"+R(i.delimiter||"/#?")+"]+?",u=[],g=0,p=0,x="",d=l(function(y){if(p<e.length&&e[p].type===y)return e[p++].value},"tryConsume"),a=l(function(y){var T=d(y);if(T!==void 0)return T;var N=e[p],D=N.type,M=N.index;throw new TypeError("Unexpected "+D+" at "+M+", expected "+y)},"mustConsume"),o=l(function(){for(var y="",T;T=d("CHAR")||d("ESCAPED_CHAR");)y+=T;return y},"consumeText");p<e.length;){var v=d("CHAR"),m=d("NAME"),E=d("PATTERN");if(m||E){var t=v||"";c.indexOf(t)===-1&&(x+=t,t=""),x&&(u.push(x),x=""),u.push({name:m||g++,prefix:t,suffix:"",pattern:E||n,modifier:d("MODIFIER")||""});continue}var h=v||d("ESCAPED_CHAR");if(h){x+=h;continue}x&&(u.push(x),x="");var s=d("OPEN");if(s){var t=o(),A=d("NAME")||"",w=d("PATTERN")||"",C=o();a("CLOSE"),u.push({name:A||(w?g++:""),pattern:A&&!w?n:w,prefix:t,suffix:C,modifier:d("MODIFIER")||""});continue}a("END")}return u}l(O,"parse");function L(r,i){return S(O(r,i),i)}l(L,"compile");function S(r,i){i===void 0&&(i={});var e=b(i),f=i.encode,c=f===void 0?function(p){return p}:f,n=i.validate,u=n===void 0?!0:n,g=r.map(function(p){if(typeof p=="object")return new RegExp("^(?:"+p.pattern+")$",e)});return function(p){for(var x="",d=0;d<r.length;d++){var a=r[d];if(typeof a=="string"){x+=a;continue}var o=p?p[a.name]:void 0,v=a.modifier==="?"||a.modifier==="*",m=a.modifier==="*"||a.modifier==="+";if(Array.isArray(o)){if(!m)throw new TypeError('Expected "'+a.name+'" to not repeat, but got an array');if(o.length===0){if(v)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var E=0;E<o.length;E++){var t=c(o[E],a);if(u&&!g[d].test(t))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but got "'+t+'"');x+=a.prefix+t+a.suffix}continue}if(typeof o=="string"||typeof o=="number"){var t=c(String(o),a);if(u&&!g[d].test(t))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+t+'"');x+=a.prefix+t+a.suffix;continue}if(!v){var h=m?"an array":"a string";throw new TypeError('Expected "'+a.name+'" to be '+h)}}return x}}l(S,"tokensToFunction");function U(r,i){var e=[],f=P(r,e,i);return F(f,e,i)}l(U,"match");function F(r,i,e){e===void 0&&(e={});var f=e.decode,c=f===void 0?function(n){return n}:f;return function(n){var u=r.exec(n);if(!u)return!1;for(var g=u[0],p=u.index,x=Object.create(null),d=l(function(o){if(u[o]===void 0)return"continue";var v=i[o-1];v.modifier==="*"||v.modifier==="+"?x[v.name]=u[o].split(v.prefix+v.suffix).map(function(m){return c(m,v)}):x[v.name]=c(u[o],v)},"_loop_1"),a=1;a<u.length;a++)d(a);return{path:g,index:p,params:x}}}l(F,"regexpToFunction");function R(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}l(R,"escapeString");function b(r){return r&&r.sensitive?"":"i"}l(b,"flags");function H(r,i){if(!i)return r;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,f=0,c=e.exec(r.source);c;)i.push({name:c[1]||f++,prefix:"",suffix:"",modifier:"",pattern:""}),c=e.exec(r.source);return r}l(H,"regexpToRegexp");function I(r,i,e){var f=r.map(function(c){return P(c,i,e).source});return new RegExp("(?:"+f.join("|")+")",b(e))}l(I,"arrayToRegexp");function $(r,i,e){return W(O(r,e),i,e)}l($,"stringToRegexp");function W(r,i,e){e===void 0&&(e={});for(var f=e.strict,c=f===void 0?!1:f,n=e.start,u=n===void 0?!0:n,g=e.end,p=g===void 0?!0:g,x=e.encode,d=x===void 0?function(y){return y}:x,a="["+R(e.endsWith||"")+"]|$",o="["+R(e.delimiter||"/#?")+"]",v=u?"^":"",m=0,E=r;m<E.length;m++){var t=E[m];if(typeof t=="string")v+=R(d(t));else{var h=R(d(t.prefix)),s=R(d(t.suffix));if(t.pattern)if(i&&i.push(t),h||s)if(t.modifier==="+"||t.modifier==="*"){var A=t.modifier==="*"?"?":"";v+="(?:"+h+"((?:"+t.pattern+")(?:"+s+h+"(?:"+t.pattern+"))*)"+s+")"+A}else v+="(?:"+h+"("+t.pattern+")"+s+")"+t.modifier;else v+="("+t.pattern+")"+t.modifier;else v+="(?:"+h+s+")"+t.modifier}}if(p)c||(v+=o+"?"),v+=e.endsWith?"(?="+a+")":"$";else{var w=r[r.length-1],C=typeof w=="string"?o.indexOf(w[w.length-1])>-1:w===void 0;c||(v+="(?:"+o+"(?="+a+"))?"),C||(v+="(?="+o+"|"+a+")")}return new RegExp(v,b(e))}l(W,"tokensToRegexp");function P(r,i,e){return r instanceof RegExp?H(r,i):Array.isArray(r)?I(r,i,e):$(r,i,e)}l(P,"pathToRegexp");export{L as a,U as b,P as c};
//# sourceMappingURL=chunk-HP25GDQW.js.map
