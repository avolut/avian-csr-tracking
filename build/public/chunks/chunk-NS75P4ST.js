import{a as G}from"./chunk-L46G43SZ.js";import{a as I}from"./chunk-WJABE3AS.js";import{a as M}from"./chunk-56P4Z7Q4.js";import{a as L,d as b,e as F}from"./chunk-NXH6K27G.js";import{V as W}from"./chunk-IHSADOYH.js";import{a as N}from"./chunk-2OZ4JKVY.js";import{b as R}from"./chunk-IRKXFVRU.js";import{a as i,e as x}from"./chunk-SDY2POXP.js";var $=x(I()),U=i(async(e,t,a)=>{let n=(0,$.default)(a,"method")||t?"POST":"GET",r={method:n,headers:{Accept:"application/json","Sec-Fetch-Dest":"script","get-server-props":"yes","Content-Type":"application/json;charset=UTF-8"}};t&&(r.body=JSON.stringify(t));try{let c=e;if(typeof global!="undefined"&&global.mode&&e.indexOf("http")!==0){let w=global;c=`${w.scheme}://${w.host}:${w.port}/${e[0]==="/"?e.substr(1):e}`}let m=await fetch(c,r);if((0,$.default)(a,"raw"))return await m.text();let l=await m.json();if(l){if(l.error){let w=n!=="GET"?`

[DATA] ${r.body}`:"";return console.error(`API ERROR: ${n} ${e}${w}

[RESPONSE] ${l.error}`),null}return l}}catch(c){return console.log(c),null}},"api");var O=x(R()),j=i((e,t)=>{},"renderLog"),q=i(function(e,t){let a=i((r,c)=>typeof r=="object"&&r!==null?(0,O.isValidElement)(r)?r.key?r:React.createElement(O.Fragment,{key:c},r):React.createElement("pre",{className:"max-w-2xl p-2 text-xs break-words whitespace-pre-wrap"},JSON.stringify(r,null,2)):r,"formatSingle"),n=i(r=>r.map((c,m)=>Array.isArray(c)?n(c):a(c,m)),"formatArray");return Array.isArray(e)?e.length===0||e.length>0&&(0,O.isValidElement)(e[0])?n(e):React.createElement("pre",{className:"max-w-2xl p-2 text-xs break-words whitespace-pre-wrap"},JSON.stringify(e,null,2)):a(e,t)},"formatJsxChildren");var f=x(N());var H=x(I()),y=x(R());var E=x(N()),J=x(G()),P=x(R());var D=(0,P.forwardRef)((e,t)=>{let{window:a}=b(),n=(0,P.useRef)(null),r={...e};r.data&&delete r.data;let c=(0,J.default)(l=>{},1e3),m=r.href;return r.href&&delete r.href,(0,E.jsx)("a",{css:E.css`
        cursor: pointer;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        transition: 0.1s all;

        &:active {
          outline: none !important;
          opacity: 0.6;
        }
      `,...r,ref:l=>{typeof t=="function"&&t(l),n.current=l},onMouseOver:l=>{e.onMouseOver&&e.onMouseOver(l)===!1||c(l.currentTarget.getAttribute("href"))},onClick:async l=>{if(l.shiftKey)return!0;l.preventDefault(),l.stopPropagation(),e.onClick?await e.onClick(l,w=>a.navigate(w||m)):m&&a.navigate(m)}})});var T={},re=i((e,t,a)=>{let{window:n}=b(),r={},c=new Set,m=i((o,s,..._)=>{let g;o==="img"&&(0,H.default)(s,"src","").indexOf("/fimgs/")===0&&(n.figmaImageCaches||(n.figmaImageCaches={}),n.figmaImageCaches[s.src]||(n.figmaImageCaches[s.src]=n.isSSR?{}:new Image,n.figmaImageCaches[s.src].src=s.src));let h,u=n.cms_components[o];if(o==="a"&&(n.platform==="mobile"?h=M:h=D),(o==="fragment"||o==="fnode")&&(h=y.Fragment),o==="effect")return!c.has(s)&&typeof s.run=="function"&&c.add(s),"";if(o==="html-head")return"";if(u&&!h){if(!u.loaded){if(u.loading)return r[o]=new Promise(d=>{L(()=>n.cms_components[o].loaded).then(d)}),"";{let d=u.load();if(d[0]instanceof Promise)l({def:u,tag:o,ext:d});else{u.loaded=!0,u.loading=!1;let p=d[0],k=p.default;k||(k=p[Object.keys(p).shift()||""]),u.component=k}}}h=i(d=>{let p=u.component;return(0,f.jsx)(A,{name:o},(0,f.jsx)(p,{...d}))},"component")}if(s){g={};for(let[d,p]of Object.entries(s))switch(d){case"style":typeof p=="string"?g.css=f.css`
                ${p}
              `:typeof p=="object"&&!!p.styles&&(g.css=p);break;case"class":g.className=(s.className?s.className+" ":"")+p;break;case"for":g.htmlFor=p;break;default:g[d]=p;break}}if(h&&(g||(g={}),h===y.Fragment))for(let d of Object.keys(g))d!=="key"&&delete g[d];return(0,f.jsx)(h||o,g,..._.map(q.bind({component:h,tag:o,cmsPage:e})))},"h"),l=i(({def:o,tag:s,ext:_})=>{o.loading=!0,o.loaded=!1,r[s]=new Promise(async h=>{let u=i(()=>(0,f.jsx)(y.default.Fragment,null),"result"),C=await _[0];if(u=C.default,u||(u=C[Object.keys(C).shift()||""]),o.component=u,!o.template.code&&!T[s])try{let d=n.isSSR?`http://localhost:${global.port}`:"",k=await(await fetch(`${d}/__component/${s}.js`)).text();k==="null"?T[s]=!0:o.template.code=k}catch{T[s]=!0}o.template.loading=!1,j("compnt | loader",`initial loading component <${s}/>`),o.loaded=!0,o.loading=!1,h(u),v===0&&a&&a.render&&a.render()});let g=(0,y.lazy)(async()=>(await r[s],{default:o.component}));o.component=h=>(0,f.jsx)(y.Suspense,{fallback:null},(0,f.jsx)(g,{...h}))},"suspendLoad"),w=a.params||{};w.isDev=!!n.is_dev;let S=(0,f.jsx)(y.default.Fragment,null),B=i((o,s)=>{try{return(0,f.jsx)(y.default.Fragment,null,m("effect",{meta:o.meta,run:o.init}),s({meta:t,children:a.children,window:n,render:a.render},e.__extract))}catch(_){return console.error(_),(0,f.jsx)(y.default.Fragment,null)}},"baseRunner");S=e(F,U,n.action,n.runInAction,m,n.fragment,{},{},n.user,w,f.css,t,B,a.children);let v=Object.keys(r).length;return v>0&&a.defer&&(S=(0,f.jsx)(y.default.Fragment,null),n.platform==="mobile"&&a.type==="layout"&&(S=(0,f.jsx)(W,null))),{page:S,loadingCount:v,loading:v>0?async()=>(await Promise.all(Object.values(r)),!0):void 0,effects:c}},"renderCMS"),A=class extends y.Component{constructor(t){super(t);this.state={hasError:!1,name:t.name}}componentDidCatch(t,a){this.setState({hasError:!0,error:t})}render(){return this.state.hasError?(0,f.jsx)("div",{className:"border-red-400 border-2 text-red-700 m-2 rounded-md p-2 flex flex-col"},"Error in <",this.state.name," />:",(0,f.jsx)("div",{className:"text-xs mt-1 font-mono"},this.state.error.toString())):this.props.children}};i(A,"ComponentError");var se=i(async e=>{let{window:t}=b();if(e){if(t.cms_pages[e.id]||(t.cms_pages[e.id]=e),!t.cms_pages[e.id].render){t.cms_pages[e.id].render=()=>{};let n=e.id;if(e.id){let r=new Promise(c=>{let m=document.createElement("script");!t.is_dev&&t.hostname?m.src=`${t.hostname}/__page/${n}.js`:m.src=`/__page/${n}.js`,m.id=`page-${n}`,m.onload=()=>{c(t.cms_pages[e.id].render)},document.getElementsByTagName("head")[0].appendChild(m)});e.render=await r}}return e}return!1},"loadPage");var me=i(async()=>{let{window:e}=b();e.isSSR||(e.cms_components={});let t=(await import("./external-4C6RHXDU.js")).default;if(e.platform==="mobile"){let{extendExternals:a}=await import("./mobile-ext-UG334VGK.js");t={...t,...a()}}for(let[a,n]of Object.entries(t))e.cms_components[a]||(e.cms_components[a]={component:()=>React.createElement(React.Fragment,null),template:{loading:!1,code:""},load:n,loading:!1,loaded:!1})},"reloadAllComponents"),fe=i(async()=>{let{window:e}=b();e.platform||(e.platform="web",location&&(location.pathname==="/m"||location.pathname.indexOf("/m/")===0)?e.platform="mobile":location&&(location.pathname==="/w"||location.pathname.indexOf("/w/")===0)?e.platform="web":document.body.clientWidth<=768&&(e.platform="mobile"),location.pathname.indexOf("/figma")===0&&(e.platform="web"))},"detectPlatform");export{U as a,j as b,re as c,se as d,me as e,fe as f};
//# sourceMappingURL=chunk-NS75P4ST.js.map
