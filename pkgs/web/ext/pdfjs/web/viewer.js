(()=>{"use strict";var lt=[,(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.compatibilityParams=u.OptionKind=u.AppOptions=void 0;const P=Object.create(null);u.compatibilityParams=P;{const d=typeof navigator!="undefined"&&navigator.userAgent||"",e=typeof navigator!="undefined"&&navigator.platform||"",n=typeof navigator!="undefined"&&navigator.maxTouchPoints||1,o=/Android/.test(d),l=/\b(iPad|iPhone|iPod)(?=;)/.test(d)||e==="MacIntel"&&n>1,s=/CriOS/.test(d);(function(){s&&(P.disableCreateObjectURL=!0)})(),function(){(l||o)&&(P.maxCanvasPixels=5242880)}()}const a={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};u.OptionKind=a;const c={annotationMode:{value:2,kind:a.VIEWER+a.PREFERENCE},cursorToolOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},defaultUrl:{value:"",kind:a.VIEWER},defaultZoomValue:{value:"",kind:a.VIEWER+a.PREFERENCE},disableHistory:{value:!1,kind:a.VIEWER},disablePageLabels:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePermissions:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableScripting:{value:!0,kind:a.VIEWER+a.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:a.VIEWER},externalLinkTarget:{value:0,kind:a.VIEWER+a.PREFERENCE},historyUpdateUrl:{value:!1,kind:a.VIEWER+a.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},imageResourcesPath:{value:"./images/",kind:a.VIEWER},maxCanvasPixels:{value:16777216,compatibility:P.maxCanvasPixels,kind:a.VIEWER},pdfBugEnabled:{value:!1,kind:a.VIEWER+a.PREFERENCE},printResolution:{value:150,kind:a.VIEWER},renderer:{value:"canvas",kind:a.VIEWER},sidebarViewOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},scrollModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},spreadModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},textLayerMode:{value:1,kind:a.VIEWER+a.PREFERENCE},useOnlyCssZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},viewerCssTheme:{value:0,kind:a.VIEWER+a.PREFERENCE},viewOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},cMapPacked:{value:!0,kind:a.API},cMapUrl:{value:"../web/cmaps/",kind:a.API},disableAutoFetch:{value:!1,kind:a.API+a.PREFERENCE},disableFontFace:{value:!1,kind:a.API+a.PREFERENCE},disableRange:{value:!1,kind:a.API+a.PREFERENCE},disableStream:{value:!1,kind:a.API+a.PREFERENCE},docBaseUrl:{value:"",kind:a.API},enableXfa:{value:!0,kind:a.API+a.PREFERENCE},fontExtraProperties:{value:!1,kind:a.API},isEvalSupported:{value:!0,kind:a.API},maxImageSize:{value:-1,kind:a.API},pdfBug:{value:!1,kind:a.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:a.API},verbosity:{value:1,kind:a.API},workerPort:{value:null,kind:a.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:a.WORKER}};c.disablePreferences={value:!1,kind:a.VIEWER},c.locale={value:typeof navigator!="undefined"?navigator.language:"en-US",kind:a.VIEWER},c.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:a.VIEWER},c.renderer.kind+=a.PREFERENCE;const w=Object.create(null);class b{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const n=w[e];if(n!==void 0)return n;const o=c[e];if(o!==void 0)return o.compatibility??o.value}static getAll(e=null){const n=Object.create(null);for(const o in c){const l=c[o];if(e){if((e&l.kind)==0)continue;if(e===a.PREFERENCE){const h=l.value,r=typeof h;if(r==="boolean"||r==="string"||r==="number"&&Number.isInteger(h)){n[o]=h;continue}throw new Error(`Invalid type for preference: ${o}`)}}const s=w[o];n[o]=s!==void 0?s:l.compatibility??l.value}return n}static set(e,n){w[e]=n}static setAll(e){for(const n in e)w[n]=e[n]}static remove(e){delete w[e]}static _hasUserOptions(){return Object.keys(w).length>0}}u.AppOptions=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFViewerApplication=u.PDFPrintServiceFactory=u.DefaultExternalServices=void 0;var a=P(3),c=P(1),w=P(4),b=P(5),d=P(7),e=P(8),n=P(9),o=P(10),l=P(12),s=P(13),h=P(14),r=P(16),_=P(17),p=P(18),g=P(19),y=P(20),t=P(21),f=P(22),S=P(23),V=P(24),T=P(26),C=P(35),v=P(36),I=P(37);const D=5e3,A=1e4,H=1e3,j="enablePermissions",L={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},X={AUTOMATIC:0,LIGHT:1,DARK:2},K=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],q=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class ee{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(m){}static updateFindMatchesCount(m){}static initPassiveLoading(m){}static async fallback(m){}static reportTelemetry(m){}static createDownloadManager(m){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(m){throw new Error("Not implemented: createL10n")}static createScripting(m){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,w.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,w.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,w.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,w.shadow)(this,"isInAutomation",!1)}}u.DefaultExternalServices=ee;const E={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,w.createPromiseCapability)(),_fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:ee,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_wheelUnusedTicks:0,_idleCallbacks:new Set,async initialize(i){this.preferences=this.externalServices.createPreferences(),this.appConfig=i,await this._readPreferences(),await this._parseHashParameters(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&c.AppOptions.get("externalLinkTarget")===w.LinkTarget.NONE&&c.AppOptions.set("externalLinkTarget",w.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const m=i.appContainer||document.documentElement;this.l10n.translate(m).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()},async _readPreferences(){if(!c.AppOptions.get("disablePreferences")){c.AppOptions._hasUserOptions()&&console.warn('_readPreferences: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{c.AppOptions.setAll(await this.preferences.getAll())}catch(i){console.error(`_readPreferences: "${i?.message}".`)}}},async _parseHashParameters(){if(!c.AppOptions.get("pdfBugEnabled"))return;const i=document.location.hash.substring(1);if(!i)return;const m=(0,a.parseQueryString)(i),M=[];if(m.get("disableworker")==="true"&&M.push(ce()),m.has("disablerange")&&c.AppOptions.set("disableRange",m.get("disablerange")==="true"),m.has("disablestream")&&c.AppOptions.set("disableStream",m.get("disablestream")==="true"),m.has("disableautofetch")&&c.AppOptions.set("disableAutoFetch",m.get("disableautofetch")==="true"),m.has("disablefontface")&&c.AppOptions.set("disableFontFace",m.get("disablefontface")==="true"),m.has("disablehistory")&&c.AppOptions.set("disableHistory",m.get("disablehistory")==="true"),m.has("verbosity")&&c.AppOptions.set("verbosity",m.get("verbosity")|0),m.has("textlayer"))switch(m.get("textlayer")){case"off":c.AppOptions.set("textLayerMode",a.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":this.appConfig.viewerContainer.classList.add(`textLayer-${m.get("textlayer")}`);break}if(m.has("pdfbug")){c.AppOptions.set("pdfBug",!0),c.AppOptions.set("fontExtraProperties",!0);const R=m.get("pdfbug").split(",");M.push(he(R))}if(m.has("locale")&&c.AppOptions.set("locale",m.get("locale")),M.length!==0)try{await Promise.all(M)}catch(R){console.error(`_parseHashParameters: "${R.message}".`)}},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:c.AppOptions.get("locale")});const i=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=i},_forceCssTheme(){const i=c.AppOptions.get("viewerCssTheme");if(!(i===X.AUTOMATIC||!Object.values(X).includes(i)))try{const m=document.styleSheets[0],M=m?.cssRules||[];for(let R=0,k=M.length;R<k;R++){const F=M[R];if(F instanceof CSSMediaRule&&F.media?.[0]==="(prefers-color-scheme: dark)"){if(i===X.LIGHT){m.deleteRule(R);return}const x=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(F.cssText);x?.[1]&&(m.deleteRule(R),m.insertRule(x[1],R));return}}}catch(m){console.error(`_forceCssTheme: "${m?.message}".`)}},async _initializeViewerComponents(){const{appConfig:i,externalServices:m}=this;let M;i.eventBus?M=i.eventBus:m.isInAutomation?M=new a.AutomationEventBus:M=new a.EventBus,this.eventBus=M,this.overlayManager=new e.OverlayManager;const R=new d.PDFRenderingQueue;R.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=R;const k=new p.PDFLinkService({eventBus:M,externalLinkTarget:c.AppOptions.get("externalLinkTarget"),externalLinkRel:c.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:c.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=k;const F=m.createDownloadManager();this.downloadManager=F;const x=new h.PDFFindController({linkService:k,eventBus:M});this.findController=x;const $=new t.PDFScriptingManager({eventBus:M,sandboxBundleSrc:c.AppOptions.get("sandboxBundleSrc"),scriptingFactory:m,docPropertiesLookup:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=$;const Z=i.mainContainer,Y=i.viewerContainer;this.pdfViewer=new T.PDFViewer({container:Z,viewer:Y,eventBus:M,renderingQueue:R,linkService:k,downloadManager:F,findController:x,scriptingManager:c.AppOptions.get("enableScripting")&&$,renderer:c.AppOptions.get("renderer"),l10n:this.l10n,textLayerMode:c.AppOptions.get("textLayerMode"),annotationMode:c.AppOptions.get("annotationMode"),imageResourcesPath:c.AppOptions.get("imageResourcesPath"),enablePrintAutoRotate:c.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:c.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:c.AppOptions.get("maxCanvasPixels")}),R.setViewer(this.pdfViewer),k.setViewer(this.pdfViewer),$.setViewer(this.pdfViewer),this.pdfThumbnailViewer=new V.PDFThumbnailViewer({container:i.sidebar.thumbnailView,eventBus:M,renderingQueue:R,linkService:k,l10n:this.l10n}),R.setThumbnailViewer(this.pdfThumbnailViewer),!this.isViewerEmbedded&&!c.AppOptions.get("disableHistory")&&(this.pdfHistory=new r.PDFHistory({linkService:k,eventBus:M}),k.setHistory(this.pdfHistory)),this.supportsIntegratedFind||(this.findBar=new s.PDFFindBar(i.findBar,M,this.l10n)),this.pdfDocumentProperties=new l.PDFDocumentProperties(i.documentProperties,this.overlayManager,M,this.l10n),this.pdfCursorTools=new b.PDFCursorTools({container:Z,eventBus:M,cursorToolOnLoad:c.AppOptions.get("cursorToolOnLoad")}),this.toolbar=new v.Toolbar(i.toolbar,M,this.l10n),this.secondaryToolbar=new C.SecondaryToolbar(i.secondaryToolbar,Z,M),this.supportsFullscreen&&(this.pdfPresentationMode=new y.PDFPresentationMode({container:Z,pdfViewer:this.pdfViewer,eventBus:M})),this.passwordPrompt=new n.PasswordPrompt(i.passwordOverlay,this.overlayManager,this.l10n,this.isViewerEmbedded),this.pdfOutlineViewer=new g.PDFOutlineViewer({container:i.sidebar.outlineView,eventBus:M,linkService:k}),this.pdfAttachmentViewer=new o.PDFAttachmentViewer({container:i.sidebar.attachmentsView,eventBus:M,downloadManager:F}),this.pdfLayerViewer=new _.PDFLayerViewer({container:i.sidebar.layersView,eventBus:M,l10n:this.l10n}),this.pdfSidebar=new f.PDFSidebar({elements:i.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:M,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebarResizer=new S.PDFSidebarResizer(i.sidebarResizer,M,this.l10n)},run(i){this.initialize(i).then(Ie)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(i){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale(i)},zoomOut(i){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale(i)},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(i){this.pdfViewer.currentPageNumber=i},get supportsPrinting(){return We.instance.supportsPrinting},get supportsFullscreen(){return(0,w.shadow)(this,"supportsFullscreen",document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){const i=new a.ProgressBar("#loadingBar");return(0,w.shadow)(this,"loadingBar",i)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(i="",m=null){this.url=i,this.baseUrl=i.split("#")[0],m&&(this._downloadUrl=m===i?this.baseUrl:m.split("#")[0]);let M=(0,w.getPdfFilenameFromUrl)(i,"");if(!M)try{M=decodeURIComponent((0,w.getFilenameFromUrl)(i))||i}catch{M=i}this.setTitle(M)},setTitle(i){this.isViewerEmbedded||(document.title=i)},get _docFilename(){return this._contentDispositionFilename||(0,w.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark(){const{toolbar:i,secondaryToolbar:m}=this.appConfig;i.viewBookmark.hidden=!0,m.viewBookmarkButton.hidden=!0},_cancelIdleCallbacks(){if(!!this._idleCallbacks.size){for(const i of this._idleCallbacks)window.cancelIdleCallback(i);this._idleCallbacks.clear()}},async close(){this._unblockDocumentLoadEvent(),this._hideViewBookmark();const{container:i}=this.appConfig.errorWrapper;if(i.hidden=!0,this.appConfig.viewerContainer.removeAttribute("lang"),!this.pdfLoadingTask)return;if(this.pdfDocument?.annotationStorage.size>0&&this._annotationStorageModified)try{await this.save({sourceEventType:"save"})}catch{}const m=[];m.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfThumbnailViewer.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),this.pdfDocumentProperties.setDocument(null)),_e(),this.pdfLinkService.externalLinkEnabled=!0,this._fellback=!1,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._cancelIdleCallbacks(),m.push(this.pdfScriptingManager.destroyPromise),this.pdfSidebar.reset(),this.pdfOutlineViewer.reset(),this.pdfAttachmentViewer.reset(),this.pdfLayerViewer.reset(),this.pdfHistory?.reset(),this.findBar?.reset(),this.toolbar.reset(),this.secondaryToolbar.reset(),typeof PDFBug!="undefined"&&PDFBug.cleanup(),await Promise.all(m)},async open(i,m){this.pdfLoadingTask&&await this.close();const M=c.AppOptions.getAll(c.OptionKind.WORKER);for(const x in M)w.GlobalWorkerOptions[x]=M[x];const R=Object.create(null);typeof i=="string"?(this.setTitleUsingUrl(i,i),R.url=i):i&&"byteLength"in i?R.data=i:i.url&&i.originalUrl&&(this.setTitleUsingUrl(i.originalUrl,i.url),R.url=i.url);const k=c.AppOptions.getAll(c.OptionKind.API);for(const x in k){let $=k[x];R[x]=$}if(m)for(const x in m)R[x]=m[x];const F=(0,w.getDocument)(R);return this.pdfLoadingTask=F,F.onPassword=(x,$)=>{this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(x,$),this.passwordPrompt.open()},F.onProgress=({loaded:x,total:$})=>{this.progress(x/$)},F.onUnsupportedFeature=this.fallback.bind(this),F.promise.then(x=>{this.load(x)},x=>{if(F!==this.pdfLoadingTask)return;let $="loading_error";return x instanceof w.InvalidPDFException?$="invalid_file_error":x instanceof w.MissingPDFException?$="missing_file_error":x instanceof w.UnexpectedResponseException&&($="unexpected_response_error"),this.l10n.get($).then(Z=>{throw this._documentError(Z,{message:x?.message}),x})})},_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")},async download({sourceEventType:i="download"}={}){const m=this._downloadUrl,M=this._docFilename;try{this._ensureDownloadComplete();const R=await this.pdfDocument.getData(),k=new Blob([R],{type:"application/pdf"});await this.downloadManager.download(k,m,M,i)}catch{await this.downloadManager.downloadUrl(m,M)}},async save({sourceEventType:i="download"}={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const m=this._downloadUrl,M=this._docFilename;try{this._ensureDownloadComplete();const R=await this.pdfDocument.saveDocument(),k=new Blob([R],{type:"application/pdf"});await this.downloadManager.download(k,m,M,i)}catch(R){console.error(`Error when saving the document: ${R.message}`),await this.download({sourceEventType:i})}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}},downloadOrSave(i){this.pdfDocument?.annotationStorage.size>0?this.save(i):this.download(i)},fallback(i){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:i}),!this._fellback&&(this._fellback=!0,this.externalServices.fallback({featureId:i,url:this.baseUrl}).then(m=>{!m||this.download({sourceEventType:"download"})}))},_documentError(i,m=null){this._unblockDocumentLoadEvent(),this._otherError(i,m)},_otherError(i,m=null){const M=[this.l10n.get("error_version_info",{version:w.version||"?",build:w.build||"?"})];m&&(M.push(this.l10n.get("error_message",{message:m.message})),m.stack?M.push(this.l10n.get("error_stack",{stack:m.stack})):(m.filename&&M.push(this.l10n.get("error_file",{file:m.filename})),m.lineNumber&&M.push(this.l10n.get("error_line",{line:m.lineNumber}))));const R=this.appConfig.errorWrapper,k=R.container;k.hidden=!1;const F=R.errorMessage;F.textContent=i;const x=R.closeButton;x.onclick=function(){k.hidden=!0};const $=R.errorMoreInfo,Z=R.moreInfoButton,Y=R.lessInfoButton;Z.onclick=function(){$.hidden=!1,Z.hidden=!0,Y.hidden=!1,$.style.height=$.scrollHeight+"px"},Y.onclick=function(){$.hidden=!0,Z.hidden=!1,Y.hidden=!0},Z.oncontextmenu=a.noContextMenuHandler,Y.oncontextmenu=a.noContextMenuHandler,x.oncontextmenu=a.noContextMenuHandler,Z.hidden=!1,Y.hidden=!0,Promise.all(M).then(se=>{$.value=se.join(`
`)})},progress(i){if(this.downloadComplete)return;const m=Math.round(i*100);(m>this.loadingBar.percent||isNaN(m))&&(this.loadingBar.percent=m,(this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:c.AppOptions.get("disableAutoFetch"))&&m&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(()=>{this.loadingBar.hide(),this.disableAutoFetchLoadingBarTimeout=null},D)))},load(i){this.pdfDocument=i,i.getDownloadInfo().then(({length:oe})=>{this._contentLength=oe,this.downloadComplete=!0,this.loadingBar.hide(),x.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const m=i.getPageLayout().catch(function(){}),M=i.getPageMode().catch(function(){}),R=i.getOpenAction().catch(function(){});this.toolbar.setPagesCount(i.numPages,!1),this.secondaryToolbar.setPagesCount(i.numPages);let k;k=null,this.pdfLinkService.setDocument(i,k),this.pdfDocumentProperties.setDocument(i,this.url);const F=this.pdfViewer;F.setDocument(i);const{firstPagePromise:x,onePageRendered:$,pagesPromise:Z}=F;this.pdfThumbnailViewer.setDocument(i);const se=(this.store=new I.ViewHistory(i.fingerprints[0])).getMultiple({page:null,zoom:a.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:a.SidebarView.UNKNOWN,scrollMode:a.ScrollMode.UNKNOWN,spreadMode:a.SpreadMode.UNKNOWN}).catch(()=>Object.create(null));x.then(oe=>{this.loadingBar.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(i),Promise.all([a.animationStarted,se,m,M,R]).then(async([ct,pe,it,nt,ht])=>{const st=c.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:i.fingerprints[0],viewOnLoad:st,initialDest:ht?.dest});const rt=this.initialBookmark,je=c.AppOptions.get("defaultZoomValue");let He=je?`zoom=${je}`:null,at=null,De=c.AppOptions.get("sidebarViewOnLoad"),ze=c.AppOptions.get("scrollModeOnLoad"),Be=c.AppOptions.get("spreadModeOnLoad");pe.page&&st!==L.INITIAL&&(He=`page=${pe.page}&zoom=${je||pe.zoom},${pe.scrollLeft},${pe.scrollTop}`,at=parseInt(pe.rotation,10),De===a.SidebarView.UNKNOWN&&(De=pe.sidebarView|0),ze===a.ScrollMode.UNKNOWN&&(ze=pe.scrollMode|0),Be===a.SpreadMode.UNKNOWN&&(Be=pe.spreadMode|0)),nt&&De===a.SidebarView.UNKNOWN&&(De=(0,a.apiPageModeToSidebarView)(nt)),it&&ze===a.ScrollMode.UNKNOWN&&Be===a.SpreadMode.UNKNOWN&&(Be=(0,a.apiPageLayoutToViewerModes)(it).spreadMode),this.setInitialView(He,{rotation:at,sidebarView:De,scrollMode:ze,spreadMode:Be}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||F.focus(),this._initializePermissions(i),await Promise.race([Z,new Promise(ot=>{setTimeout(ot,A)})]),!(!rt&&!He)&&(F.hasEqualPageSizes||(this.initialBookmark=rt,F.currentScaleValue=F.currentScaleValue,this.setInitialView(He)))}).catch(()=>{this.setInitialView()}).then(function(){F.update()})}),Z.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(i,R)}),$.then(()=>{if(i.getOutline().then(oe=>{i===this.pdfDocument&&this.pdfOutlineViewer.render({outline:oe,pdfDocument:i})}),i.getAttachments().then(oe=>{i===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:oe})}),F.optionalContentConfigPromise.then(oe=>{i===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:oe,pdfDocument:i})}),"requestIdleCallback"in window){const oe=window.requestIdleCallback(()=>{this._collectTelemetry(i),this._idleCallbacks.delete(oe)},{timeout:1e3});this._idleCallbacks.add(oe)}}),this._initializePageLabels(i),this._initializeMetadata(i)},async _scriptingDocProperties(i){return!this.documentInfo&&(await new Promise(m=>{this.eventBus._on("metadataloaded",m,{once:!0})}),i!==this.pdfDocument)||!this._contentLength&&(await new Promise(m=>{this.eventBus._on("documentloaded",m,{once:!0})}),i!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata?.getRaw(),authors:this.metadata?.get("dc:creator"),numPages:this.pagesCount,URL:this.url}},async _collectTelemetry(i){const m=await this.pdfDocument.getMarkInfo();if(i!==this.pdfDocument)return;const M=m?.Marked||!1;this.externalServices.reportTelemetry({type:"tagged",tagged:M})},async _initializeAutoPrint(i,m){const[M,R]=await Promise.all([m,this.pdfViewer.enableScripting?null:i.getJavaScript()]);if(i!==this.pdfDocument)return;let k=!1;if(M?.action==="Print"&&(k=!0),R&&(R.some(F=>F?(console.warn("Warning: JavaScript support is not enabled"),this.fallback(w.UNSUPPORTED_FEATURES.javaScript),!0):!1),!k)){for(const F of R)if(F&&a.AutoPrintRegExp.test(F)){k=!0;break}}k&&this.triggerPrinting()},async _initializeMetadata(i){const{info:m,metadata:M,contentDispositionFilename:R,contentLength:k}=await i.getMetadata();if(i!==this.pdfDocument)return;this.documentInfo=m,this.metadata=M,this._contentDispositionFilename??=R,this._contentLength??=k,console.log(`PDF ${i.fingerprints[0]} [${m.PDFFormatVersion} ${(m.Producer||"-").trim()} / ${(m.Creator||"-").trim()}] (PDF.js: ${w.version||"-"})`),m.Language&&(this.appConfig.viewerContainer.lang=m.Language);let F=m?.Title;const x=M?.get("dc:title");x&&x!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(x)&&(F=x),F?this.setTitle(`${F} - ${R||document.title}`):R&&this.setTitle(R),m.IsXFAPresent&&!m.IsAcroFormPresent&&!i.isPureXfa?(i.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"),this.fallback(w.UNSUPPORTED_FEATURES.forms)):(m.IsAcroFormPresent||m.IsXFAPresent)&&!this.pdfViewer.renderForms&&(console.warn("Warning: Interactive form support is not enabled"),this.fallback(w.UNSUPPORTED_FEATURES.forms)),m.IsSignaturesPresent&&(console.warn("Warning: Digital signatures validation is not supported"),this.fallback(w.UNSUPPORTED_FEATURES.signatures));let $="other";K.includes(m.PDFFormatVersion)&&($=`v${m.PDFFormatVersion.replace(".","_")}`);let Z="other";if(m.Producer){const se=m.Producer.toLowerCase();q.some(function(oe){return se.includes(oe)?(Z=oe.replace(/[ .-]/g,"_"),!0):!1})}let Y=null;m.IsXFAPresent?Y="xfa":m.IsAcroFormPresent&&(Y="acroform"),this.externalServices.reportTelemetry({type:"documentInfo",version:$,generator:Z,formType:Y}),this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(i){const m=await i.getPageLabels();if(i!==this.pdfDocument||!m||c.AppOptions.get("disablePageLabels"))return;const M=m.length;let R=0,k=0;for(let Z=0;Z<M;Z++){const Y=m[Z];if(Y===(Z+1).toString())R++;else if(Y==="")k++;else break}if(R>=M||k>=M)return;const{pdfViewer:F,pdfThumbnailViewer:x,toolbar:$}=this;F.setPageLabels(m),x.setPageLabels(m),$.setPagesCount(M,!0),$.setPageNumber(F.currentPageNumber,F.currentPageLabel)},_initializePdfHistory({fingerprint:i,viewOnLoad:m,initialDest:M=null}){!this.pdfHistory||(this.pdfHistory.initialize({fingerprint:i,resetHistory:m===L.INITIAL,updateUrl:c.AppOptions.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),M&&!this.initialBookmark&&m===L.UNKNOWN&&(this.initialBookmark=JSON.stringify(M),this.pdfHistory.push({explicitDest:M,pageNumber:null})))},async _initializePermissions(i){const m=await i.getPermissions();i===this.pdfDocument&&(!m||!c.AppOptions.get("enablePermissions")||m.includes(w.PermissionFlag.COPY)||this.appConfig.viewerContainer.classList.add(j))},_initializeAnnotationStorageCallbacks(i){if(i!==this.pdfDocument)return;const{annotationStorage:m}=i;m.onSetModified=()=>{window.addEventListener("beforeunload",tt),this._annotationStorageModified=!0},m.onResetModified=()=>{window.removeEventListener("beforeunload",tt),delete this._annotationStorageModified}},setInitialView(i,{rotation:m,sidebarView:M,scrollMode:R,spreadMode:k}={}){const F=$=>{(0,a.isValidRotation)($)&&(this.pdfViewer.pagesRotation=$)},x=($,Z)=>{(0,a.isValidScrollMode)($)&&(this.pdfViewer.scrollMode=$),(0,a.isValidSpreadMode)(Z)&&(this.pdfViewer.spreadMode=Z)};this.isInitialViewSet=!0,this.pdfSidebar.setInitialView(M),x(R,k),this.initialBookmark?(F(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):i&&(F(m),this.pdfLinkService.setHash(i)),this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)},_cleanup(){!this.pdfDocument||(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup(),this.pdfDocument.cleanup(this.pdfViewer.renderer===a.RendererType.SVG))},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible,this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){if(this.pdfScriptingManager.dispatchWillPrint(),this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(F=>{this._otherError(F)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(F=>{window.alert(F)});return}const i=this.pdfViewer.getPagesOverview(),m=this.appConfig.printContainer,M=c.AppOptions.get("printResolution"),R=this.pdfViewer.optionalContentConfigPromise,k=We.instance.createPrintService(this.pdfDocument,i,m,M,R,this.l10n);this.printService=k,this.forceRendering(),k.layout(),this.externalServices.reportTelemetry({type:"print"})},afterPrint(){this.pdfScriptingManager.dispatchDidPrint(),this.printService&&(this.printService.destroy(),this.printService=null,this.pdfDocument?.annotationStorage.resetModified()),this.forceRendering()},rotatePages(i){this.pdfViewer.pagesRotation+=i},requestPresentationMode(){this.pdfPresentationMode?.request()},triggerPrinting(){!this.supportsPrinting||window.print()},bindEvents(){const{eventBus:i,_boundEvents:m}=this;m.beforePrint=this.beforePrint.bind(this),m.afterPrint=this.afterPrint.bind(this),i._on("resize",Q),i._on("hashchange",J),i._on("beforeprint",m.beforePrint),i._on("afterprint",m.afterPrint),i._on("pagerendered",we),i._on("updateviewarea",O),i._on("pagechanging",Ke),i._on("scalechanging",$e),i._on("rotationchanging",Xe),i._on("sidebarviewchanged",U),i._on("pagemode",Pe),i._on("namedaction",N),i._on("presentationmodechanged",B),i._on("presentationmode",de),i._on("print",ge),i._on("download",Me),i._on("save",ye),i._on("firstpage",ve),i._on("lastpage",Ee),i._on("nextpage",Oe),i._on("previouspage",Re),i._on("zoomin",le),i._on("zoomout",ne),i._on("zoomreset",re),i._on("pagenumberchanged",ue),i._on("scalechanged",be),i._on("rotatecw",Le),i._on("rotateccw",Ce),i._on("optionalcontentconfig",Ve),i._on("switchscrollmode",Se),i._on("scrollmodechanged",G),i._on("switchspreadmode",ke),i._on("spreadmodechanged",W),i._on("documentproperties",Fe),i._on("findfromurlhash",xe),i._on("updatefindmatchescount",Ae),i._on("updatefindcontrolstate",Ue),c.AppOptions.get("pdfBug")&&(m.reportPageStatsPDFBug=fe,i._on("pagerendered",m.reportPageStatsPDFBug),i._on("pagechanging",m.reportPageStatsPDFBug)),i._on("fileinputchange",te),i._on("openfile",ie)},bindWindowEvents(){const{eventBus:i,_boundEvents:m}=this;m.windowResize=()=>{i.dispatch("resize",{source:window})},m.windowHashChange=()=>{i.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},m.windowBeforePrint=()=>{i.dispatch("beforeprint",{source:window})},m.windowAfterPrint=()=>{i.dispatch("afterprint",{source:window})},m.windowUpdateFromSandbox=M=>{i.dispatch("updatefromsandbox",{source:window,detail:M.detail})},window.addEventListener("visibilitychange",Ze),window.addEventListener("wheel",Ye,{passive:!1}),window.addEventListener("touchstart",qe,{passive:!1}),window.addEventListener("click",Je),window.addEventListener("keydown",et),window.addEventListener("resize",m.windowResize),window.addEventListener("hashchange",m.windowHashChange),window.addEventListener("beforeprint",m.windowBeforePrint),window.addEventListener("afterprint",m.windowAfterPrint),window.addEventListener("updatefromsandbox",m.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:i,_boundEvents:m}=this;i._off("resize",Q),i._off("hashchange",J),i._off("beforeprint",m.beforePrint),i._off("afterprint",m.afterPrint),i._off("pagerendered",we),i._off("updateviewarea",O),i._off("pagechanging",Ke),i._off("scalechanging",$e),i._off("rotationchanging",Xe),i._off("sidebarviewchanged",U),i._off("pagemode",Pe),i._off("namedaction",N),i._off("presentationmodechanged",B),i._off("presentationmode",de),i._off("print",ge),i._off("download",Me),i._off("save",ye),i._off("firstpage",ve),i._off("lastpage",Ee),i._off("nextpage",Oe),i._off("previouspage",Re),i._off("zoomin",le),i._off("zoomout",ne),i._off("zoomreset",re),i._off("pagenumberchanged",ue),i._off("scalechanged",be),i._off("rotatecw",Le),i._off("rotateccw",Ce),i._off("optionalcontentconfig",Ve),i._off("switchscrollmode",Se),i._off("scrollmodechanged",G),i._off("switchspreadmode",ke),i._off("spreadmodechanged",W),i._off("documentproperties",Fe),i._off("findfromurlhash",xe),i._off("updatefindmatchescount",Ae),i._off("updatefindcontrolstate",Ue),m.reportPageStatsPDFBug&&(i._off("pagerendered",m.reportPageStatsPDFBug),i._off("pagechanging",m.reportPageStatsPDFBug),m.reportPageStatsPDFBug=null),i._off("fileinputchange",te),i._off("openfile",ie),m.beforePrint=null,m.afterPrint=null},unbindWindowEvents(){const{_boundEvents:i}=this;window.removeEventListener("visibilitychange",Ze),window.removeEventListener("wheel",Ye,{passive:!1}),window.removeEventListener("touchstart",qe,{passive:!1}),window.removeEventListener("click",Je),window.removeEventListener("keydown",et),window.removeEventListener("resize",i.windowResize),window.removeEventListener("hashchange",i.windowHashChange),window.removeEventListener("beforeprint",i.windowBeforePrint),window.removeEventListener("afterprint",i.windowAfterPrint),window.removeEventListener("updatefromsandbox",i.windowUpdateFromSandbox),i.windowResize=null,i.windowHashChange=null,i.windowBeforePrint=null,i.windowAfterPrint=null,i.windowUpdateFromSandbox=null},accumulateWheelTicks(i){(this._wheelUnusedTicks>0&&i<0||this._wheelUnusedTicks<0&&i>0)&&(this._wheelUnusedTicks=0),this._wheelUnusedTicks+=i;const m=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));return this._wheelUnusedTicks-=m,m},_unblockDocumentLoadEvent(){document.blockUnblockOnload&&document.blockUnblockOnload(!1),this._unblockDocumentLoadEvent=()=>{}},get scriptingReady(){return this.pdfScriptingManager.ready}};u.PDFViewerApplication=E;let ae;{const i=["null","http://mozilla.github.io","https://mozilla.github.io"];ae=function(m){if(m!==void 0)try{const M=new URL(window.location.href).origin||"null";if(i.includes(M))return;const{origin:R,protocol:k}=new URL(m,window.location.href)}catch(M){throw E.l10n.get("loading_error").then(R=>{E._documentError(R,{message:M?.message})}),M}}}async function ce(){w.GlobalWorkerOptions.workerSrc||(w.GlobalWorkerOptions.workerSrc=c.AppOptions.get("workerSrc")),await(0,w.loadScript)(w.PDFWorker.workerSrc)}async function he(i){const{debuggerScriptPath:m,mainContainer:M}=E.appConfig;await(0,w.loadScript)(m),PDFBug.init({OPS:w.OPS},M,i)}function fe({pageNumber:i}){if(typeof Stats=="undefined"||!Stats.enabled)return;const M=E.pdfViewer.getPageView(i-1)?.pdfPage?.stats;!M||Stats.add(i,M)}function Ie(){const i=E.appConfig;let m;const M=document.location.search.substring(1);m=(0,a.parseQueryString)(M).get("file")??c.AppOptions.get("defaultUrl"),ae(m);const k=document.createElement("input");k.id=i.openFileInputName,k.className="fileInput",k.setAttribute("type","file"),k.oncontextmenu=a.noContextMenuHandler,document.body.appendChild(k),!window.File||!window.FileReader||!window.FileList||!window.Blob?(i.toolbar.openFile.hidden=!0,i.secondaryToolbar.openFileButton.hidden=!0):k.value=null,k.addEventListener("change",function(F){const x=F.target.files;!x||x.length===0||E.eventBus.dispatch("fileinputchange",{source:this,fileInput:F.target})}),i.mainContainer.addEventListener("dragover",function(F){F.preventDefault(),F.dataTransfer.dropEffect="move"}),i.mainContainer.addEventListener("drop",function(F){F.preventDefault();const x=F.dataTransfer.files;!x||x.length===0||E.eventBus.dispatch("fileinputchange",{source:this,fileInput:F.dataTransfer})}),E.supportsDocumentFonts||(c.AppOptions.set("disableFontFace",!0),E.l10n.get("web_fonts_disabled").then(F=>{console.warn(F)})),E.supportsPrinting||(i.toolbar.print.classList.add("hidden"),i.secondaryToolbar.printButton.classList.add("hidden")),E.supportsFullscreen||(i.toolbar.presentationModeButton.classList.add("hidden"),i.secondaryToolbar.presentationModeButton.classList.add("hidden")),E.supportsIntegratedFind&&i.toolbar.viewFind.classList.add("hidden"),i.mainContainer.addEventListener("transitionend",function(F){F.target===this&&E.eventBus.dispatch("resize",{source:this})},!0);try{me(m)}catch(F){E.l10n.get("loading_error").then(x=>{E._documentError(x,F)})}}function me(i){i?E.open(i):E._hideViewBookmark()}function _e(){const{appConfig:i}=E;!i||i.viewerContainer.classList.remove(j)}function we({pageNumber:i,timestamp:m,error:M}){if(i===E.page&&E.toolbar.updateLoadingIndicatorState(!1),E.pdfSidebar.isThumbnailViewVisible){const R=E.pdfViewer.getPageView(i-1),k=E.pdfThumbnailViewer.getThumbnail(i-1);R&&k&&k.setImage(R)}M&&E.l10n.get("rendering_error").then(R=>{E._otherError(R,M)}),E.externalServices.reportTelemetry({type:"pageInfo",timestamp:m}),E.pdfDocument.getStats().then(function(R){E.externalServices.reportTelemetry({type:"documentStats",stats:R})})}function Pe({mode:i}){let m;switch(i){case"thumbs":m=a.SidebarView.THUMBS;break;case"bookmarks":case"outline":m=a.SidebarView.OUTLINE;break;case"attachments":m=a.SidebarView.ATTACHMENTS;break;case"layers":m=a.SidebarView.LAYERS;break;case"none":m=a.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+i);return}E.pdfSidebar.switchView(m,!0)}function N(i){switch(i.action){case"GoToPage":E.appConfig.toolbar.pageNumber.select();break;case"Find":E.supportsIntegratedFind||E.findBar.toggle();break;case"Print":E.triggerPrinting();break;case"SaveAs":ye();break}}function B(i){E.pdfViewer.presentationModeState=i.state}function U(i){E.pdfRenderingQueue.isThumbnailViewEnabled=E.pdfSidebar.isThumbnailViewVisible,E.isInitialViewSet&&E.store?.set("sidebarView",i.view).catch(()=>{})}function O(i){const m=i.location;E.isInitialViewSet&&E.store?.setMultiple({page:m.pageNumber,zoom:m.scale,scrollLeft:m.left,scrollTop:m.top,rotation:m.rotation}).catch(()=>{});const M=E.pdfLinkService.getAnchorUrl(m.pdfOpenParams);E.appConfig.toolbar.viewBookmark.href=M,E.appConfig.secondaryToolbar.viewBookmarkButton.href=M;const k=E.pdfViewer.getPageView(E.page-1)?.renderingState!==d.RenderingStates.FINISHED;E.toolbar.updateLoadingIndicatorState(k)}function G(i){E.isInitialViewSet&&E.store?.set("scrollMode",i.mode).catch(()=>{})}function W(i){E.isInitialViewSet&&E.store?.set("spreadMode",i.mode).catch(()=>{})}function Q(){const{pdfDocument:i,pdfViewer:m}=E;if(!i)return;const M=m.currentScaleValue;(M==="auto"||M==="page-fit"||M==="page-width")&&(m.currentScaleValue=M),m.update()}function J(i){const m=i.hash;!m||(E.isInitialViewSet?E.pdfHistory?.popStateInProgress||E.pdfLinkService.setHash(m):E.initialBookmark=m)}let te,ie;te=function(i){if(E.pdfViewer?.isInPresentationMode)return;const m=i.fileInput.files[0];if(c.compatibilityParams.disableCreateObjectURL){E.setTitleUsingUrl(m.name);const M=new FileReader;M.onload=function(k){const F=k.target.result;E.open(new Uint8Array(F))},M.readAsArrayBuffer(m)}else{let M=URL.createObjectURL(m);m.name&&(M={url:M,originalUrl:m.name}),E.open(M)}},ie=function(i){const m=E.appConfig.openFileInputName;document.getElementById(m).click()};function de(){E.requestPresentationMode()}function ge(){E.triggerPrinting()}function Me(){E.downloadOrSave({sourceEventType:"download"})}function ye(){E.downloadOrSave({sourceEventType:"save"})}function ve(){E.pdfDocument&&(E.page=1)}function Ee(){E.pdfDocument&&(E.page=E.pagesCount)}function Oe(){E.pdfViewer.nextPage()}function Re(){E.pdfViewer.previousPage()}function le(){E.zoomIn()}function ne(){E.zoomOut()}function re(){E.zoomReset()}function ue(i){const m=E.pdfViewer;i.value!==""&&E.pdfLinkService.goToPage(i.value),i.value!==m.currentPageNumber.toString()&&i.value!==m.currentPageLabel&&E.toolbar.setPageNumber(m.currentPageNumber,m.currentPageLabel)}function be(i){E.pdfViewer.currentScaleValue=i.value}function Le(){E.rotatePages(90)}function Ce(){E.rotatePages(-90)}function Ve(i){E.pdfViewer.optionalContentConfigPromise=i.promise}function Se(i){E.pdfViewer.scrollMode=i.mode}function ke(i){E.pdfViewer.spreadMode=i.mode}function Fe(){E.pdfDocumentProperties.open()}function xe(i){E.eventBus.dispatch("find",{source:i.source,type:"",query:i.query,phraseSearch:i.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function Ae({matchesCount:i}){E.supportsIntegratedFind?E.externalServices.updateFindMatchesCount(i):E.findBar.updateResultsCount(i)}function Ue({state:i,previous:m,matchesCount:M,rawQuery:R}){E.supportsIntegratedFind?E.externalServices.updateFindControlState({result:i,findPrevious:m,matchesCount:M,rawQuery:R}):E.findBar.updateUIState(i,m,M)}function $e(i){E.toolbar.setPageScale(i.presetValue,i.scale),E.pdfViewer.update()}function Xe(i){E.pdfThumbnailViewer.pagesRotation=i.pagesRotation,E.forceRendering(),E.pdfViewer.currentPageNumber=i.pageNumber}function Ke({pageNumber:i,pageLabel:m}){E.toolbar.setPageNumber(i,m),E.secondaryToolbar.setPageNumber(i),E.pdfSidebar.isThumbnailViewVisible&&E.pdfThumbnailViewer.scrollThumbnailIntoView(i)}function Ze(i){document.visibilityState==="visible"&&Qe()}let Ne=null;function Qe(){Ne&&clearTimeout(Ne),Ne=setTimeout(function(){Ne=null},H)}function Ye(i){const{pdfViewer:m,supportedMouseWheelZoomModifierKeys:M}=E;if(!m.isInPresentationMode)if(i.ctrlKey&&M.ctrlKey||i.metaKey&&M.metaKey){if(i.preventDefault(),Ne||document.visibilityState==="hidden")return;const R=m.currentScale,k=(0,a.normalizeWheelEventDirection)(i);let F=0;if(i.deltaMode===WheelEvent.DOM_DELTA_LINE||i.deltaMode===WheelEvent.DOM_DELTA_PAGE)Math.abs(k)>=1?F=Math.sign(k):F=E.accumulateWheelTicks(k);else{const $=30;F=E.accumulateWheelTicks(k/$)}F<0?E.zoomOut(-F):F>0&&E.zoomIn(F);const x=m.currentScale;if(R!==x){const $=x/R-1,Z=m.container.getBoundingClientRect(),Y=i.clientX-Z.left,se=i.clientY-Z.top;m.container.scrollLeft+=Y*$,m.container.scrollTop+=se*$}}else Qe()}function qe(i){i.touches.length>1&&i.preventDefault()}function Je(i){if(!E.secondaryToolbar.isOpen)return;const m=E.appConfig;(E.pdfViewer.containsElement(i.target)||m.toolbar.container.contains(i.target)&&i.target!==m.secondaryToolbar.toggleButton)&&E.secondaryToolbar.close()}function et(i){if(E.overlayManager.active)return;const{eventBus:m,pdfViewer:M}=E,R=M.isInPresentationMode;let k=!1,F=!1;const x=(i.ctrlKey?1:0)|(i.altKey?2:0)|(i.shiftKey?4:0)|(i.metaKey?8:0);if(x===1||x===8||x===5||x===12)switch(i.keyCode){case 70:!E.supportsIntegratedFind&&!i.shiftKey&&(E.findBar.open(),k=!0);break;case 71:if(!E.supportsIntegratedFind){const{state:Y}=E.findController;if(Y){const se=Object.assign(Object.create(null),Y,{source:window,type:"again",findPrevious:x===5||x===12});m.dispatch("find",se)}k=!0}break;case 61:case 107:case 187:case 171:R||E.zoomIn(),k=!0;break;case 173:case 109:case 189:R||E.zoomOut(),k=!0;break;case 48:case 96:R||(setTimeout(function(){E.zoomReset()}),k=!1);break;case 38:(R||E.page>1)&&(E.page=1,k=!0,F=!0);break;case 40:(R||E.page<E.pagesCount)&&(E.page=E.pagesCount,k=!0,F=!0);break}if(x===1||x===8)switch(i.keyCode){case 83:m.dispatch("download",{source:window}),k=!0;break;case 79:m.dispatch("openfile",{source:window}),k=!0;break}if(x===3||x===10)switch(i.keyCode){case 80:E.requestPresentationMode(),k=!0;break;case 71:E.appConfig.toolbar.pageNumber.select(),k=!0;break}if(k){F&&!R&&M.focus(),i.preventDefault();return}const $=(0,a.getActiveOrFocusedElement)(),Z=$?.tagName.toUpperCase();if(!((Z==="INPUT"||Z==="TEXTAREA"||Z==="SELECT"||$?.isContentEditable)&&i.keyCode!==27)){if(x===0){let Y=0,se=!1;switch(i.keyCode){case 38:case 33:M.isVerticalScrollbarEnabled&&(se=!0),Y=-1;break;case 8:R||(se=!0),Y=-1;break;case 37:M.isHorizontalScrollbarEnabled&&(se=!0);case 75:case 80:Y=-1;break;case 27:E.secondaryToolbar.isOpen&&(E.secondaryToolbar.close(),k=!0),!E.supportsIntegratedFind&&E.findBar.opened&&(E.findBar.close(),k=!0);break;case 40:case 34:M.isVerticalScrollbarEnabled&&(se=!0),Y=1;break;case 13:case 32:R||(se=!0),Y=1;break;case 39:M.isHorizontalScrollbarEnabled&&(se=!0);case 74:case 78:Y=1;break;case 36:(R||E.page>1)&&(E.page=1,k=!0,F=!0);break;case 35:(R||E.page<E.pagesCount)&&(E.page=E.pagesCount,k=!0,F=!0);break;case 83:E.pdfCursorTools.switchTool(b.CursorTool.SELECT);break;case 72:E.pdfCursorTools.switchTool(b.CursorTool.HAND);break;case 82:E.rotatePages(90);break;case 115:E.pdfSidebar.toggle();break}Y!==0&&(!se||M.currentScaleValue==="page-fit")&&(Y>0?M.nextPage():M.previousPage(),k=!0)}if(x===4)switch(i.keyCode){case 13:case 32:if(!R&&M.currentScaleValue!=="page-fit")break;M.previousPage(),k=!0;break;case 82:E.rotatePages(-90);break}!k&&!R&&(i.keyCode>=33&&i.keyCode<=40||i.keyCode===32&&Z!=="BUTTON")&&(F=!0),F&&!M.containsElement($)&&M.focus(),k&&i.preventDefault()}}function tt(i){return i.preventDefault(),i.returnValue="",!1}const We={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};u.PDFPrintServiceFactory=We},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.animationStarted=u.WaitOnType=u.VERTICAL_PADDING=u.UNKNOWN_SCALE=u.TextLayerMode=u.SpreadMode=u.SidebarView=u.ScrollMode=u.SCROLLBAR_PADDING=u.RendererType=u.ProgressBar=u.PresentationModeState=u.MIN_SCALE=u.MAX_SCALE=u.MAX_AUTO_SCALE=u.EventBus=u.DEFAULT_SCALE_VALUE=u.DEFAULT_SCALE_DELTA=u.DEFAULT_SCALE=u.AutomationEventBus=u.AutoPrintRegExp=void 0,u.apiPageLayoutToViewerModes=we,u.apiPageModeToSidebarView=Pe,u.approximateFraction=C,u.backtrackBeforeAllVisibleElements=D,u.binarySearchFirstItem=T,u.getActiveOrFocusedElement=_e,u.getOutputScale=t,u.getPageSizeInches=I,u.getVisibleElements=A,u.isPortraitOrientation=ee,u.isValidRotation=X,u.isValidScrollMode=K,u.isValidSpreadMode=q,u.noContextMenuHandler=H,u.normalizeWheelEventDelta=L,u.normalizeWheelEventDirection=j,u.parseQueryString=V,u.roundToDivide=v,u.scrollIntoView=f,u.waitOnEventOrTimeout=ae,u.watchScroll=S;const P="auto";u.DEFAULT_SCALE_VALUE=P;const a=1;u.DEFAULT_SCALE=a;const c=1.1;u.DEFAULT_SCALE_DELTA=c;const w=.1;u.MIN_SCALE=w;const b=10;u.MAX_SCALE=b;const d=0;u.UNKNOWN_SCALE=d;const e=1.25;u.MAX_AUTO_SCALE=e;const n=40;u.SCROLLBAR_PADDING=n;const o=5;u.VERTICAL_PADDING=o;const l="--loadingBar-end-offset",s={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};u.PresentationModeState=s;const h={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};u.SidebarView=h;const r={CANVAS:"canvas",SVG:"svg"};u.RendererType=r;const _={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};u.TextLayerMode=_;const p={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};u.ScrollMode=p;const g={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};u.SpreadMode=g;const y=/\bprint\s*\(/;u.AutoPrintRegExp=y;function t(N){const B=window.devicePixelRatio||1,U=N.webkitBackingStorePixelRatio||N.mozBackingStorePixelRatio||N.backingStorePixelRatio||1,O=B/U;return{sx:O,sy:O,scaled:O!==1}}function f(N,B,U=!1){let O=N.offsetParent;if(!O){console.error("offsetParent is not set -- cannot scroll");return}let G=N.offsetTop+N.clientTop,W=N.offsetLeft+N.clientLeft;for(;O.clientHeight===O.scrollHeight&&O.clientWidth===O.scrollWidth||U&&(O.classList.contains("markedContent")||getComputedStyle(O).overflow==="hidden");)if(G+=O.offsetTop,W+=O.offsetLeft,O=O.offsetParent,!O)return;B&&(B.top!==void 0&&(G+=B.top),B.left!==void 0&&(W+=B.left,O.scrollLeft=W)),O.scrollTop=G}function S(N,B){const U=function(W){G||(G=window.requestAnimationFrame(function(){G=null;const J=N.scrollLeft,te=O.lastX;J!==te&&(O.right=J>te),O.lastX=J;const ie=N.scrollTop,de=O.lastY;ie!==de&&(O.down=ie>de),O.lastY=ie,B(O)}))},O={right:!0,down:!0,lastX:N.scrollLeft,lastY:N.scrollTop,_eventHandler:U};let G=null;return N.addEventListener("scroll",U,!0),O}function V(N){const B=new Map;for(const U of N.split("&")){const O=U.split("="),G=O[0].toLowerCase(),W=O.length>1?O[1]:"";B.set(decodeURIComponent(G),decodeURIComponent(W))}return B}function T(N,B){let U=0,O=N.length-1;if(O<0||!B(N[O]))return N.length;if(B(N[U]))return U;for(;U<O;){const G=U+O>>1,W=N[G];B(W)?O=G:U=G+1}return U}function C(N){if(Math.floor(N)===N)return[N,1];const B=1/N,U=8;if(B>U)return[1,U];if(Math.floor(B)===B)return[1,B];const O=N>1?B:N;let G=0,W=1,Q=1,J=1;for(;;){const ie=G+Q,de=W+J;if(de>U)break;O<=ie/de?(Q=ie,J=de):(G=ie,W=de)}let te;return O-G/W<Q/J-O?te=O===N?[G,W]:[W,G]:te=O===N?[Q,J]:[J,Q],te}function v(N,B){const U=N%B;return U===0?N:Math.round(N-U+B)}function I({view:N,userUnit:B,rotate:U}){const[O,G,W,Q]=N,J=U%180!=0,te=(W-O)/72*B,ie=(Q-G)/72*B;return{width:J?ie:te,height:J?te:ie}}function D(N,B,U){if(N<2)return N;let O=B[N].div,G=O.offsetTop+O.clientTop;G>=U&&(O=B[N-1].div,G=O.offsetTop+O.clientTop);for(let W=N-2;W>=0&&(O=B[W].div,!(O.offsetTop+O.clientTop+O.clientHeight<=G));--W)N=W;return N}function A({scrollEl:N,views:B,sortByVisibility:U=!1,horizontal:O=!1,rtl:G=!1}){const W=N.scrollTop,Q=W+N.clientHeight,J=N.scrollLeft,te=J+N.clientWidth;function ie(le){const ne=le.div;return ne.offsetTop+ne.clientTop+ne.clientHeight>W}function de(le){const ne=le.div,re=ne.offsetLeft+ne.clientLeft,ue=re+ne.clientWidth;return G?re<te:ue>J}const ge=[],Me=new Set,ye=B.length;let ve=T(B,O?de:ie);ve>0&&ve<ye&&!O&&(ve=D(ve,B,W));let Ee=O?te:-1;for(let le=ve;le<ye;le++){const ne=B[le],re=ne.div,ue=re.offsetLeft+re.clientLeft,be=re.offsetTop+re.clientTop,Le=re.clientWidth,Ce=re.clientHeight,Ve=ue+Le,Se=be+Ce;if(Ee===-1)Se>=Q&&(Ee=Se);else if((O?ue:be)>Ee)break;if(Se<=W||be>=Q||Ve<=J||ue>=te)continue;const ke=Math.max(0,W-be)+Math.max(0,Se-Q),Fe=Math.max(0,J-ue)+Math.max(0,Ve-te),xe=(Ce-ke)/Ce,Ae=(Le-Fe)/Le,Ue=xe*Ae*100|0;ge.push({id:ne.id,x:ue,y:be,view:ne,percent:Ue,widthPercent:Ae*100|0}),Me.add(ne.id)}const Oe=ge[0],Re=ge[ge.length-1];return U&&ge.sort(function(le,ne){const re=le.percent-ne.percent;return Math.abs(re)>.001?-re:le.id-ne.id}),{first:Oe,last:Re,views:ge,ids:Me}}function H(N){N.preventDefault()}function j(N){let B=Math.hypot(N.deltaX,N.deltaY);const U=Math.atan2(N.deltaY,N.deltaX);return-.25*Math.PI<U&&U<.75*Math.PI&&(B=-B),B}function L(N){let B=j(N);const U=0,O=1,G=30,W=30;return N.deltaMode===U?B/=G*W:N.deltaMode===O&&(B/=W),B}function X(N){return Number.isInteger(N)&&N%90==0}function K(N){return Number.isInteger(N)&&Object.values(p).includes(N)&&N!==p.UNKNOWN}function q(N){return Number.isInteger(N)&&Object.values(g).includes(N)&&N!==g.UNKNOWN}function ee(N){return N.width<=N.height}const E={EVENT:"event",TIMEOUT:"timeout"};u.WaitOnType=E;function ae({target:N,name:B,delay:U=0}){return new Promise(function(O,G){if(typeof N!="object"||!(B&&typeof B=="string")||!(Number.isInteger(U)&&U>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function W(ie){N instanceof he?N._off(B,Q):N.removeEventListener(B,Q),te&&clearTimeout(te),O(ie)}const Q=W.bind(null,E.EVENT);N instanceof he?N._on(B,Q):N.addEventListener(B,Q);const J=W.bind(null,E.TIMEOUT),te=setTimeout(J,U)})}const ce=new Promise(function(N){window.requestAnimationFrame(N)});u.animationStarted=ce;class he{constructor(){this._listeners=Object.create(null)}on(B,U,O=null){this._on(B,U,{external:!0,once:O?.once})}off(B,U,O=null){this._off(B,U,{external:!0,once:O?.once})}dispatch(B,U){const O=this._listeners[B];if(!O||O.length===0)return;let G;for(const{listener:W,external:Q,once:J}of O.slice(0)){if(J&&this._off(B,W),Q){(G||=[]).push(W);continue}W(U)}if(G){for(const W of G)W(U);G=null}}_on(B,U,O=null){(this._listeners[B]||=[]).push({listener:U,external:O?.external===!0,once:O?.once===!0})}_off(B,U,O=null){const G=this._listeners[B];if(!!G){for(let W=0,Q=G.length;W<Q;W++)if(G[W].listener===U){G.splice(W,1);return}}}}u.EventBus=he;class fe extends he{dispatch(B,U){throw new Error("Not implemented: AutomationEventBus.dispatch")}}u.AutomationEventBus=fe;function Ie(N,B,U){return Math.min(Math.max(N,B),U)}class me{constructor(B,{height:U,width:O,units:G}={}){this.visible=!0,this.div=document.querySelector(B+" .progress"),this.bar=this.div.parentNode,this.height=U||100,this.width=O||100,this.units=G||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate"),this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");const B=this.width*this._percent/100;this.div.style.width=B+this.units}get percent(){return this._percent}set percent(B){this._indeterminate=isNaN(B),this._percent=Ie(B,0,100),this._updateBar()}setWidth(B){if(!B)return;const O=B.parentNode.offsetWidth-B.offsetWidth;O>0&&document.documentElement.style.setProperty(l,`${O}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}u.ProgressBar=me;function _e(){let N=document,B=N.activeElement||N.querySelector(":focus");for(;B?.shadowRoot;)N=B.shadowRoot,B=N.activeElement||N.querySelector(":focus");return B}function we(N){let B=p.VERTICAL,U=g.NONE;switch(N){case"SinglePage":B=p.PAGE;break;case"OneColumn":break;case"TwoPageLeft":B=p.PAGE;case"TwoColumnLeft":U=g.ODD;break;case"TwoPageRight":B=p.PAGE;case"TwoColumnRight":U=g.EVEN;break}return{scrollMode:B,spreadMode:U}}function Pe(N){switch(N){case"UseNone":return h.NONE;case"UseThumbs":return h.THUMBS;case"UseOutlines":return h.OUTLINE;case"UseAttachments":return h.ATTACHMENTS;case"UseOC":return h.LAYERS}return h.NONE}},z=>{let u;typeof window!="undefined"&&window["pdfjs-dist/build/pdf"]?u=window["pdfjs-dist/build/pdf"]:u=require("../build/pdf.js"),z.exports=u},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFCursorTools=u.CursorTool=void 0;var a=P(6),c=P(3);const w={SELECT:0,HAND:1,ZOOM:2};u.CursorTool=w;class b{constructor({container:e,eventBus:n,cursorToolOnLoad:o=w.SELECT}){this.container=e,this.eventBus=n,this.active=w.SELECT,this.activeBeforePresentationMode=null,this.handTool=new a.GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then(()=>{this.switchTool(o)})}get activeTool(){return this.active}switchTool(e){if(this.activeBeforePresentationMode!==null||e===this.active)return;const n=()=>{switch(this.active){case w.SELECT:break;case w.HAND:this.handTool.deactivate();break;case w.ZOOM:}};switch(e){case w.SELECT:n();break;case w.HAND:n(),this.handTool.activate();break;case w.ZOOM:default:console.error(`switchTool: "${e}" is an unsupported value.`);return}this.active=e,this._dispatchEvent()}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",e=>{this.switchTool(e.tool)}),this.eventBus._on("presentationmodechanged",e=>{switch(e.state){case c.PresentationModeState.FULLSCREEN:{const n=this.active;this.switchTool(w.SELECT),this.activeBeforePresentationMode=n;break}case c.PresentationModeState.NORMAL:{const n=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null,this.switchTool(n);break}}})}}u.PDFCursorTools=b},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GrabToPan=P;function P(c){this.element=c.element,this.document=c.element.ownerDocument,typeof c.ignoreTarget=="function"&&(this.ignoreTarget=c.ignoreTarget),this.onActiveChanged=c.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this);const w=this.overlay=document.createElement("div");w.className="grab-to-pan-grabbing"}P.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(w){return w.matches("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(w){if(w.button!==0||this.ignoreTarget(w.target))return;if(w.originalTarget)try{w.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=w.clientX,this.clientYStart=w.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),w.preventDefault(),w.stopPropagation();const b=document.activeElement;b&&!b.contains(w.target)&&b.blur()},_onmousemove:function(w){if(this.element.removeEventListener("scroll",this._endPan,!0),a(w)){this._endPan();return}const b=w.clientX-this.clientXStart,d=w.clientY-this.clientYStart,e=this.scrollTopStart-d,n=this.scrollLeftStart-b;this.element.scrollTo?this.element.scrollTo({top:e,left:n,behavior:"instant"}):(this.element.scrollTop=e,this.element.scrollLeft=n),this.overlay.parentNode||document.body.appendChild(this.overlay)},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}};function a(c){if("buttons"in c)return!(c.buttons&1);const w=window.chrome,b=w&&(w.webstore||w.app),d=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);return b||d?c.which===0:!1}},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RenderingStates=u.PDFRenderingQueue=void 0;var a=P(4);const c=3e4,w={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};u.RenderingStates=w;class b{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),c)))}getHighestPriority(e,n,o,l=!1){const s=e.views,h=s.length;if(h===0)return null;for(let y=0;y<h;y++){const t=s[y].view;if(!this.isViewFinished(t))return t}const r=e.first.id,_=e.last.id;if(_-r+1>h){const y=e.ids;for(let t=1,f=_-r;t<f;t++){const S=o?r+t:_-t;if(y.has(S))continue;const V=n[S-1];if(!this.isViewFinished(V))return V}}let p=o?_:r-2,g=n[p];return g&&!this.isViewFinished(g)||l&&(p+=o?1:-1,g=n[p],g&&!this.isViewFinished(g))?g:null}isViewFinished(e){return e.renderingState===w.FINISHED}renderView(e){switch(e.renderingState){case w.FINISHED:return!1;case w.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case w.RUNNING:this.highestPriorityPage=e.renderingId;break;case w.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(n=>{n instanceof a.RenderingCancelledException||console.error(`renderView: "${n}"`)});break}return!0}}u.PDFRenderingQueue=b},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OverlayManager=void 0;class P{constructor(){this._overlays={},this._active=null,this._keyDownBound=this._keyDown.bind(this)}get active(){return this._active}async register(c,w,b=null,d=!1){let e;if(!c||!w||!(e=w.parentNode))throw new Error("Not enough parameters.");if(this._overlays[c])throw new Error("The overlay is already registered.");this._overlays[c]={element:w,container:e,callerCloseMethod:b,canForceClose:d}}async unregister(c){if(this._overlays[c]){if(this._active===c)throw new Error("The overlay cannot be removed while it is active.")}else throw new Error("The overlay does not exist.");delete this._overlays[c]}async open(c){if(this._overlays[c]){if(this._active)if(this._overlays[c].canForceClose)this._closeThroughCaller();else throw this._active===c?new Error("The overlay is already active."):new Error("Another overlay is currently active.")}else throw new Error("The overlay does not exist.");this._active=c,this._overlays[this._active].element.classList.remove("hidden"),this._overlays[this._active].container.classList.remove("hidden"),window.addEventListener("keydown",this._keyDownBound)}async close(c){if(this._overlays[c])if(this._active){if(this._active!==c)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");this._overlays[this._active].container.classList.add("hidden"),this._overlays[this._active].element.classList.add("hidden"),this._active=null,window.removeEventListener("keydown",this._keyDownBound)}_keyDown(c){this._active&&c.keyCode===27&&(this._closeThroughCaller(),c.preventDefault())}_closeThroughCaller(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod(),this._active&&this.close(this._active)}}u.OverlayManager=P},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PasswordPrompt=void 0;var a=P(4);class c{constructor(b,d,e,n=!1){this.overlayName=b.overlayName,this.container=b.container,this.label=b.label,this.input=b.input,this.submitButton=b.submitButton,this.cancelButton=b.cancelButton,this.overlayManager=d,this.l10n=e,this._isViewerEmbedded=n,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",o=>{o.keyCode===13&&this.verify()}),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}async open(){await this.overlayManager.open(this.overlayName);const b=this.reason===a.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||b)&&this.input.focus(),this.label.textContent=await this.l10n.get(`password_${b?"invalid":"label"}`)}close(){this.overlayManager.close(this.overlayName).then(()=>{this.input.value=""})}verify(){const b=this.input.value;b?.length>0&&(this.close(),this.updateCallback(b))}setUpdateCallback(b,d){this.updateCallback=b,this.reason=d}}u.PasswordPrompt=c},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFAttachmentViewer=void 0;var a=P(4),c=P(11);class w extends c.BaseTreeViewer{constructor(d){super(d);this.downloadManager=d.downloadManager,this.eventBus._on("fileattachmentannotation",this._appendAttachment.bind(this))}reset(d=!1){super.reset(),this._attachments=null,d||(this._renderedCapability=(0,a.createPromiseCapability)()),this._pendingDispatchEvent&&clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null}_dispatchEvent(d){if(this._renderedCapability.resolve(),this._pendingDispatchEvent&&(clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null),d===0){this._pendingDispatchEvent=setTimeout(()=>{this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:0}),this._pendingDispatchEvent=null});return}this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:d})}_bindLink(d,{content:e,filename:n}){d.onclick=()=>(this.downloadManager.openOrDownloadData(d,e,n),!1)}render({attachments:d,keepRenderedCapability:e=!1}){if(this._attachments&&this.reset(e),this._attachments=d||null,!d){this._dispatchEvent(0);return}const n=Object.keys(d).sort(function(s,h){return s.toLowerCase().localeCompare(h.toLowerCase())}),o=document.createDocumentFragment();let l=0;for(const s of n){const h=d[s],r=h.content,_=(0,a.getFilenameFromUrl)(h.filename),p=document.createElement("div");p.className="treeItem";const g=document.createElement("a");this._bindLink(g,{content:r,filename:_}),g.textContent=this._normalizeTextContent(_),p.appendChild(g),o.appendChild(p),l++}this._finishRendering(o,l)}_appendAttachment({id:d,filename:e,content:n}){const o=this._renderedCapability.promise;o.then(()=>{if(o!==this._renderedCapability.promise)return;let l=this._attachments;if(!l)l=Object.create(null);else for(const s in l)if(d===s)return;l[d]={filename:e,content:n},this.render({attachments:l,keepRenderedCapability:!0})})}}u.PDFAttachmentViewer=w},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseTreeViewer=void 0;var a=P(4);const c=-100,w="selected";class b{constructor(e){if(this.constructor===b)throw new Error("Cannot initialize BaseTreeViewer.");this.container=e.container,this.eventBus=e.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,n){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,a.removeNullCharacters)(e)||"\u2013"}_addToggleButton(e,n=!1){const o=document.createElement("div");o.className="treeItemToggler",n&&o.classList.add("treeItemsHidden"),o.onclick=l=>{if(l.stopPropagation(),o.classList.toggle("treeItemsHidden"),l.shiftKey){const s=!o.classList.contains("treeItemsHidden");this._toggleTreeItem(e,s)}},e.insertBefore(o,e.firstChild)}_toggleTreeItem(e,n=!1){this._lastToggleIsShow=n;for(const o of e.querySelectorAll(".treeItemToggler"))o.classList.toggle("treeItemsHidden",!n)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,n,o=!1){o&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")),this.container.appendChild(e),this._dispatchEvent(n)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(e=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(w),this._currentTreeItem=null),e&&(e.classList.add(w),this._currentTreeItem=e)}_scrollToCurrentTreeItem(e){if(!e)return;let n=e.parentNode;for(;n&&n!==this.container;)n.classList.contains("treeItem")&&n.firstElementChild?.classList.remove("treeItemsHidden"),n=n.parentNode;this._updateCurrentTreeItem(e),this.container.scrollTo(e.offsetLeft,e.offsetTop+c)}}u.BaseTreeViewer=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDocumentProperties=void 0;var a=P(4),c=P(3);const w="-",b=["en-us","en-lr","my"],d={"8.5x11":"Letter","8.5x14":"Legal"},e={"297x420":"A3","210x297":"A4"};function n(l,s,h){const r=s?l.width:l.height,_=s?l.height:l.width;return h[`${r}x${_}`]}class o{constructor({overlayName:s,fields:h,container:r,closeButton:_},p,g,y){this.overlayName=s,this.fields=h,this.container=r,this.overlayManager=p,this.l10n=y,this._reset(),_.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this)),g._on("pagechanging",t=>{this._currentPageNumber=t.pageNumber}),g._on("rotationchanging",t=>{this._pagesRotation=t.pagesRotation}),this._isNonMetricLocale=!0,y.getLanguage().then(t=>{this._isNonMetricLocale=b.includes(t)})}async open(){const s=I=>{Object.defineProperty(this,"fieldData",{value:Object.freeze(I),writable:!1,enumerable:!0,configurable:!0})};await Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]);const h=this._currentPageNumber,r=this._pagesRotation;if(this.fieldData&&h===this.fieldData._currentPageNumber&&r===this.fieldData._pagesRotation){this._updateUI();return}const{info:_,contentDispositionFilename:p,contentLength:g}=await this.pdfDocument.getMetadata(),[y,t,f,S,V,T]=await Promise.all([p||(0,a.getPdfFilenameFromUrl)(this.url),this._parseFileSize(g),this._parseDate(_.CreationDate),this._parseDate(_.ModDate),this.pdfDocument.getPage(h).then(I=>this._parsePageSize((0,c.getPageSizeInches)(I),r)),this._parseLinearization(_.IsLinearized)]);s({fileName:y,fileSize:t,title:_.Title,author:_.Author,subject:_.Subject,keywords:_.Keywords,creationDate:f,modificationDate:S,creator:_.Creator,producer:_.Producer,version:_.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:V,linearized:T,_currentPageNumber:h,_pagesRotation:r}),this._updateUI();const{length:C}=await this.pdfDocument.getDownloadInfo();if(g===C)return;const v=Object.assign(Object.create(null),this.fieldData);v.fileSize=await this._parseFileSize(C),s(v),this._updateUI()}close(){this.overlayManager.close(this.overlayName)}setDocument(s,h=null){this.pdfDocument&&(this._reset(),this._updateUI(!0)),!!s&&(this.pdfDocument=s,this.url=h,this._dataAvailableCapability.resolve())}_reset(){this.pdfDocument=null,this.url=null,delete this.fieldData,this._dataAvailableCapability=(0,a.createPromiseCapability)(),this._currentPageNumber=1,this._pagesRotation=0}_updateUI(s=!1){if(s||!this.fieldData){for(const h in this.fields)this.fields[h].textContent=w;return}if(this.overlayManager.active===this.overlayName)for(const h in this.fields){const r=this.fieldData[h];this.fields[h].textContent=r||r===0?r:w}}async _parseFileSize(s=0){const h=s/1024,r=h/1024;if(!!h)return this.l10n.get(`document_properties_${r>=1?"mb":"kb"}`,{size_mb:r>=1&&(+r.toPrecision(3)).toLocaleString(),size_kb:r<1&&(+h.toPrecision(3)).toLocaleString(),size_b:s.toLocaleString()})}async _parsePageSize(s,h){if(!s)return;h%180!=0&&(s={width:s.height,height:s.width});const r=(0,c.isPortraitOrientation)(s);let _={width:Math.round(s.width*100)/100,height:Math.round(s.height*100)/100},p={width:Math.round(s.width*25.4*10)/10,height:Math.round(s.height*25.4*10)/10},g=n(_,r,d)||n(p,r,e);if(!g&&!(Number.isInteger(p.width)&&Number.isInteger(p.height))){const T={width:s.width*25.4,height:s.height*25.4},C={width:Math.round(p.width),height:Math.round(p.height)};Math.abs(T.width-C.width)<.1&&Math.abs(T.height-C.height)<.1&&(g=n(C,r,e),g&&(_={width:Math.round(C.width/25.4*100)/100,height:Math.round(C.height/25.4*100)/100},p=C))}const[{width:y,height:t},f,S,V]=await Promise.all([this._isNonMetricLocale?_:p,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),g&&this.l10n.get(`document_properties_page_size_name_${g.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${r?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${S?"name_":""}string`,{width:y.toLocaleString(),height:t.toLocaleString(),unit:f,name:S,orientation:V})}async _parseDate(s){const h=a.PDFDateString.toDateObject(s);if(!!h)return this.l10n.get("document_properties_date_string",{date:h.toLocaleDateString(),time:h.toLocaleTimeString()})}_parseLinearization(s){return this.l10n.get(`document_properties_linearized_${s?"yes":"no"}`)}}u.PDFDocumentProperties=o},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFindBar=void 0;var a=P(14);const c=1e3;class w{constructor(d,e,n){this.opened=!1,this.bar=d.bar,this.toggleButton=d.toggleButton,this.findField=d.findField,this.highlightAll=d.highlightAllCheckbox,this.caseSensitive=d.caseSensitiveCheckbox,this.entireWord=d.entireWordCheckbox,this.findMsg=d.findMsg,this.findResultsCount=d.findResultsCount,this.findPreviousButton=d.findPreviousButton,this.findNextButton=d.findNextButton,this.eventBus=e,this.l10n=n,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",o=>{switch(o.keyCode){case 13:o.target===this.findField&&this.dispatchEvent("again",o.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.eventBus._on("resize",this._adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(d,e=!1){this.eventBus.dispatch("find",{source:this,type:d,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:e})}updateUIState(d,e,n){let o=Promise.resolve(""),l="";switch(d){case a.FindState.FOUND:break;case a.FindState.PENDING:l="pending";break;case a.FindState.NOT_FOUND:o=this.l10n.get("find_not_found"),l="notFound";break;case a.FindState.WRAPPED:o=this.l10n.get(`find_reached_${e?"top":"bottom"}`);break}this.findField.setAttribute("data-status",l),o.then(s=>{this.findMsg.textContent=s,this._adjustWidth()}),this.updateResultsCount(n)}updateResultsCount({current:d=0,total:e=0}={}){const n=c;let o=Promise.resolve("");if(e>0)if(e>n){let l="find_match_count_limit";o=this.l10n.get(l,{limit:n})}else{let l="find_match_count";o=this.l10n.get(l,{current:d,total:e})}o.then(l=>{this.findResultsCount.textContent=l,this.findResultsCount.classList.toggle("hidden",!e),this._adjustWidth()})}open(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.toggleButton.setAttribute("aria-expanded","true"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus(),this._adjustWidth()}close(){!this.opened||(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.toggleButton.setAttribute("aria-expanded","false"),this.bar.classList.add("hidden"),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}_adjustWidth(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");const d=this.bar.clientHeight,e=this.bar.firstElementChild.clientHeight;d>e&&this.bar.classList.add("wrapContainers")}}u.PDFFindBar=w},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFindController=u.FindState=void 0;var a=P(4),c=P(15),w=P(3);const b={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};u.FindState=b;const d=250,e=-50,n=-400,o={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"};let l=null;function s(_){if(!l){const y=Object.keys(o).join("");l=new RegExp(`[${y}]`,"g")}let p=null;return[_.replace(l,function(y,t){const f=o[y],S=f.length-y.length;return S!==0&&(p||=[]).push([t,S]),f}),p]}function h(_,p=null){if(!p)return _;let g=0;for(const[y,t]of p){const f=y+g;if(f>=_)break;if(f+t>_){g+=_-f;break}g+=t}return _-g}class r{constructor({linkService:p,eventBus:g}){this._linkService=p,this._eventBus=g,this._reset(),g._on("find",this._onFind.bind(this)),g._on("findbarclose",this._onFindBarClose.bind(this)),this.executeCommand=(y,t)=>{console.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');const f=Object.assign(Object.create(null),t,{type:y.substring("find".length)});this._onFind(f)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(p){this._pdfDocument&&this._reset(),!!p&&(this._pdfDocument=p,this._firstPageCapability.resolve())}_onFind(p){if(!p)return;const g=this._pdfDocument,{type:y}=p;(this._state===null||this._shouldDirtyMatch(p))&&(this._dirtyMatch=!0),this._state=p,y!=="highlightallchange"&&this._updateUIState(b.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||g&&this._pdfDocument!==g)return;this._extractText();const t=!this._highlightMatches,f=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),y?this._dirtyMatch?this._nextMatch():y==="again"?(this._nextMatch(),t&&this._state.highlightAll&&this._updateAllPages()):y==="highlightallchange"?(f?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch():this._findTimeout=setTimeout(()=>{this._nextMatch(),this._findTimeout=null},d)})}scrollMatchIntoView({element:p=null,selectedLeft:g=0,pageIndex:y=-1,matchIndex:t=-1}){if(!this._scrollMatches||!p)return;if(t===-1||t!==this._selected.matchIdx)return;if(y===-1||y!==this._selected.pageIdx)return;this._scrollMatches=!1;const f={top:e,left:g+n};(0,w.scrollIntoView)(p,f,!0)}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,a.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=s(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(p){if(p.query!==this._state.query)return!0;switch(p.type){case"again":const g=this._selected.pageIdx+1,y=this._linkService;return g>=1&&g<=y.pagesCount&&g!==y.page&&!y.isPageVisible(g);case"highlightallchange":return!1}return!0}_prepareMatches(p,g,y){function t(f){const S=p[f],V=p[f+1];if(f<p.length-1&&S.match===V.match)return S.skipped=!0,!0;for(let T=f-1;T>=0;T--){const C=p[T];if(!C.skipped){if(C.match+C.matchLength<S.match)break;if(C.match+C.matchLength>=S.match+S.matchLength)return S.skipped=!0,!0}}return!1}p.sort(function(f,S){return f.match===S.match?f.matchLength-S.matchLength:f.match-S.match});for(let f=0,S=p.length;f<S;f++)t(f)||(g.push(p[f].match),y.push(p[f].matchLength))}_isEntireWord(p,g,y){if(g>0){const f=p.charCodeAt(g),S=p.charCodeAt(g-1);if((0,c.getCharacterType)(f)===(0,c.getCharacterType)(S))return!1}const t=g+y-1;if(t<p.length-1){const f=p.charCodeAt(t),S=p.charCodeAt(t+1);if((0,c.getCharacterType)(f)===(0,c.getCharacterType)(S))return!1}return!0}_calculatePhraseMatch(p,g,y,t,f){const S=[],V=[],T=p.length;let C=-T;for(;C=y.indexOf(p,C+T),C!==-1;){if(f&&!this._isEntireWord(y,C,T))continue;const v=h(C,t),I=C+T-1,D=h(I,t)-v+1;S.push(v),V.push(D)}this._pageMatches[g]=S,this._pageMatchesLength[g]=V}_calculateWordMatch(p,g,y,t,f){const S=[],V=p.match(/\S+/g);for(let T=0,C=V.length;T<C;T++){const v=V[T],I=v.length;let D=-I;for(;D=y.indexOf(v,D+I),D!==-1;){if(f&&!this._isEntireWord(y,D,I))continue;const A=h(D,t),H=D+I-1,j=h(H,t)-A+1;S.push({match:A,matchLength:j,skipped:!1})}}this._pageMatchesLength[g]=[],this._pageMatches[g]=[],this._prepareMatches(S,this._pageMatches[g],this._pageMatchesLength[g])}_calculateMatch(p){let g=this._pageContents[p];const y=this._pageDiffs[p];let t=this._query;const{caseSensitive:f,entireWord:S,phraseSearch:V}=this._state;if(t.length===0)return;f||(g=g.toLowerCase(),t=t.toLowerCase()),V?this._calculatePhraseMatch(t,p,g,y,S):this._calculateWordMatch(t,p,g,y,S),this._state.highlightAll&&this._updatePage(p),this._resumePageIdx===p&&(this._resumePageIdx=null,this._nextPageMatch());const T=this._pageMatches[p].length;T>0&&(this._matchesCountTotal+=T,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let p=Promise.resolve();for(let g=0,y=this._linkService.pagesCount;g<y;g++){const t=(0,a.createPromiseCapability)();this._extractTextPromises[g]=t.promise,p=p.then(()=>this._pdfDocument.getPage(g+1).then(f=>f.getTextContent({normalizeWhitespace:!0})).then(f=>{const S=f.items,V=[];for(let T=0,C=S.length;T<C;T++)V.push(S[T].str);[this._pageContents[g],this._pageDiffs[g]]=s(V.join("")),t.resolve(g)},f=>{console.error(`Unable to get text content for page ${g+1}`,f),this._pageContents[g]="",this._pageDiffs[g]=null,t.resolve(g)}))}}_updatePage(p){this._scrollMatches&&this._selected.pageIdx===p&&(this._linkService.page=p+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:p})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const p=this._state.findPrevious,g=this._linkService.page-1,y=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=g,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let f=0;f<y;f++)this._pendingFindMatches.has(f)||(this._pendingFindMatches.add(f),this._extractTextPromises[f].then(S=>{this._pendingFindMatches.delete(S),this._calculateMatch(S)}))}if(this._query===""){this._updateUIState(b.FOUND);return}if(this._resumePageIdx)return;const t=this._offset;if(this._pagesToSearch=y,t.matchIdx!==null){const f=this._pageMatches[t.pageIdx].length;if(!p&&t.matchIdx+1<f||p&&t.matchIdx>0){t.matchIdx=p?t.matchIdx-1:t.matchIdx+1,this._updateMatch(!0);return}this._advanceOffsetPage(p)}this._nextPageMatch()}_matchesReady(p){const g=this._offset,y=p.length,t=this._state.findPrevious;return y?(g.matchIdx=t?y-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(t),g.wrapped&&(g.matchIdx=null,this._pagesToSearch<0)?(this._updateMatch(!1),!0):!1)}_nextPageMatch(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let p=null;do{const g=this._offset.pageIdx;if(p=this._pageMatches[g],!p){this._resumePageIdx=g;break}}while(!this._matchesReady(p))}_advanceOffsetPage(p){const g=this._offset,y=this._linkService.pagesCount;g.pageIdx=p?g.pageIdx-1:g.pageIdx+1,g.matchIdx=null,this._pagesToSearch--,(g.pageIdx>=y||g.pageIdx<0)&&(g.pageIdx=p?y-1:0,g.wrapped=!0)}_updateMatch(p=!1){let g=b.NOT_FOUND;const y=this._offset.wrapped;if(this._offset.wrapped=!1,p){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,g=y?b.WRAPPED:b.FOUND,t!==-1&&t!==this._selected.pageIdx&&this._updatePage(t)}this._updateUIState(g,this._state.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(p){const g=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||g&&this._pdfDocument!==g||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(b.FOUND),this._highlightMatches=!1,this._updateAllPages())})}_requestMatchesCount(){const{pageIdx:p,matchIdx:g}=this._selected;let y=0,t=this._matchesCountTotal;if(g!==-1){for(let f=0;f<p;f++)y+=this._pageMatches[f]?.length||0;y+=g+1}return(y<1||y>t)&&(y=t=0),{current:y,total:t}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(p,g=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:p,previous:g,matchesCount:this._requestMatchesCount(),rawQuery:this._state?.query??null})}}u.PDFFindController=r},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CharacterType=void 0,u.getCharacterType=h;const P={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};u.CharacterType=P;function a(r){return r<11904}function c(r){return(r&65408)==0}function w(r){return r>=97&&r<=122||r>=65&&r<=90}function b(r){return r>=48&&r<=57}function d(r){return r===32||r===9||r===13||r===10}function e(r){return r>=13312&&r<=40959||r>=63744&&r<=64255}function n(r){return r>=12448&&r<=12543}function o(r){return r>=12352&&r<=12447}function l(r){return r>=65376&&r<=65439}function s(r){return(r&65408)==3584}function h(r){return a(r)?c(r)?d(r)?P.SPACE:w(r)||b(r)||r===95?P.ALPHA_LETTER:P.PUNCT:s(r)?P.THAI_LETTER:r===160?P.SPACE:P.ALPHA_LETTER:e(r)?P.HAN_LETTER:n(r)?P.KATAKANA_LETTER:o(r)?P.HIRAGANA_LETTER:l(r)?P.HALFWIDTH_KATAKANA_LETTER:P.ALPHA_LETTER}},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFHistory=void 0,u.isDestArraysEqual=o,u.isDestHashesEqual=n;var a=P(3);const c=1e3,w=50,b=1e3;function d(){return document.location.hash}class e{constructor({linkService:s,eventBus:h}){this.linkService=s,this.eventBus=h,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",r=>{this._isViewerInPresentationMode=r.state!==a.PresentationModeState.NORMAL}),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",r=>{this._isPagesLoaded=!!r.pagesCount},{once:!0})})}initialize({fingerprint:s,resetHistory:h=!1,updateUrl:r=!1}){if(!s||typeof s!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const _=this._fingerprint!==""&&this._fingerprint!==s;this._fingerprint=s,this._updateUrl=r===!0,this._initialized=!0,this._bindEvents();const p=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=d(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(p,!0)||h){const{hash:y,page:t,rotation:f}=this._parseCurrentHash(!0);if(!y||_||h){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:y,page:t,rotation:f},!0);return}const g=p.destination;this._updateInternalState(g,p.uid,!0),g.rotation!==void 0&&(this._initialRotation=g.rotation),g.dest?(this._initialBookmark=JSON.stringify(g.dest),this._destination.page=null):g.hash?this._initialBookmark=g.hash:g.page&&(this._initialBookmark=`page=${g.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:s=null,explicitDest:h,pageNumber:r}){if(!this._initialized)return;if(s&&typeof s!="string"){console.error(`PDFHistory.push: "${s}" is not a valid namedDest parameter.`);return}else if(Array.isArray(h)){if(!this._isValidPage(r)&&(r!==null||this._destination)){console.error(`PDFHistory.push: "${r}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${h}" is not a valid explicitDest parameter.`);return}const _=s||JSON.stringify(h);if(!_)return;let p=!1;if(this._destination&&(n(this._destination.hash,_)||o(this._destination.dest,h))){if(this._destination.page)return;p=!0}this._popStateInProgress&&!p||(this._pushOrReplaceState({dest:h,hash:_,page:r,rotation:this.linkService.rotation},p),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(s){if(!!this._initialized){if(!this._isValidPage(s)){console.error(`PDFHistory.pushPage: "${s}" is not a valid page number.`);return}this._destination?.page!==s&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${s}`,page:s,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const s=window.history.state;this._isValidState(s)&&s.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const s=window.history.state;this._isValidState(s)&&s.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(s,h=!1){const r=h||!this._destination,_={fingerprint:this._fingerprint,uid:r?this._uid:this._uid+1,destination:s};this._updateInternalState(s,_.uid);let p;if(this._updateUrl&&s?.hash){const g=document.location.href.split("#")[0];g.startsWith("file://")||(p=`${g}#${s.hash}`)}r?window.history.replaceState(_,"",p):window.history.pushState(_,"",p)}_tryPushCurrentPosition(s=!1){if(!this._position)return;let h=this._position;if(s&&(h=Object.assign(Object.create(null),this._position),h.temporary=!0),!this._destination){this._pushOrReplaceState(h);return}if(this._destination.temporary){this._pushOrReplaceState(h,!0);return}if(this._destination.hash===h.hash||!this._destination.page&&(w<=0||this._numPositionUpdates<=w))return;let r=!1;if(this._destination.page>=h.first&&this._destination.page<=h.page){if(this._destination.dest!==void 0||!this._destination.first)return;r=!0}this._pushOrReplaceState(h,r)}_isValidPage(s){return Number.isInteger(s)&&s>0&&s<=this.linkService.pagesCount}_isValidState(s,h=!1){if(!s)return!1;if(s.fingerprint!==this._fingerprint)if(h){if(typeof s.fingerprint!="string"||s.fingerprint.length!==this._fingerprint.length)return!1;const[r]=performance.getEntriesByType("navigation");if(r?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(s.uid)||s.uid<0||s.destination===null||typeof s.destination!="object")}_updateInternalState(s,h,r=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),r&&s?.temporary&&delete s.temporary,this._destination=s,this._uid=h,this._maxUid=Math.max(this._maxUid,h),this._numPositionUpdates=0}_parseCurrentHash(s=!1){const h=unescape(d()).substring(1),r=(0,a.parseQueryString)(h),_=r.get("nameddest")||"";let p=r.get("page")|0;return(!this._isValidPage(p)||s&&_.length>0)&&(p=null),{hash:h,page:p,rotation:this.linkService.rotation}}_updateViewarea({location:s}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?`page=${s.pageNumber}`:s.pdfOpenParams.substring(1),page:this.linkService.page,first:s.pageNumber,rotation:s.rotation},!this._popStateInProgress&&(w>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,b>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},b)))}_popState({state:s}){const h=d(),r=this._currentHash!==h;if(this._currentHash=h,!s){this._uid++;const{hash:p,page:g,rotation:y}=this._parseCurrentHash();this._pushOrReplaceState({hash:p,page:g,rotation:y},!0);return}if(!this._isValidState(s))return;this._popStateInProgress=!0,r&&(this._blockHashChange++,(0,a.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:c}).then(()=>{this._blockHashChange--}));const _=s.destination;this._updateInternalState(_,s.uid,!0),(0,a.isValidRotation)(_.rotation)&&(this.linkService.rotation=_.rotation),_.dest?this.linkService.goToDestination(_.dest):_.hash?this.linkService.setHash(_.hash):_.page&&(this.linkService.page=_.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}u.PDFHistory=e;function n(l,s){return typeof l!="string"||typeof s!="string"?!1:l===s||(0,a.parseQueryString)(l).get("nameddest")===s}function o(l,s){function h(r,_){if(typeof r!=typeof _||Array.isArray(r)||Array.isArray(_))return!1;if(r!==null&&typeof r=="object"&&_!==null){if(Object.keys(r).length!==Object.keys(_).length)return!1;for(const p in r)if(!h(r[p],_[p]))return!1;return!0}return r===_||Number.isNaN(r)&&Number.isNaN(_)}if(!(Array.isArray(l)&&Array.isArray(s))||l.length!==s.length)return!1;for(let r=0,_=l.length;r<_;r++)if(!h(l[r],s[r]))return!1;return!0}},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFLayerViewer=void 0;var a=P(11);class c extends a.BaseTreeViewer{constructor(b){super(b);this.l10n=b.l10n,this.eventBus._on("resetlayers",this._resetLayers.bind(this)),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null}_dispatchEvent(b){this.eventBus.dispatch("layersloaded",{source:this,layersCount:b})}_bindLink(b,{groupId:d,input:e}){const n=()=>{this._optionalContentConfig.setVisibility(d,e.checked),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};b.onclick=o=>o.target===e?(n(),!0):o.target!==b?!0:(e.checked=!e.checked,n(),!1)}async _setNestedName(b,{name:d=null}){if(typeof d=="string"){b.textContent=this._normalizeTextContent(d);return}b.textContent=await this.l10n.get("additional_layers"),b.style.fontStyle="italic"}_addToggleButton(b,{name:d=null}){super._addToggleButton(b,d===null)}_toggleAllTreeItems(){!this._optionalContentConfig||super._toggleAllTreeItems()}render({optionalContentConfig:b,pdfDocument:d}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=b||null,this._pdfDocument=d||null;const e=b?.getOrder();if(!e){this._dispatchEvent(0);return}const n=document.createDocumentFragment(),o=[{parent:n,groups:e}];let l=0,s=!1;for(;o.length>0;){const h=o.shift();for(const r of h.groups){const _=document.createElement("div");_.className="treeItem";const p=document.createElement("a");if(_.appendChild(p),typeof r=="object"){s=!0,this._addToggleButton(_,r),this._setNestedName(p,r);const g=document.createElement("div");g.className="treeItems",_.appendChild(g),o.push({parent:g,groups:r.order})}else{const g=b.getGroup(r),y=document.createElement("input");this._bindLink(p,{groupId:r,input:y}),y.type="checkbox",y.id=r,y.checked=g.visible;const t=document.createElement("label");t.setAttribute("for",r),t.textContent=this._normalizeTextContent(g.name),p.appendChild(y),p.appendChild(t),l++}h.parent.appendChild(_)}}this._finishRendering(n,l,s)}async _resetLayers(){if(!this._optionalContentConfig)return;const b=await this._pdfDocument.getOptionalContentConfig();this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(b)}),this.render({optionalContentConfig:b,pdfDocument:this._pdfDocument})}}u.PDFLayerViewer=c},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SimpleLinkService=u.PDFLinkService=void 0;var a=P(4),c=P(3);class w{constructor({eventBus:n,externalLinkTarget:o=null,externalLinkRel:l=null,ignoreDestinationZoom:s=!1}={}){this.eventBus=n,this.externalLinkTarget=o,this.externalLinkRel=l,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=s,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}setDocument(n,o=null){this.baseUrl=o,this.pdfDocument=n,this._pagesRefCache=Object.create(null)}setViewer(n){this.pdfViewer=n}setHistory(n){this.pdfHistory=n}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(n){this.pdfViewer.currentPageNumber=n}get rotation(){return this.pdfViewer.pagesRotation}set rotation(n){this.pdfViewer.pagesRotation=n}_goToDestinationHelper(n,o=null,l){const s=l[0];let h;if(typeof s=="object"&&s!==null){if(h=this._cachedPageNumber(s),h===null){this.pdfDocument.getPageIndex(s).then(r=>{this.cachePageRef(r+1,s),this._goToDestinationHelper(n,o,l)}).catch(()=>{console.error(`PDFLinkService._goToDestinationHelper: "${s}" is not a valid page reference, for dest="${n}".`)});return}}else if(Number.isInteger(s))h=s+1;else{console.error(`PDFLinkService._goToDestinationHelper: "${s}" is not a valid destination reference, for dest="${n}".`);return}if(!h||h<1||h>this.pagesCount){console.error(`PDFLinkService._goToDestinationHelper: "${h}" is not a valid page number, for dest="${n}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:o,explicitDest:l,pageNumber:h})),this.pdfViewer.scrollPageIntoView({pageNumber:h,destArray:l,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(n){if(!this.pdfDocument)return;let o,l;if(typeof n=="string"?(o=n,l=await this.pdfDocument.getDestination(n)):(o=null,l=await n),!Array.isArray(l)){console.error(`PDFLinkService.goToDestination: "${l}" is not a valid destination array, for dest="${n}".`);return}this._goToDestinationHelper(n,o,l)}goToPage(n){if(!this.pdfDocument)return;const o=typeof n=="string"&&this.pdfViewer.pageLabelToPageNumber(n)||n|0;if(!(Number.isInteger(o)&&o>0&&o<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${n}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(o)),this.pdfViewer.scrollPageIntoView({pageNumber:o})}addLinkAttributes(n,o,l=!1){(0,a.addLinkAttributes)(n,{url:o,target:l?a.LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(n){if(typeof n=="string"){if(n.length>0)return this.getAnchorUrl("#"+escape(n))}else if(Array.isArray(n)){const o=JSON.stringify(n);if(o.length>0)return this.getAnchorUrl("#"+escape(o))}return this.getAnchorUrl("")}getAnchorUrl(n){return(this.baseUrl||"")+n}setHash(n){if(!this.pdfDocument)return;let o,l;if(n.includes("=")){const s=(0,c.parseQueryString)(n);if(s.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:s.get("search").replace(/"/g,""),phraseSearch:s.get("phrase")==="true"}),s.has("page")&&(o=s.get("page")|0||1),s.has("zoom")){const h=s.get("zoom").split(","),r=h[0],_=parseFloat(r);r.includes("Fit")?r==="Fit"||r==="FitB"?l=[null,{name:r}]:r==="FitH"||r==="FitBH"||r==="FitV"||r==="FitBV"?l=[null,{name:r},h.length>1?h[1]|0:null]:r==="FitR"?h.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):l=[null,{name:r},h[1]|0,h[2]|0,h[3]|0,h[4]|0]:console.error(`PDFLinkService.setHash: "${r}" is not a valid zoom value.`):l=[null,{name:"XYZ"},h.length>1?h[1]|0:null,h.length>2?h[2]|0:null,_?_/100:r]}l?this.pdfViewer.scrollPageIntoView({pageNumber:o||this.page,destArray:l,allowNegativeOffset:!0}):o&&(this.page=o),s.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:s.get("pagemode")}),s.has("nameddest")&&this.goToDestination(s.get("nameddest"))}else{l=unescape(n);try{l=JSON.parse(l),Array.isArray(l)||(l=l.toString())}catch{}if(typeof l=="string"||b(l)){this.goToDestination(l);return}console.error(`PDFLinkService.setHash: "${unescape(n)}" is not a valid destination.`)}}executeNamedAction(n){switch(n){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:n})}cachePageRef(n,o){if(!o)return;const l=o.gen===0?`${o.num}R`:`${o.num}R${o.gen}`;this._pagesRefCache[l]=n}_cachedPageNumber(n){const o=n.gen===0?`${n.num}R`:`${n.num}R${n.gen}`;return this._pagesRefCache?.[o]||null}isPageVisible(n){return this.pdfViewer.isPageVisible(n)}isPageCached(n){return this.pdfViewer.isPageCached(n)}}u.PDFLinkService=w;function b(e){if(!Array.isArray(e))return!1;const n=e.length;if(n<2)return!1;const o=e[0];if(!(typeof o=="object"&&Number.isInteger(o.num)&&Number.isInteger(o.gen))&&!(Number.isInteger(o)&&o>=0))return!1;const l=e[1];if(!(typeof l=="object"&&typeof l.name=="string"))return!1;let s=!0;switch(l.name){case"XYZ":if(n!==5)return!1;break;case"Fit":case"FitB":return n===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(n!==3)return!1;break;case"FitR":if(n!==6)return!1;s=!1;break;default:return!1}for(let h=2;h<n;h++){const r=e[h];if(!(typeof r=="number"||s&&r===null))return!1}return!0}class d{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(n){}get rotation(){return 0}set rotation(n){}async goToDestination(n){}goToPage(n){}addLinkAttributes(n,o,l=!1){(0,a.addLinkAttributes)(n,{url:o,enabled:this.externalLinkEnabled})}getDestinationHash(n){return"#"}getAnchorUrl(n){return"#"}setHash(n){}executeNamedAction(n){}cachePageRef(n,o){}isPageVisible(n){return!0}isPageCached(n){return!0}}u.SimpleLinkService=d},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFOutlineViewer=void 0;var a=P(11),c=P(4),w=P(3);class b extends a.BaseTreeViewer{constructor(e){super(e);this.linkService=e.linkService,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",n=>{this._currentPageNumber=n.pageNumber}),this.eventBus._on("pagesloaded",n=>{this._isPagesLoaded=!!n.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",n=>{this._sidebarView=n.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=!1,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(e){this._currentOutlineItemCapability=(0,c.createPromiseCapability)(),e===0||this._pdfDocument?.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(!0),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,{url:n,newWindow:o,dest:l}){const{linkService:s}=this;if(n){s.addLinkAttributes(e,n,o);return}e.href=s.getDestinationHash(l),e.onclick=h=>(this._updateCurrentTreeItem(h.target.parentNode),l&&s.goToDestination(l),!1)}_setStyles(e,{bold:n,italic:o}){n&&(e.style.fontWeight="bold"),o&&(e.style.fontStyle="italic")}_addToggleButton(e,{count:n,items:o}){let l=!1;if(n<0){let s=o.length;if(s>0){const h=[...o];for(;h.length>0;){const{count:r,items:_}=h.shift();r>0&&_.length>0&&(s+=_.length,h.push(..._))}}Math.abs(n)===s&&(l=!0)}super._addToggleButton(e,l)}_toggleAllTreeItems(){!this._outline||super._toggleAllTreeItems()}render({outline:e,pdfDocument:n}){if(this._outline&&this.reset(),this._outline=e||null,this._pdfDocument=n||null,!e){this._dispatchEvent(0);return}const o=document.createDocumentFragment(),l=[{parent:o,items:e}];let s=0,h=!1;for(;l.length>0;){const r=l.shift();for(const _ of r.items){const p=document.createElement("div");p.className="treeItem";const g=document.createElement("a");if(this._bindLink(g,_),this._setStyles(g,_),g.textContent=this._normalizeTextContent(_.title),p.appendChild(g),_.items.length>0){h=!0,this._addToggleButton(p,_);const y=document.createElement("div");y.className="treeItems",p.appendChild(y),l.push({parent:y,items:_.items})}r.parent.appendChild(p),s++}}this._finishRendering(o,s,h)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const e=await this._getPageNumberToDestHash(this._pdfDocument);if(!!e&&(this._updateCurrentTreeItem(null),this._sidebarView===w.SidebarView.OUTLINE))for(let n=this._currentPageNumber;n>0;n--){const o=e.get(n);if(!o)continue;const l=this.container.querySelector(`a[href="${o}"]`);if(!!l){this._scrollToCurrentTreeItem(l.parentNode);break}}}async _getPageNumberToDestHash(e){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=(0,c.createPromiseCapability)();const n=new Map,o=new Map,l=[{nesting:0,items:this._outline}];for(;l.length>0;){const s=l.shift(),h=s.nesting;for(const{dest:r,items:_}of s.items){let p,g;if(typeof r=="string"){if(p=await e.getDestination(r),e!==this._pdfDocument)return null}else p=r;if(Array.isArray(p)){const[y]=p;if(typeof y=="object"&&y!==null){if(g=this.linkService._cachedPageNumber(y),!g)try{if(g=await e.getPageIndex(y)+1,e!==this._pdfDocument)return null;this.linkService.cachePageRef(g,y)}catch{}}else Number.isInteger(y)&&(g=y+1);if(Number.isInteger(g)&&(!n.has(g)||h>o.get(g))){const t=this.linkService.getDestinationHash(r);n.set(g,t),o.set(g,h)}}_.length>0&&l.push({nesting:h+1,items:_})}}return this._pageNumberToDestHashCapability.resolve(n.size>0?n:null),this._pageNumberToDestHashCapability.promise}}u.PDFOutlineViewer=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFPresentationMode=void 0;var a=P(3);const c=1500,w=3e3,b="pdfPresentationMode",d="pdfPresentationModeControls",e=50,n=.1,o=50,l=Math.PI/6;class s{constructor({container:r,pdfViewer:_,eventBus:p}){this.container=r,this.pdfViewer=_,this.eventBus=p,this.active=!1,this.args=null,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;if(this._addFullscreenChangeListeners(),this._setSwitchInProgress(),this._notifyStateChange(),this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else if(this.container.webkitRequestFullscreen)this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else return!1;return this.args={pageNumber:this.pdfViewer.currentPageNumber,scaleValue:this.pdfViewer.currentScaleValue,scrollMode:this.pdfViewer.scrollMode,spreadMode:this.pdfViewer.spreadMode},!0}_mouseWheel(r){if(!this.active)return;r.preventDefault();const _=(0,a.normalizeWheelEventDelta)(r),p=Date.now(),g=this.mouseScrollTimeStamp;if(!(p>g&&p-g<e)&&((this.mouseScrollDelta>0&&_<0||this.mouseScrollDelta<0&&_>0)&&this._resetMouseScrollState(),this.mouseScrollDelta+=_,Math.abs(this.mouseScrollDelta)>=n)){const y=this.mouseScrollDelta;this._resetMouseScrollState(),(y>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=p)}}get isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen)}_notifyStateChange(){let r=a.PresentationModeState.NORMAL;this.switchInProgress?r=a.PresentationModeState.CHANGING:this.active&&(r=a.PresentationModeState.FULLSCREEN),this.eventBus.dispatch("presentationmodechanged",{source:this,state:r})}_setSwitchInProgress(){this.switchInProgress&&clearTimeout(this.switchInProgress),this.switchInProgress=setTimeout(()=>{this._removeFullscreenChangeListeners(),delete this.switchInProgress,this._notifyStateChange()},c)}_resetSwitchInProgress(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)}_enter(){this.active=!0,this._resetSwitchInProgress(),this._notifyStateChange(),this.container.classList.add(b),setTimeout(()=>{this.pdfViewer.scrollMode=a.ScrollMode.PAGE,this.pdfViewer.spreadMode=a.SpreadMode.NONE,this.pdfViewer.currentPageNumber=this.args.pageNumber,this.pdfViewer.currentScaleValue="page-fit"},0),this._addWindowListeners(),this._showControls(),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()}_exit(){const r=this.pdfViewer.currentPageNumber;this.container.classList.remove(b),setTimeout(()=>{this.active=!1,this._removeFullscreenChangeListeners(),this._notifyStateChange(),this.pdfViewer.scrollMode=this.args.scrollMode,this.pdfViewer.spreadMode=this.args.spreadMode,this.pdfViewer.currentScaleValue=this.args.scaleValue,this.pdfViewer.currentPageNumber=r,this.args=null},0),this._removeWindowListeners(),this._hideControls(),this._resetMouseScrollState(),this.contextMenuOpen=!1}_mouseDown(r){if(this.contextMenuOpen){this.contextMenuOpen=!1,r.preventDefault();return}r.button===0&&(r.target.href&&r.target.classList.contains("internalLink")||(r.preventDefault(),r.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}_contextMenu(){this.contextMenuOpen=!0}_showControls(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(d),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(d),delete this.controlsTimeout},w)}_hideControls(){!this.controlsTimeout||(clearTimeout(this.controlsTimeout),this.container.classList.remove(d),delete this.controlsTimeout)}_resetMouseScrollState(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}_touchSwipe(r){if(!!this.active){if(r.touches.length>1){this.touchSwipeState=null;return}switch(r.type){case"touchstart":this.touchSwipeState={startX:r.touches[0].pageX,startY:r.touches[0].pageY,endX:r.touches[0].pageX,endY:r.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=r.touches[0].pageX,this.touchSwipeState.endY=r.touches[0].pageY,r.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let _=0;const p=this.touchSwipeState.endX-this.touchSwipeState.startX,g=this.touchSwipeState.endY-this.touchSwipeState.startY,y=Math.abs(Math.atan2(g,p));Math.abs(p)>o&&(y<=l||y>=Math.PI-l)?_=p:Math.abs(g)>o&&Math.abs(y-Math.PI/2)<=l&&(_=g),_>0?this.pdfViewer.previousPage():_<0&&this.pdfViewer.nextPage();break}}}_addWindowListeners(){this.showControlsBind=this._showControls.bind(this),this.mouseDownBind=this._mouseDown.bind(this),this.mouseWheelBind=this._mouseWheel.bind(this),this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this),this.contextMenuBind=this._contextMenu.bind(this),this.touchSwipeBind=this._touchSwipe.bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}_removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}_fullscreenChange(){this.isFullscreen?this._enter():this._exit()}_addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind)}_removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}}u.PDFPresentationMode=s},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFScriptingManager=void 0;var a=P(4),c=P(3),w=P(7);class b{constructor({eventBus:e,sandboxBundleSrc:n=null,scriptingFactory:o=null,docPropertiesLookup:l=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=e,this._sandboxBundleSrc=n,this._scriptingFactory=o,this._docPropertiesLookup=l}setViewer(e){this._pdfViewer=e}async setDocument(e){if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=e,!e)return;const[n,o,l]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!n&&!l){await this._destroyScripting();return}if(e===this._pdfDocument){try{this._scripting=this._createScripting()}catch(s){console.error(`PDFScriptingManager.setDocument: "${s?.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",s=>{s?.source===window&&this._updateFromSandbox(s.detail)}),this._internalEvents.set("dispatcheventinsandbox",s=>{this._scripting?.dispatchEventInSandbox(s.detail)}),this._internalEvents.set("pagechanging",({pageNumber:s,previous:h})=>{s!==h&&(this._dispatchPageClose(h),this._dispatchPageOpen(s))}),this._internalEvents.set("pagerendered",({pageNumber:s})=>{!this._pageOpenPending.has(s)||s===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(s)}),this._internalEvents.set("pagesdestroy",async s=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this._closeCapability?.resolve()}),this._domEvents.set("mousedown",s=>{this._mouseState.isDown=!0}),this._domEvents.set("mouseup",s=>{this._mouseState.isDown=!1});for(const[s,h]of this._internalEvents)this._eventBus._on(s,h);for(const[s,h]of this._domEvents)window.addEventListener(s,h);try{const s=await this._getDocProperties();if(e!==this._pdfDocument)return;await this._scripting.createSandbox({objects:n,calculationOrder:o,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...s,actions:l}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(s){console.error(`PDFScriptingManager.setDocument: "${s?.message}".`),await this._destroyScripting();return}await this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{e===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,a.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,a.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,a.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,a.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(e){const n=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:o,siblings:l,command:s,value:h}=e;if(!o){switch(s){case"clear":console.clear();break;case"error":console.error(h);break;case"layout":if(n)return;const _=(0,c.apiPageLayoutToViewerModes)(h);this._pdfViewer.spreadMode=_.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=h+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(h);break;case"zoom":if(n)return;this._pdfViewer.currentScaleValue=h;break;case"SaveAs":this._eventBus.dispatch("save",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(n)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(n)return;this._pdfViewer.decreaseScale();break}return}if(n&&e.focus)return;delete e.id,delete e.siblings;const r=l?[o,...l]:[o];for(const _ of r){const p=document.getElementById(_);p?p.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):this._pdfDocument?.annotationStorage.setValue(_,e)}}async _dispatchPageOpen(e,n=!1){const o=this._pdfDocument,l=this._visitedPages;if(n&&(this._closeCapability=(0,a.createPromiseCapability)()),!this._closeCapability)return;const s=this._pdfViewer.getPageView(e-1);if(s?.renderingState!==w.RenderingStates.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);const h=(async()=>{const r=await(l.has(e)?null:s.pdfPage?.getJSActions());o===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:r})})();l.set(e,h)}async _dispatchPageClose(e){const n=this._pdfDocument,o=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(e))return;const l=o.get(e);!l||(o.set(e,null),await l,n===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e}))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);throw new Error("_getDocProperties: Unable to lookup properties.")}_createScripting(){if(this._destroyCapability=(0,a.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}async _destroyScripting(){if(!this._scripting){this._pdfDocument=null,this._destroyCapability?.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(e=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[e,n]of this._internalEvents)this._eventBus._off(e,n);this._internalEvents.clear();for(const[e,n]of this._domEvents)window.removeEventListener(e,n);this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,this._destroyCapability?.resolve()}}u.PDFScriptingManager=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFSidebar=void 0;var a=P(3),c=P(7);const w="pdfSidebarNotification";class b{constructor({elements:e,pdfViewer:n,pdfThumbnailViewer:o,eventBus:l,l10n:s}){this.isOpen=!1,this.active=a.SidebarView.THUMBS,this.isInitialViewSet=!1,this.onToggled=null,this.pdfViewer=n,this.pdfThumbnailViewer=o,this.outerContainer=e.outerContainer,this.viewerContainer=e.viewerContainer,this.toggleButton=e.toggleButton,this.thumbnailButton=e.thumbnailButton,this.outlineButton=e.outlineButton,this.attachmentsButton=e.attachmentsButton,this.layersButton=e.layersButton,this.thumbnailView=e.thumbnailView,this.outlineView=e.outlineView,this.attachmentsView=e.attachmentsView,this.layersView=e.layersView,this._outlineOptionsContainer=e.outlineOptionsContainer,this._currentOutlineItemButton=e.currentOutlineItemButton,this.eventBus=l,this.l10n=s,this._addEventListeners()}reset(){this.isInitialViewSet=!1,this._hideUINotification(!0),this.switchView(a.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:a.SidebarView.NONE}get isThumbnailViewVisible(){return this.isOpen&&this.active===a.SidebarView.THUMBS}get isOutlineViewVisible(){return this.isOpen&&this.active===a.SidebarView.OUTLINE}get isAttachmentsViewVisible(){return this.isOpen&&this.active===a.SidebarView.ATTACHMENTS}get isLayersViewVisible(){return this.isOpen&&this.active===a.SidebarView.LAYERS}setInitialView(e=a.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,e===a.SidebarView.NONE||e===a.SidebarView.UNKNOWN){this._dispatchEvent();return}this._switchView(e,!0)||this._dispatchEvent()}}switchView(e,n=!1){this._switchView(e,n)}_switchView(e,n=!1){const o=e!==this.active;let l=!1;switch(e){case a.SidebarView.NONE:return this.isOpen?(this.close(),!0):!1;case a.SidebarView.THUMBS:this.isOpen&&o&&(l=!0);break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled)return!1;break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;case a.SidebarView.LAYERS:if(this.layersButton.disabled)return!1;break;default:return console.error(`PDFSidebar._switchView: "${e}" is not a valid view.`),!1}return this.active=e,this.thumbnailButton.classList.toggle("toggled",e===a.SidebarView.THUMBS),this.outlineButton.classList.toggle("toggled",e===a.SidebarView.OUTLINE),this.attachmentsButton.classList.toggle("toggled",e===a.SidebarView.ATTACHMENTS),this.layersButton.classList.toggle("toggled",e===a.SidebarView.LAYERS),this.thumbnailView.classList.toggle("hidden",e!==a.SidebarView.THUMBS),this.outlineView.classList.toggle("hidden",e!==a.SidebarView.OUTLINE),this.attachmentsView.classList.toggle("hidden",e!==a.SidebarView.ATTACHMENTS),this.layersView.classList.toggle("hidden",e!==a.SidebarView.LAYERS),this._outlineOptionsContainer.classList.toggle("hidden",e!==a.SidebarView.OUTLINE),n&&!this.isOpen?(this.open(),!0):(l&&(this._updateThumbnailViewer(),this._forceRendering()),o&&this._dispatchEvent(),o)}open(){this.isOpen||(this.isOpen=!0,this.toggleButton.classList.add("toggled"),this.toggleButton.setAttribute("aria-expanded","true"),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===a.SidebarView.THUMBS&&this._updateThumbnailViewer(),this._forceRendering(),this._dispatchEvent(),this._hideUINotification())}close(){!this.isOpen||(this.isOpen=!1,this.toggleButton.classList.remove("toggled"),this.toggleButton.setAttribute("aria-expanded","false"),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this._forceRendering(),this._dispatchEvent())}toggle(){this.isOpen?this.close():this.open()}_dispatchEvent(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}_forceRendering(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}_updateThumbnailViewer(){const{pdfViewer:e,pdfThumbnailViewer:n}=this,o=e.pagesCount;for(let l=0;l<o;l++){const s=e.getPageView(l);s?.renderingState===c.RenderingStates.FINISHED&&n.getThumbnail(l).setImage(s)}n.scrollThumbnailIntoView(e.currentPageNumber)}_showUINotification(){this.l10n.get("toggle_sidebar_notification2.title").then(e=>{this.toggleButton.title=e}),this.isOpen||this.toggleButton.classList.add(w)}_hideUINotification(e=!1){(this.isOpen||e)&&this.toggleButton.classList.remove(w),e&&this.l10n.get("toggle_sidebar.title").then(n=>{this.toggleButton.title=n})}_addEventListeners(){this.viewerContainer.addEventListener("transitionend",n=>{n.target===this.viewerContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(a.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(a.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(a.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(a.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const e=(n,o,l)=>{o.disabled=!n,n?this._showUINotification():this.active===l&&this.switchView(a.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",n=>{e(n.outlineCount,this.outlineButton,a.SidebarView.OUTLINE),n.currentOutlineItemPromise.then(o=>{!this.isInitialViewSet||(this._currentOutlineItemButton.disabled=!o)})}),this.eventBus._on("attachmentsloaded",n=>{e(n.attachmentsCount,this.attachmentsButton,a.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",n=>{e(n.layersCount,this.layersButton,a.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",n=>{n.state===a.PresentationModeState.NORMAL&&this.isThumbnailViewVisible&&this._updateThumbnailViewer()})}}u.PDFSidebar=b},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFSidebarResizer=void 0;const P="--sidebar-width",a=200,c="sidebarResizing";class w{constructor(d,e,n){this.isRTL=!1,this.sidebarOpen=!1,this.doc=document.documentElement,this._width=null,this._outerContainerWidth=null,this._boundEvents=Object.create(null),this.outerContainer=d.outerContainer,this.resizer=d.resizer,this.eventBus=e,n.getDirection().then(o=>{this.isRTL=o==="rtl"}),this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||=this.outerContainer.clientWidth}_updateWidth(d=0){const e=Math.floor(this.outerContainerWidth/2);return d>e&&(d=e),d<a&&(d=a),d===this._width?!1:(this._width=d,this.doc.style.setProperty(P,`${d}px`),!0)}_mouseMove(d){let e=d.clientX;this.isRTL&&(e=this.outerContainerWidth-e),this._updateWidth(e)}_mouseUp(d){this.outerContainer.classList.remove(c),this.eventBus.dispatch("resize",{source:this});const e=this._boundEvents;window.removeEventListener("mousemove",e.mouseMove),window.removeEventListener("mouseup",e.mouseUp)}_addEventListeners(){const d=this._boundEvents;d.mouseMove=this._mouseMove.bind(this),d.mouseUp=this._mouseUp.bind(this),this.resizer.addEventListener("mousedown",e=>{e.button===0&&(this.outerContainer.classList.add(c),window.addEventListener("mousemove",d.mouseMove),window.addEventListener("mouseup",d.mouseUp))}),this.eventBus._on("sidebarviewchanged",e=>{this.sidebarOpen=!!e?.view}),this.eventBus._on("resize",e=>{if(e?.source!==window||(this._outerContainerWidth=null,!this._width))return;if(!this.sidebarOpen){this._updateWidth(this._width);return}this.outerContainer.classList.add(c);const n=this._updateWidth(this._width);Promise.resolve().then(()=>{this.outerContainer.classList.remove(c),n&&this.eventBus.dispatch("resize",{source:this})})})}}u.PDFSidebarResizer=w},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFThumbnailViewer=void 0;var a=P(3),c=P(25),w=P(7);const b=-19,d="selected";class e{constructor({container:o,eventBus:l,linkService:s,renderingQueue:h,l10n:r}){this.container=o,this.linkService=s,this.renderingQueue=h,this.l10n=r,this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView(),l._on("optionalcontentconfigchanged",()=>{this._setImageDisabled=!0})}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(o){return this._thumbnails[o]}_getVisibleThumbs(){return(0,a.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(o){if(!this.pdfDocument)return;const l=this._thumbnails[o-1];if(!l){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}o!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(d),l.div.classList.add(d));const{first:s,last:h,views:r}=this._getVisibleThumbs();if(r.length>0){let _=!1;if(o<=s.id||o>=h.id)_=!0;else for(const{id:p,percent:g}of r)if(p===o){_=g<100;break}_&&(0,a.scrollIntoView)(l.div,{top:b})}this._currentPageNumber=o}get pagesRotation(){return this._pagesRotation}set pagesRotation(o){if(!(0,a.isValidRotation)(o))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===o)return;this._pagesRotation=o;const l={rotation:o};for(const s of this._thumbnails)s.update(l)}cleanup(){for(let o=0,l=this._thumbnails.length;o<l;o++)this._thumbnails[o]&&this._thumbnails[o].renderingState!==w.RenderingStates.FINISHED&&this._thumbnails[o].reset();c.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._setImageDisabled=!1,this.container.textContent=""}setDocument(o){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=o,!o)return;const l=o.getPage(1),s=o.getOptionalContentConfig();l.then(h=>{this._optionalContentConfigPromise=s;const r=o.numPages,_=h.getViewport({scale:1}),p=()=>this._setImageDisabled;for(let t=1;t<=r;++t){const f=new c.PDFThumbnailView({container:this.container,id:t,defaultViewport:_.clone(),optionalContentConfigPromise:s,linkService:this.linkService,renderingQueue:this.renderingQueue,checkSetImageDisabled:p,l10n:this.l10n});this._thumbnails.push(f)}const g=this._thumbnails[0];g&&g.setPdfPage(h),this._thumbnails[this._currentPageNumber-1].div.classList.add(d)}).catch(h=>{console.error("Unable to initialize thumbnail viewer",h)})}_cancelRendering(){for(let o=0,l=this._thumbnails.length;o<l;o++)this._thumbnails[o]&&this._thumbnails[o].cancelRendering()}setPageLabels(o){if(!!this.pdfDocument){o?Array.isArray(o)&&this.pdfDocument.numPages===o.length?this._pageLabels=o:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let l=0,s=this._thumbnails.length;l<s;l++)this._thumbnails[l].setPageLabel(this._pageLabels?.[l]??null)}}_ensurePdfPageLoaded(o){if(o.pdfPage)return Promise.resolve(o.pdfPage);if(this._pagesRequests.has(o))return this._pagesRequests.get(o);const l=this.pdfDocument.getPage(o.id).then(s=>(o.pdfPage||o.setPdfPage(s),this._pagesRequests.delete(o),s)).catch(s=>{console.error("Unable to get page for thumb view",s),this._pagesRequests.delete(o)});return this._pagesRequests.set(o,l),l}#e(o){return o.first?.id===1?!0:o.last?.id===this._thumbnails.length?!1:this.scroll.down}forceRendering(){const o=this._getVisibleThumbs(),l=this.#e(o),s=this.renderingQueue.getHighestPriority(o,this._thumbnails,l);return s?(this._ensurePdfPageLoaded(s).then(()=>{this.renderingQueue.renderView(s)}),!0):!1}}u.PDFThumbnailViewer=e},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TempImageFactory=u.PDFThumbnailView=void 0;var a=P(3),c=P(4),w=P(7);const b=2,d=3,e=1,n=98;class o{static#e=null;static getCanvas(h,r){const _=this.#e||=document.createElement("canvas");_.width=h,_.height=r,_.mozOpaque=!0;const p=_.getContext("2d",{alpha:!1});return p.save(),p.fillStyle="rgb(255, 255, 255)",p.fillRect(0,0,h,r),p.restore(),[_,_.getContext("2d")]}static destroyCanvas(){const h=this.#e;h&&(h.width=0,h.height=0),this.#e=null}}u.TempImageFactory=o;class l{constructor({container:h,id:r,defaultViewport:_,optionalContentConfigPromise:p,linkService:g,renderingQueue:y,checkSetImageDisabled:t,l10n:f}){this.id=r,this.renderingId="thumbnail"+r,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=_,this.pdfPageRotate=_.rotation,this._optionalContentConfigPromise=p||null,this.linkService=g,this.renderingQueue=y,this.renderTask=null,this.renderingState=w.RenderingStates.INITIAL,this.resume=null,this._checkSetImageDisabled=t||function(){return!1};const S=this.viewport.width,V=this.viewport.height,T=S/V;this.canvasWidth=n,this.canvasHeight=this.canvasWidth/T|0,this.scale=this.canvasWidth/S,this.l10n=f;const C=document.createElement("a");C.href=g.getAnchorUrl("#page="+r),this._thumbPageTitle.then(A=>{C.title=A}),C.onclick=function(){return g.goToPage(r),!1},this.anchor=C;const v=document.createElement("div");v.className="thumbnail",v.setAttribute("data-page-number",this.id),this.div=v;const I=document.createElement("div");I.className="thumbnailSelectionRing";const D=2*e;I.style.width=this.canvasWidth+D+"px",I.style.height=this.canvasHeight+D+"px",this.ring=I,v.appendChild(I),C.appendChild(v),h.appendChild(C)}setPdfPage(h){this.pdfPage=h,this.pdfPageRotate=h.rotate;const r=(this.rotation+this.pdfPageRotate)%360;this.viewport=h.getViewport({scale:1,rotation:r}),this.reset()}reset(){this.cancelRendering(),this.renderingState=w.RenderingStates.INITIAL;const h=this.viewport.width,r=this.viewport.height,_=h/r;this.canvasHeight=this.canvasWidth/_|0,this.scale=this.canvasWidth/h,this.div.removeAttribute("data-loaded");const p=this.ring;p.textContent="";const g=2*e;p.style.width=this.canvasWidth+g+"px",p.style.height=this.canvasHeight+g+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:h=null}){typeof h=="number"&&(this.rotation=h);const r=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:r}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(h=1){const r=document.createElement("canvas");r.mozOpaque=!0;const _=r.getContext("2d",{alpha:!1}),p=(0,a.getOutputScale)(_);r.width=h*this.canvasWidth*p.sx|0,r.height=h*this.canvasHeight*p.sy|0;const g=p.scaled?[p.sx,0,0,p.sy,0,0]:null;return{ctx:_,canvas:r,transform:g}}_convertCanvasToImage(h){if(this.renderingState!==w.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const r=this._reduceImage(h),_=document.createElement("img");_.className="thumbnailImage",this._thumbPageCanvas.then(p=>{_.setAttribute("aria-label",p)}),_.style.width=this.canvasWidth+"px",_.style.height=this.canvasHeight+"px",_.src=r.toDataURL(),this.image=_,this.div.setAttribute("data-loaded",!0),this.ring.appendChild(_),r.width=0,r.height=0}draw(){if(this.renderingState!==w.RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();const{pdfPage:h}=this;if(!h)return this.renderingState=w.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=w.RenderingStates.RUNNING;const r=async(T=null)=>{if(S===this.renderTask&&(this.renderTask=null),!(T instanceof c.RenderingCancelledException)&&(this.renderingState=w.RenderingStates.FINISHED,this._convertCanvasToImage(p),T))throw T},{ctx:_,canvas:p,transform:g}=this._getPageDrawContext(b),y=this.viewport.clone({scale:b*this.scale}),t=T=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=w.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=w.RenderingStates.RUNNING,T()};return}T()},f={canvasContext:_,transform:g,viewport:y,optionalContentConfigPromise:this._optionalContentConfigPromise},S=this.renderTask=h.render(f);S.onContinue=t;const V=S.promise.then(function(){return r(null)},function(T){return r(T)});return V.finally(()=>{p.width=0,p.height=0,this.linkService.isPageCached(this.id)||this.pdfPage?.cleanup()}),V}setImage(h){if(this._checkSetImageDisabled()||this.renderingState!==w.RenderingStates.INITIAL)return;const{canvas:r,pdfPage:_}=h;!r||(this.pdfPage||this.setPdfPage(_),this.renderingState=w.RenderingStates.FINISHED,this._convertCanvasToImage(r))}_reduceImage(h){const{ctx:r,canvas:_}=this._getPageDrawContext();if(h.width<=2*_.width)return r.drawImage(h,0,0,h.width,h.height,0,0,_.width,_.height),_;let p=_.width<<d,g=_.height<<d;const[y,t]=o.getCanvas(p,g);for(;p>h.width||g>h.height;)p>>=1,g>>=1;for(t.drawImage(h,0,0,h.width,h.height,0,0,p,g);p>2*_.width;)t.drawImage(y,0,0,p,g,0,0,p>>1,g>>1),p>>=1,g>>=1;return r.drawImage(y,0,0,p,g,0,0,_.width,_.height),_}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(h){this.pageLabel=typeof h=="string"?h:null,this._thumbPageTitle.then(r=>{this.anchor.title=r}),this.renderingState===w.RenderingStates.FINISHED&&this._thumbPageCanvas.then(r=>{this.image?.setAttribute("aria-label",r)})}}u.PDFThumbnailView=l},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFViewer=u.PDFSinglePageViewer=void 0;var a=P(3),c=P(27);class w extends c.BaseViewer{}u.PDFViewer=w;class b extends c.BaseViewer{_resetView(){super._resetView(),this._scrollMode=a.ScrollMode.PAGE,this._spreadMode=a.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}u.PDFSinglePageViewer=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFPageViewBuffer=u.BaseViewer=void 0;var a=P(4),c=P(3),w=P(7),b=P(28),d=P(29),e=P(30),n=P(18),o=P(31),l=P(32),s=P(33),h=P(34);const r=10;class _{#e=new Set;#t=0;constructor(t){this.#t=t}push(t){const f=this.#e;f.has(t)&&f.delete(t),f.add(t),f.size>this.#t&&this.#i()}resize(t,f=null){this.#t=t;const S=this.#e;if(f){const V=S.size;let T=1;for(const C of S)if(f.has(C.id)&&(S.delete(C),S.add(C)),++T>V)break}for(;S.size>this.#t;)this.#i()}has(t){return this.#e.has(t)}#i(){const t=this.#e.keys().next().value;t?.destroy(),this.#e.delete(t)}}u.PDFPageViewBuffer=_;function p(y,t){return t===y||Math.abs(t-y)<1e-15}class g{#e=null;#t=null;constructor(t){if(this.constructor===g)throw new Error("Cannot initialize BaseViewer.");const f="2.12.154";if(a.version!==f)throw new Error(`The API version "${a.version}" does not match the Viewer version "${f}".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,!(this.container?.tagName.toUpperCase()==="DIV"&&this.viewer?.tagName.toUpperCase()==="DIV"))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.eventBus=t.eventBus,this.linkService=t.linkService||new n.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this._scriptingManager=t.scriptingManager||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=t.textLayerMode??c.TextLayerMode.ENABLE,this._annotationMode=t.annotationMode??a.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||c.RendererType.CANVAS,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||d.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new w.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this._doc=document.documentElement,this.scroll=(0,c.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=c.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}get pageViewsReady(){return this._pagesCapability.settled?this._pages.every(function(t){return t?.pdfPage}):!1}get renderForms(){return this._annotationMode===a.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`)}_setCurrentPageNumber(t,f=!1){if(this._currentPageNumber===t)return f&&this._resetCurrentPageView(),!0;if(!(0<t&&t<=this.pagesCount))return!1;const S=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels?.[t-1]??null,previous:S}),f&&this._resetCurrentPageView(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(t){if(!this.pdfDocument)return;let f=t|0;if(this._pageLabels){const S=this._pageLabels.indexOf(t);S>=0&&(f=S+1)}this._setCurrentPageNumber(f,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==c.UNKNOWN_SCALE?this._currentScale:c.DEFAULT_SCALE}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(t,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){!this.pdfDocument||this._setScale(t,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!(0,c.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(t%=360,t<0&&(t+=360),this._pagesRotation===t))return;this._pagesRotation=t;const f=this._currentPageNumber,S={rotation:t};for(const V of this._pages)V.update(S);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:f}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}_onePageRenderedOrForceFetch(){return!this.container.offsetParent||this._getVisiblePages().views.length===0?Promise.resolve():this._onePageRenderedCapability.promise}setDocument(t){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=t,!t)return;const f=t.isPureXfa,S=t.numPages,V=t.getPage(1),T=t.getOptionalContentConfig();this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:S})}),this._onBeforeDraw=C=>{const v=this._pages[C.pageNumber-1];!v||this.#e.push(v)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=C=>{C.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve(),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),V.then(C=>{this._firstPageCapability.resolve(C),this._optionalContentConfigPromise=T;const v=this._scrollMode===c.ScrollMode.PAGE?null:this.viewer,I=this.currentScale,D=C.getViewport({scale:I*a.PixelsPerInch.PDF_TO_CSS_UNITS}),A=this.textLayerMode!==c.TextLayerMode.DISABLE&&!f?this:null,H=this._annotationMode!==a.AnnotationMode.DISABLE?this:null,j=f?this:null;for(let X=1;X<=S;++X){const K=new e.PDFPageView({container:v,eventBus:this.eventBus,id:X,scale:I,defaultViewport:D.clone(),optionalContentConfigPromise:T,renderingQueue:this.renderingQueue,textLayerFactory:A,textLayerMode:this.textLayerMode,annotationLayerFactory:H,annotationMode:this._annotationMode,xfaLayerFactory:j,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(K)}const L=this._pages[0];L&&(L.setPdfPage(C),this.linkService.cachePageRef(1,C.ref)),this._scrollMode===c.ScrollMode.PAGE?this._ensurePageViewVisible():this._spreadMode!==c.SpreadMode.NONE&&this._updateSpreadMode(),this._onePageRenderedOrForceFetch().then(()=>{if(this.findController&&this.findController.setDocument(t),this._scriptingManager&&this._scriptingManager.setDocument(t),t.loadingParams.disableAutoFetch||S>7500){this._pagesCapability.resolve();return}let X=S-1;if(X<=0){this._pagesCapability.resolve();return}for(let K=2;K<=S;++K)t.getPage(K).then(q=>{const ee=this._pages[K-1];ee.pdfPage||ee.setPdfPage(q),this.linkService.cachePageRef(K,q.ref),--X==0&&this._pagesCapability.resolve()},q=>{console.error(`Unable to get page ${K} to initialize viewer`,q),--X==0&&this._pagesCapability.resolve()})}),this.eventBus.dispatch("pagesinit",{source:this}),this.defaultRenderingQueue&&this.update()}).catch(C=>{console.error("Unable to initialize viewer",C)})}setPageLabels(t){if(!!this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let f=0,S=this._pages.length;f<S;f++)this._pages[f].setPageLabel(this._pageLabels?.[f]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=c.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new _(r),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,a.createPromiseCapability)(),this._onePageRenderedCapability=(0,a.createPromiseCapability)(),this._pagesCapability=(0,a.createPromiseCapability)(),this._scrollMode=c.ScrollMode.VERTICAL,this._previousScrollMode=c.ScrollMode.UNKNOWN,this._spreadMode=c.SpreadMode.NONE,this.#t={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}_ensurePageViewVisible(){if(this._scrollMode!==c.ScrollMode.PAGE)throw new Error("_ensurePageViewVisible: Invalid scrollMode value.");const t=this._currentPageNumber,f=this.#t,S=this.viewer;if(S.textContent="",f.pages.length=0,this._spreadMode===c.SpreadMode.NONE){const V=this._pages[t-1];S.appendChild(V.div),f.pages.push(V)}else{const V=new Set,T=this._spreadMode-1;t%2!==T?(V.add(t-1),V.add(t)):(V.add(t-2),V.add(t-1));let C=null;for(let v=0,I=this._pages.length;v<I;++v){if(!V.has(v))continue;C===null?(C=document.createElement("div"),C.className="spread",S.appendChild(C)):v%2===T&&(C=C.cloneNode(!1),S.appendChild(C));const D=this._pages[v];C.appendChild(D.div),f.pages.push(D)}}f.scrollDown=t>=f.previousPageNumber,f.previousPageNumber=t}_scrollUpdate(){this.pagesCount!==0&&this.update()}_scrollIntoView({pageDiv:t,pageSpot:f=null,pageNumber:S=null}){if(this._scrollMode===c.ScrollMode.PAGE&&(S&&this._setCurrentPageNumber(S),this._ensurePageViewVisible(),this.update()),!f&&!this.isInPresentationMode){const V=t.offsetLeft+t.clientLeft,T=V+t.clientWidth,{scrollLeft:C,clientWidth:v}=this.container;(this._scrollMode===c.ScrollMode.HORIZONTAL||V<C||T>C+v)&&(f={left:0,top:0})}(0,c.scrollIntoView)(t,f)}_setScaleUpdatePages(t,f,S=!1,V=!1){if(this._currentScaleValue=f.toString(),p(this._currentScale,t)){V&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:f});return}this._doc.style.setProperty("--zoom-factor",t);const T={scale:t};for(const C of this._pages)C.update(T);if(this._currentScale=t,!S){let C=this._currentPageNumber,v;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(C=this._location.pageNumber,v=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:C,destArray:v,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:V?f:void 0}),this.defaultRenderingQueue&&this.update()}get _pageWidthScaleFactor(){return this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL?2:1}_setScale(t,f=!1){let S=parseFloat(t);if(S>0)this._setScaleUpdatePages(S,t,f,!1);else{const V=this._pages[this._currentPageNumber-1];if(!V)return;const T=this.isInPresentationMode||this.removePageBorders;let C=T?0:c.SCROLLBAR_PADDING,v=T?0:c.VERTICAL_PADDING;!T&&this._scrollMode===c.ScrollMode.HORIZONTAL&&([C,v]=[v,C]);const I=(this.container.clientWidth-C)/V.width*V.scale/this._pageWidthScaleFactor,D=(this.container.clientHeight-v)/V.height*V.scale;switch(t){case"page-actual":S=1;break;case"page-width":S=I;break;case"page-height":S=D;break;case"page-fit":S=Math.min(I,D);break;case"auto":const A=(0,c.isPortraitOrientation)(V)?I:Math.min(D,I);S=Math.min(c.MAX_AUTO_SCALE,A);break;default:console.error(`_setScale: "${t}" is an unknown zoom value.`);return}this._setScaleUpdatePages(S,t,f,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);const t=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:t.div})}pageLabelToPageNumber(t){if(!this._pageLabels)return null;const f=this._pageLabels.indexOf(t);return f<0?null:f+1}scrollPageIntoView({pageNumber:t,destArray:f=null,allowNegativeOffset:S=!1,ignoreDestinationZoom:V=!1}){if(!this.pdfDocument)return;const T=Number.isInteger(t)&&this._pages[t-1];if(!T){console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!f){this._setCurrentPageNumber(t,!0);return}let C=0,v=0,I=0,D=0,A,H;const j=T.rotation%180!=0,L=(j?T.height:T.width)/T.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS,X=(j?T.width:T.height)/T.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS;let K=0;switch(f[1].name){case"XYZ":C=f[2],v=f[3],K=f[4],C=C!==null?C:0,v=v!==null?v:X;break;case"Fit":case"FitB":K="page-fit";break;case"FitH":case"FitBH":v=f[2],K="page-width",v===null&&this._location?(C=this._location.left,v=this._location.top):typeof v!="number"&&(v=X);break;case"FitV":case"FitBV":C=f[2],I=L,D=X,K="page-height";break;case"FitR":C=f[2],v=f[3],I=f[4]-C,D=f[5]-v;const ae=this.removePageBorders?0:c.SCROLLBAR_PADDING,ce=this.removePageBorders?0:c.VERTICAL_PADDING;A=(this.container.clientWidth-ae)/I/a.PixelsPerInch.PDF_TO_CSS_UNITS,H=(this.container.clientHeight-ce)/D/a.PixelsPerInch.PDF_TO_CSS_UNITS,K=Math.min(Math.abs(A),Math.abs(H));break;default:console.error(`scrollPageIntoView: "${f[1].name}" is not a valid destination type.`);return}if(V||(K&&K!==this._currentScale?this.currentScaleValue=K:this._currentScale===c.UNKNOWN_SCALE&&(this.currentScaleValue=c.DEFAULT_SCALE_VALUE)),K==="page-fit"&&!f[4]){this._scrollIntoView({pageDiv:T.div,pageNumber:t});return}const q=[T.viewport.convertToViewportPoint(C,v),T.viewport.convertToViewportPoint(C+I,v+D)];let ee=Math.min(q[0][0],q[1][0]),E=Math.min(q[0][1],q[1][1]);S||(ee=Math.max(ee,0),E=Math.max(E,0)),this._scrollIntoView({pageDiv:T.div,pageSpot:{left:ee,top:E},pageNumber:t})}_updateLocation(t){const f=this._currentScale,S=this._currentScaleValue,V=parseFloat(S)===f?Math.round(f*1e4)/100:S,T=t.id;let C="#page="+T;C+="&zoom="+V;const v=this._pages[T-1],I=this.container,D=v.getPagePoint(I.scrollLeft-t.x,I.scrollTop-t.y),A=Math.round(D[0]),H=Math.round(D[1]);C+=","+A+","+H,this._location={pageNumber:T,scale:V,top:H,left:A,rotation:this._pagesRotation,pdfOpenParams:C}}update(){const t=this._getVisiblePages(),f=t.views,S=f.length;if(S===0)return;const V=Math.max(r,2*S+1);if(this.#e.resize(V,t.ids),this.renderingQueue.renderHighestPriority(t),!this.isInPresentationMode){const T=this._spreadMode===c.SpreadMode.NONE&&(this._scrollMode===c.ScrollMode.PAGE||this._scrollMode===c.ScrollMode.VERTICAL);let C=this._currentPageNumber,v=!1;for(const I of f){if(I.percent<100)break;if(I.id===C&&T){v=!0;break}}v||(C=f[0].id),this._setCurrentPageNumber(C)}this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===c.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===c.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const t=this._pages[this._currentPageNumber-1],f=t.div,S={id:t.id,x:f.offsetLeft+f.clientLeft,y:f.offsetTop+f.clientTop,view:t},V=new Set([t.id]);return{first:S,last:S,views:[S],ids:V}}_getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();const t=this._scrollMode===c.ScrollMode.PAGE?this.#t.pages:this._pages,f=this._scrollMode===c.ScrollMode.HORIZONTAL,S=f&&this._isContainerRtl;return(0,c.getVisibleElements)({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:f,rtl:S})}isPageVisible(t){return this.pdfDocument?Number.isInteger(t)&&t>0&&t<=this.pagesCount?this._getVisiblePages().ids.has(t):(console.error(`isPageVisible: "${t}" is not a valid page.`),!1):!1}isPageCached(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount))return console.error(`isPageCached: "${t}" is not a valid page.`),!1;const f=this._pages[t-1];return this.#e.has(f)}cleanup(){for(let t=0,f=this._pages.length;t<f;t++)this._pages[t]&&this._pages[t].renderingState!==w.RenderingStates.FINISHED&&this._pages[t].reset()}_cancelRendering(){for(let t=0,f=this._pages.length;t<f;t++)this._pages[t]&&this._pages[t].cancelRendering()}_ensurePdfPageLoaded(t){if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);const f=this.pdfDocument.getPage(t.id).then(S=>(t.pdfPage||t.setPdfPage(S),this._pagesRequests.delete(t),S)).catch(S=>{console.error("Unable to get page for page view",S),this._pagesRequests.delete(t)});return this._pagesRequests.set(t,f),f}#i(t){if(t.first?.id===1)return!0;if(t.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case c.ScrollMode.PAGE:return this.#t.scrollDown;case c.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(t){const f=t||this._getVisiblePages(),S=this.#i(f),V=this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL,T=this.renderingQueue.getHighestPriority(f,this._pages,S,V);return T?(this._ensurePdfPageLoaded(T).then(()=>{this.renderingQueue.renderView(T)}),!0):!1}createTextLayerBuilder(t,f,S,V=!1,T,C){return new s.TextLayerBuilder({textLayerDiv:t,eventBus:T,pageIndex:f,viewport:S,enhanceTextSelection:this.isInPresentationMode?!1:V,highlighter:C})}createTextHighlighter(t,f){return new l.TextHighlighter({eventBus:f,pageIndex:t,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(t,f,S=null,V="",T=!0,C=d.NullL10n,v=null,I=null,D=null,A=null){return new b.AnnotationLayerBuilder({pageDiv:t,pdfPage:f,annotationStorage:S||this.pdfDocument?.annotationStorage,imageResourcesPath:V,renderForms:T,linkService:this.linkService,downloadManager:this.downloadManager,l10n:C,enableScripting:v??this.enableScripting,hasJSActionsPromise:I||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:A||this.pdfDocument?.getFieldObjects(),mouseState:D||this._scriptingManager?.mouseState})}createXfaLayerBuilder(t,f,S=null){return new h.XfaLayerBuilder({pageDiv:t,pdfPage:f,annotationStorage:S||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(t){return new o.StructTreeLayerBuilder({pdfPage:t})}get hasEqualPageSizes(){const t=this._pages[0];for(let f=1,S=this._pages.length;f<S;++f){const V=this._pages[f];if(V.width!==t.width||V.height!==t.height)return!1}return!0}getPagesOverview(){return this._pages.map(t=>{const f=t.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,c.isPortraitOrientation)(f)?{width:f.width,height:f.height,rotation:f.rotation}:{width:f.height,height:f.width,rotation:(f.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=t;const f={optionalContentConfigPromise:t};for(const S of this._pages)S.update(f);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!(0,c.isValidScrollMode)(t))throw new Error(`Invalid scroll mode: ${t}`);this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber)}}_updateScrollMode(t=null){const f=this._scrollMode,S=this.viewer;S.classList.toggle("scrollHorizontal",f===c.ScrollMode.HORIZONTAL),S.classList.toggle("scrollWrapped",f===c.ScrollMode.WRAPPED),!(!this.pdfDocument||!t)&&(f===c.ScrollMode.PAGE?this._ensurePageViewVisible():this._previousScrollMode===c.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!(0,c.isValidSpreadMode)(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const f=this.viewer,S=this._pages;if(this._scrollMode===c.ScrollMode.PAGE)this._ensurePageViewVisible();else if(f.textContent="",this._spreadMode===c.SpreadMode.NONE)for(let V=0,T=S.length;V<T;++V)f.appendChild(S[V].div);else{const V=this._spreadMode-1;let T=null;for(let C=0,v=S.length;C<v;++C)T===null?(T=document.createElement("div"),T.className="spread",f.appendChild(T)):C%2===V&&(T=T.cloneNode(!1),f.appendChild(T)),T.appendChild(S[C].div)}!t||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,f=!1){switch(this._scrollMode){case c.ScrollMode.WRAPPED:{const{views:S}=this._getVisiblePages(),V=new Map;for(const{id:T,y:C,percent:v,widthPercent:I}of S){if(v===0||I<100)continue;let D=V.get(C);D||V.set(C,D||=[]),D.push(T)}for(const T of V.values()){const C=T.indexOf(t);if(C===-1)continue;const v=T.length;if(v===1)break;if(f)for(let I=C-1,D=0;I>=D;I--){const A=T[I],H=T[I+1]-1;if(A<H)return t-H}else for(let I=C+1,D=v;I<D;I++){const A=T[I],H=T[I-1]+1;if(A>H)return H-t}if(f){const I=T[0];if(I<t)return t-I+1}else{const I=T[v-1];if(I>t)return I-t+1}break}break}case c.ScrollMode.HORIZONTAL:break;case c.ScrollMode.PAGE:case c.ScrollMode.VERTICAL:{if(this._spreadMode===c.SpreadMode.NONE)break;const S=this._spreadMode-1;if(f&&t%2!==S)break;if(!f&&t%2===S)break;const{views:V}=this._getVisiblePages(),T=f?t-1:t+1;for(const{id:C,percent:v,widthPercent:I}of V)if(C===T){if(v>0&&I===100)return 2;break}break}}return 1}nextPage(){const t=this._currentPageNumber,f=this.pagesCount;if(t>=f)return!1;const S=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+S,f),!0}previousPage(){const t=this._currentPageNumber;if(t<=1)return!1;const f=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-f,1),!0}increaseScale(t=1){let f=this._currentScale;do f=(f*c.DEFAULT_SCALE_DELTA).toFixed(2),f=Math.ceil(f*10)/10,f=Math.min(c.MAX_SCALE,f);while(--t>0&&f<c.MAX_SCALE);this.currentScaleValue=f}decreaseScale(t=1){let f=this._currentScale;do f=(f/c.DEFAULT_SCALE_DELTA).toFixed(2),f=Math.floor(f*10)/10,f=Math.max(c.MIN_SCALE,f);while(--t>0&&f>c.MIN_SCALE);this.currentScaleValue=f}}u.BaseViewer=g},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DefaultAnnotationLayerFactory=u.AnnotationLayerBuilder=void 0;var a=P(4),c=P(29),w=P(18);class b{constructor({pageDiv:n,pdfPage:o,linkService:l,downloadManager:s,annotationStorage:h=null,imageResourcesPath:r="",renderForms:_=!0,l10n:p=c.NullL10n,enableScripting:g=!1,hasJSActionsPromise:y=null,fieldObjectsPromise:t=null,mouseState:f=null}){this.pageDiv=n,this.pdfPage=o,this.linkService=l,this.downloadManager=s,this.imageResourcesPath=r,this.renderForms=_,this.l10n=p,this.annotationStorage=h,this.enableScripting=g,this._hasJSActionsPromise=y,this._fieldObjectsPromise=t,this._mouseState=f,this.div=null,this._cancelled=!1}async render(n,o="display"){const[l,s=!1,h=null]=await Promise.all([this.pdfPage.getAnnotations({intent:o}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||l.length===0)return;const r={viewport:n.clone({dontFlip:!0}),div:this.div,annotations:l,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:h,mouseState:this._mouseState};this.div?a.AnnotationLayer.update(r):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),r.div=this.div,a.AnnotationLayer.render(r),this.l10n.translate(this.div))}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}u.AnnotationLayerBuilder=b;class d{createAnnotationLayerBuilder(n,o,l=null,s="",h=!0,r=c.NullL10n,_=!1,p=null,g=null,y=null){return new b({pageDiv:n,pdfPage:o,imageResourcesPath:s,renderForms:h,linkService:new w.SimpleLinkService,l10n:r,annotationStorage:l,enableScripting:_,hasJSActionsPromise:p,fieldObjectsPromise:y,mouseState:g})}}u.DefaultAnnotationLayerFactory=d},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NullL10n=void 0,u.fixupLangCode=w,u.getL10nFallback=a;const P={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function a(e,n){switch(e){case"find_match_count":e=`find_match_count[${n.total===1?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${n.limit===1?"one":"other"}]`;break}return P[e]||""}const c={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function w(e){return c[e?.toLowerCase()]||e}function b(e,n){return n?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(o,l)=>l in n?n[l]:"{{"+l+"}}"):e}const d={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(e,n=null,o=a(e,n)){return b(o,n)},async translate(e){}};u.NullL10n=d},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFPageView=void 0;var a=P(4),c=P(3),w=P(1),b=P(29),d=P(7);const e=w.compatibilityParams.maxCanvasPixels||16777216;class n{constructor(l){const s=l.container,h=l.defaultViewport;this.id=l.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=l.scale||c.DEFAULT_SCALE,this.viewport=h,this.pdfPageRotate=h.rotation,this._optionalContentConfigPromise=l.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=l.textLayerMode??c.TextLayerMode.ENABLE,this._annotationMode=l.annotationMode??a.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=l.imageResourcesPath||"",this.useOnlyCssZoom=l.useOnlyCssZoom||!1,this.maxCanvasPixels=l.maxCanvasPixels||e,this.eventBus=l.eventBus,this.renderingQueue=l.renderingQueue,this.textLayerFactory=l.textLayerFactory,this.annotationLayerFactory=l.annotationLayerFactory,this.xfaLayerFactory=l.xfaLayerFactory,this.textHighlighter=l.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=l.structTreeLayerFactory,this.renderer=l.renderer||c.RendererType.CANVAS,this.l10n=l.l10n||b.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=d.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const r=document.createElement("div");r.className="page",r.style.width=Math.floor(this.viewport.width)+"px",r.style.height=Math.floor(this.viewport.height)+"px",r.setAttribute("data-page-number",this.id),r.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(_=>{r.setAttribute("aria-label",_)}),this.div=r,s?.appendChild(r)}setPdfPage(l){this.pdfPage=l,this.pdfPageRotate=l.rotate;const s=(this.rotation+this.pdfPageRotate)%360;this.viewport=l.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:s}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let l=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(s){l=s}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:l})}}async _renderXfaLayer(){let l=null;try{const s=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(s.textDivs)}catch(s){l=s}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:l})}}async _buildXfaTextContentItems(l){const s=await this.pdfPage.getTextContent(),h=[];for(const r of s.items)h.push(r.str);this.textHighlighter.setTextMapping(l,h),this.textHighlighter.enable()}_resetZoomLayer(l=!1){if(!this.zoomLayer)return;const s=this.zoomLayer.firstChild;this.paintedViewportMap.delete(s),s.width=0,s.height=0,l&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:l=!1,keepAnnotationLayer:s=!1,keepXfaLayer:h=!1}={}){this.cancelRendering({keepAnnotationLayer:s,keepXfaLayer:h}),this.renderingState=d.RenderingStates.INITIAL;const r=this.div;r.style.width=Math.floor(this.viewport.width)+"px",r.style.height=Math.floor(this.viewport.height)+"px";const _=r.childNodes,p=l&&this.zoomLayer||null,g=s&&this.annotationLayer?.div||null,y=h&&this.xfaLayer?.div||null;for(let t=_.length-1;t>=0;t--){const f=_[t];switch(f){case p:case g:case y:continue}r.removeChild(f)}r.removeAttribute("data-loaded"),g&&this.annotationLayer.hide(),y&&this.xfaLayer.hide(),p||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(t=>{this.loadingIconDiv?.setAttribute("aria-label",t)}),r.appendChild(this.loadingIconDiv)}update({scale:l=0,rotation:s=null,optionalContentConfigPromise:h=null}){if(typeof arguments[0]!="object"){console.error("PDFPageView.update called with separate parameters, please use an object instead."),this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});return}this.scale=l||this.scale,typeof s=="number"&&(this.rotation=s),h instanceof Promise&&(this._optionalContentConfigPromise=h),this._isStandalone&&document.documentElement.style.setProperty("--zoom-factor",this.scale);const r=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:r}),this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let _=!1;if(this.canvas&&this.maxCanvasPixels>0){const p=this.outputScale;(Math.floor(this.viewport.width)*p.sx|0)*(Math.floor(this.viewport.height)*p.sy|0)>this.maxCanvasPixels&&(_=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&_){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:l=!1,keepXfaLayer:s=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!l||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null),this.xfaLayer&&(!s||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:l,redrawAnnotationLayer:s=!1,redrawXfaLayer:h=!1}){const r=this.viewport.width,_=this.viewport.height,p=this.div;l.style.width=l.parentNode.style.width=p.style.width=Math.floor(r)+"px",l.style.height=l.parentNode.style.height=p.style.height=Math.floor(_)+"px";const g=this.viewport.rotation-this.paintedViewportMap.get(l).rotation,y=Math.abs(g);let t=1,f=1;if((y===90||y===270)&&(t=_/r,f=r/_),l.style.transform=`rotate(${g}deg) scale(${t}, ${f})`,this.textLayer){const S=this.textLayer.viewport,V=this.viewport.rotation-S.rotation,T=Math.abs(V);let C=r/S.width;(T===90||T===270)&&(C=r/S.height);const v=this.textLayer.textLayerDiv;let I,D;switch(T){case 0:I=D=0;break;case 90:I=0,D="-"+v.style.height;break;case 180:I="-"+v.style.width,D="-"+v.style.height;break;case 270:I="-"+v.style.width,D=0;break;default:console.error("Bad rotation value.");break}v.style.transform=`rotate(${T}deg) scale(${C}) translate(${I}, ${D})`,v.style.transformOrigin="0% 0%"}s&&this.annotationLayer&&this._renderAnnotationLayer(),h&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(l,s){return this.viewport.convertToPdfPoint(l,s)}draw(){this.renderingState!==d.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:l,pdfPage:s}=this;if(!s)return this.renderingState=d.RenderingStates.FINISHED,this.loadingIconDiv&&(l.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=d.RenderingStates.RUNNING;const h=document.createElement("div");h.style.width=l.style.width,h.style.height=l.style.height,h.classList.add("canvasWrapper"),this.annotationLayer?.div?l.insertBefore(h,this.annotationLayer.div):l.appendChild(h);let r=null;if(this.textLayerMode!==c.TextLayerMode.DISABLE&&this.textLayerFactory){const t=document.createElement("div");t.className="textLayer",t.style.width=h.style.width,t.style.height=h.style.height,this.annotationLayer?.div?l.insertBefore(t,this.annotationLayer.div):l.appendChild(t),r=this.textLayerFactory.createTextLayerBuilder(t,this.id-1,this.viewport,this.textLayerMode===c.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=r,this.xfaLayer?.div&&l.appendChild(this.xfaLayer.div);let _=null;this.renderingQueue&&(_=t=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=d.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=d.RenderingStates.RUNNING,t()};return}t()});const p=async(t=null)=>{if(g===this.paintTask&&(this.paintTask=null),t instanceof a.RenderingCancelledException){this._renderError=null;return}if(this._renderError=t,this.renderingState=d.RenderingStates.FINISHED,this.loadingIconDiv&&(l.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),t)throw t},g=this.renderer===c.RendererType.SVG?this.paintOnSvg(h):this.paintOnCanvas(h);g.onRenderContinue=_,this.paintTask=g;const y=g.promise.then(()=>p(null).then(()=>{if(r){const t=s.streamTextContent({normalizeWhitespace:!0,includeMarkedContent:!0});r.setTextContentStream(t),r.render()}}),function(t){return p(t)});return this._annotationMode!==a.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(l,s,null,this.imageResourcesPath,this._annotationMode===a.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null)),this._renderAnnotationLayer()),this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(l,s,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=t=>{t.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,!!this.canvas&&this.pdfPage.getStructTree().then(f=>{if(!f||!this.canvas)return;const S=this.structTreeLayer.render(f);S.classList.add("structTree"),this.canvas.appendChild(S)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(s)),l.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),y}paintOnCanvas(l){const s=(0,a.createPromiseCapability)(),h={promise:s.promise,onRenderContinue(v){v()},cancel(){C.cancel()}},r=this.viewport,_=document.createElement("canvas");_.hidden=!0;let p=!0;const g=function(){p&&(_.hidden=!1,p=!1)};l.appendChild(_),this.canvas=_,_.mozOpaque=!0;const y=_.getContext("2d",{alpha:!1}),t=(0,c.getOutputScale)(y);if(this.outputScale=t,this.useOnlyCssZoom){const v=r.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});t.sx*=v.width/r.width,t.sy*=v.height/r.height,t.scaled=!0}if(this.maxCanvasPixels>0){const v=r.width*r.height,I=Math.sqrt(this.maxCanvasPixels/v);t.sx>I||t.sy>I?(t.sx=I,t.sy=I,t.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const f=(0,c.approximateFraction)(t.sx),S=(0,c.approximateFraction)(t.sy);_.width=(0,c.roundToDivide)(r.width*t.sx,f[0]),_.height=(0,c.roundToDivide)(r.height*t.sy,S[0]),_.style.width=(0,c.roundToDivide)(r.width,f[1])+"px",_.style.height=(0,c.roundToDivide)(r.height,S[1])+"px",this.paintedViewportMap.set(_,r);const V=t.scaled?[t.sx,0,0,t.sy,0,0]:null,T={canvasContext:y,transform:V,viewport:this.viewport,annotationMode:this._annotationMode,optionalContentConfigPromise:this._optionalContentConfigPromise},C=this.pdfPage.render(T);return C.onContinue=function(v){g(),h.onRenderContinue?h.onRenderContinue(v):v()},C.promise.then(function(){g(),s.resolve()},function(v){g(),s.reject(v)}),h}paintOnSvg(l){let s=!1;const h=()=>{if(s)throw new a.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},r=this.pdfPage,_=this.viewport.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:r.getOperatorList({annotationMode:this._annotationMode}).then(g=>(h(),new a.SVGGraphics(r.commonObjs,r.objs,w.compatibilityParams.disableCreateObjectURL).getSVG(g,_).then(t=>{h(),this.svg=t,this.paintedViewportMap.set(t,_),t.style.width=l.style.width,t.style.height=l.style.height,this.renderingState=d.RenderingStates.FINISHED,l.appendChild(t)}))),onRenderContinue(g){g()},cancel(){s=!0}}}setPageLabel(l){this.pageLabel=typeof l=="string"?l:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}u.PDFPageView=n},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StructTreeLayerBuilder=u.DefaultStructTreeLayerFactory=void 0;const P={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/;class c{constructor({pdfPage:d}){this.pdfPage=d}render(d){return this._walk(d)}_setAttributes(d,e){d.alt!==void 0&&e.setAttribute("aria-label",d.alt),d.id!==void 0&&e.setAttribute("aria-owns",d.id)}_walk(d){if(!d)return null;const e=document.createElement("span");if("role"in d){const{role:n}=d,o=n.match(a);o?(e.setAttribute("role","heading"),e.setAttribute("aria-level",o[1])):P[n]&&e.setAttribute("role",P[n])}if(this._setAttributes(d,e),d.children)if(d.children.length===1&&"id"in d.children[0])this._setAttributes(d.children[0],e);else for(const n of d.children)e.appendChild(this._walk(n));return e}}u.StructTreeLayerBuilder=c;class w{createStructTreeLayerBuilder(d){return new c({pdfPage:d})}}u.DefaultStructTreeLayerFactory=w},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextHighlighter=void 0;class P{constructor({findController:c,eventBus:w,pageIndex:b}){this.findController=c,this.matches=[],this.eventBus=w,this.pageIdx=b,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(c,w){this.textDivs=c,this.textContentItemsStr=w}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=c=>{(c.pageIndex===this.pageIdx||c.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(c,w){if(!c)return[];const{textContentItemsStr:b}=this;let d=0,e=0;const n=b.length-1,o=[];for(let l=0,s=c.length;l<s;l++){let h=c[l];for(;d!==n&&h>=e+b[d].length;)e+=b[d].length,d++;d===b.length&&console.error("Could not find a matching mapping");const r={begin:{divIdx:d,offset:h-e}};for(h+=w[l];d!==n&&h>e+b[d].length;)e+=b[d].length,d++;r.end={divIdx:d,offset:h-e},o.push(r)}return o}_renderMatches(c){if(c.length===0)return;const{findController:w,pageIdx:b}=this,{textContentItemsStr:d,textDivs:e}=this,n=b===w.selected.pageIdx,o=w.selected.matchIdx,l=w.state.highlightAll;let s=null;const h={divIdx:-1,offset:void 0};function r(y,t){const f=y.divIdx;return e[f].textContent="",_(f,0,y.offset,t)}function _(y,t,f,S){let V=e[y];if(V.nodeType===Node.TEXT_NODE){const v=document.createElement("span");V.parentNode.insertBefore(v,V),v.appendChild(V),e[y]=v,V=v}const T=d[y].substring(t,f),C=document.createTextNode(T);if(S){const v=document.createElement("span");return v.className=`${S} appended`,v.appendChild(C),V.appendChild(v),S.includes("selected")?v.offsetLeft:0}return V.appendChild(C),0}let p=o,g=p+1;if(l)p=0,g=c.length;else if(!n)return;for(let y=p;y<g;y++){const t=c[y],f=t.begin,S=t.end,V=n&&y===o,T=V?" selected":"";let C=0;if(!s||f.divIdx!==s.divIdx?(s!==null&&_(s.divIdx,s.offset,h.offset),r(f)):_(s.divIdx,s.offset,f.offset),f.divIdx===S.divIdx)C=_(f.divIdx,f.offset,S.offset,"highlight"+T);else{C=_(f.divIdx,f.offset,h.offset,"highlight begin"+T);for(let v=f.divIdx+1,I=S.divIdx;v<I;v++)e[v].className="highlight middle"+T;r(S,"highlight end"+T)}s=S,V&&w.scrollMatchIntoView({element:e[f.divIdx],selectedLeft:C,pageIndex:b,matchIndex:o})}s&&_(s.divIdx,s.offset,h.offset)}_updateMatches(){if(!this.enabled)return;const{findController:c,matches:w,pageIdx:b}=this,{textContentItemsStr:d,textDivs:e}=this;let n=-1;for(let s=0,h=w.length;s<h;s++){const r=w[s],_=Math.max(n,r.begin.divIdx);for(let p=_,g=r.end.divIdx;p<=g;p++){const y=e[p];y.textContent=d[p],y.className=""}n=r.end.divIdx+1}if(!c?.highlightMatches)return;const o=c.pageMatches[b]||null,l=c.pageMatchesLength[b]||null;this.matches=this._convertMatches(o,l),this._renderMatches(this.matches)}}u.TextHighlighter=P},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerBuilder=u.DefaultTextLayerFactory=void 0;var a=P(4);const c=300;class w{constructor({textLayerDiv:e,eventBus:n,pageIndex:o,viewport:l,highlighter:s=null,enhanceTextSelection:h=!1}){this.textLayerDiv=e,this.eventBus=n,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=o+1,this.viewport=l,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=s,this.enhanceTextSelection=h,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(e=0){if(!(this.textContent||this.textContentStream)||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const n=document.createDocumentFragment();this.textLayerRenderTask=(0,a.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(n),this._finishRendering(),this.highlighter?.enable()},function(o){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(e){this.cancel(),this.textContentStream=e}setTextContent(e){this.cancel(),this.textContent=e}_bindMouse(){const e=this.textLayerDiv;let n=null;e.addEventListener("mousedown",o=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(!0),n&&(clearTimeout(n),n=null);return}const l=e.querySelector(".endOfContent");if(!l)return;let s=o.target!==e;if(s=s&&window.getComputedStyle(l).getPropertyValue("-moz-user-select")!=="none",s){const h=e.getBoundingClientRect(),r=Math.max(0,(o.pageY-h.top)/h.height);l.style.top=(r*100).toFixed(2)+"%"}l.classList.add("active")}),e.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){n=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),n=null},c);return}const o=e.querySelector(".endOfContent");!o||(o.style.top="",o.classList.remove("active"))})}}u.TextLayerBuilder=w;class b{createTextLayerBuilder(e,n,o,l=!1,s,h){return new w({textLayerDiv:e,pageIndex:n,viewport:o,enhanceTextSelection:l,eventBus:s,highlighter:h})}}u.DefaultTextLayerFactory=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayerBuilder=u.DefaultXfaLayerFactory=void 0;var a=P(18),c=P(4);class w{constructor({pageDiv:e,pdfPage:n,annotationStorage:o,linkService:l,xfaHtml:s}){this.pageDiv=e,this.pdfPage=n,this.annotationStorage=o,this.linkService=l,this.xfaHtml=s,this.div=null,this._cancelled=!1}render(e,n="display"){if(n==="print"){const o={viewport:e.clone({dontFlip:!0}),div:this.div,xfa:this.xfaHtml,page:null,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},l=document.createElement("div");this.pageDiv.appendChild(l),o.div=l;const s=c.XfaLayer.render(o);return Promise.resolve(s)}return this.pdfPage.getXfa().then(o=>{if(this._cancelled||!o)return{textDivs:[]};const l={viewport:e.clone({dontFlip:!0}),div:this.div,xfa:o,page:this.pdfPage,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?c.XfaLayer.update(l):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),l.div=this.div,c.XfaLayer.render(l))}).catch(o=>{console.error(o)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}u.XfaLayerBuilder=w;class b{createXfaLayerBuilder(e,n,o=null,l=null){return new w({pageDiv:e,pdfPage:n,annotationStorage:o,linkService:new a.SimpleLinkService,xfaHtml:l})}}u.DefaultXfaLayerFactory=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SecondaryToolbar=void 0;var a=P(3),c=P(5),w=P(26);class b{constructor(e,n,o){this.toolbar=e.toolbar,this.toggleButton=e.toggleButton,this.toolbarButtonContainer=e.toolbarButtonContainer,this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:!0},{element:e.openFileButton,eventName:"openfile",close:!0},{element:e.printButton,eventName:"print",close:!0},{element:e.downloadButton,eventName:"download",close:!0},{element:e.viewBookmarkButton,eventName:null,close:!0},{element:e.firstPageButton,eventName:"firstpage",close:!0},{element:e.lastPageButton,eventName:"lastpage",close:!0},{element:e.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:c.CursorTool.SELECT},close:!0},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:c.CursorTool.HAND},close:!0},{element:e.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.PAGE},close:!0},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:e.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton},this.mainContainer=n,this.eventBus=o,this.opened=!1,this.containerHeight=null,this.previousContainerHeight=null,this.reset(),this._bindClickListeners(),this._bindCursorToolsListener(e),this._bindScrollModeListener(e),this._bindSpreadModeListener(e),this.eventBus._on("resize",this._setMaxHeight.bind(this)),this.eventBus._on("baseviewerinit",l=>{l.source instanceof w.PDFSinglePageViewer?this.toolbarButtonContainer.classList.add("hiddenScrollModeButtons","hiddenSpreadModeButtons"):this.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons","hiddenSpreadModeButtons")})}get isOpen(){return this.opened}setPageNumber(e){this.pageNumber=e,this._updateUIState()}setPagesCount(e){this.pagesCount=e,this._updateUIState()}reset(){this.pageNumber=0,this.pagesCount=0,this._updateUIState(),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}_updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=this.pagesCount===0,this.items.pageRotateCcw.disabled=this.pagesCount===0}_bindClickListeners(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:e,eventName:n,close:o,eventDetails:l}of this.buttons)e.addEventListener("click",s=>{if(n!==null){const h={source:this};for(const r in l)h[r]=l[r];this.eventBus.dispatch(n,h)}o&&this.close()})}_bindCursorToolsListener(e){this.eventBus._on("cursortoolchanged",function({tool:n}){e.cursorSelectToolButton.classList.toggle("toggled",n===c.CursorTool.SELECT),e.cursorHandToolButton.classList.toggle("toggled",n===c.CursorTool.HAND)})}_bindScrollModeListener(e){function n({mode:o}){e.scrollPageButton.classList.toggle("toggled",o===a.ScrollMode.PAGE),e.scrollVerticalButton.classList.toggle("toggled",o===a.ScrollMode.VERTICAL),e.scrollHorizontalButton.classList.toggle("toggled",o===a.ScrollMode.HORIZONTAL),e.scrollWrappedButton.classList.toggle("toggled",o===a.ScrollMode.WRAPPED);const l=o===a.ScrollMode.HORIZONTAL;e.spreadNoneButton.disabled=l,e.spreadOddButton.disabled=l,e.spreadEvenButton.disabled=l}this.eventBus._on("scrollmodechanged",n),this.eventBus._on("secondarytoolbarreset",o=>{o.source===this&&n({mode:a.ScrollMode.VERTICAL})})}_bindSpreadModeListener(e){function n({mode:o}){e.spreadNoneButton.classList.toggle("toggled",o===a.SpreadMode.NONE),e.spreadOddButton.classList.toggle("toggled",o===a.SpreadMode.ODD),e.spreadEvenButton.classList.toggle("toggled",o===a.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",n),this.eventBus._on("secondarytoolbarreset",o=>{o.source===this&&n({mode:a.SpreadMode.NONE})})}open(){this.opened||(this.opened=!0,this._setMaxHeight(),this.toggleButton.classList.add("toggled"),this.toggleButton.setAttribute("aria-expanded","true"),this.toolbar.classList.remove("hidden"))}close(){!this.opened||(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"),this.toggleButton.setAttribute("aria-expanded","false"))}toggle(){this.opened?this.close():this.open()}_setMaxHeight(){!this.opened||(this.containerHeight=this.mainContainer.clientHeight,this.containerHeight!==this.previousContainerHeight&&(this.toolbarButtonContainer.style.maxHeight=`${this.containerHeight-a.SCROLLBAR_PADDING}px`,this.previousContainerHeight=this.containerHeight))}}u.SecondaryToolbar=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Toolbar=void 0;var a=P(3);const c="visiblePageIsLoading";class w{constructor(d,e,n){this.toolbar=d.container,this.eventBus=e,this.l10n=n,this.buttons=[{element:d.previous,eventName:"previouspage"},{element:d.next,eventName:"nextpage"},{element:d.zoomIn,eventName:"zoomin"},{element:d.zoomOut,eventName:"zoomout"},{element:d.openFile,eventName:"openfile"},{element:d.print,eventName:"print"},{element:d.presentationModeButton,eventName:"presentationmode"},{element:d.download,eventName:"download"},{element:d.viewBookmark,eventName:null}],this.items={numPages:d.numPages,pageNumber:d.pageNumber,scaleSelect:d.scaleSelect,customScaleOption:d.customScaleOption,previous:d.previous,next:d.next,zoomIn:d.zoomIn,zoomOut:d.zoomOut},this._wasLocalized=!1,this.reset(),this._bindListeners()}setPageNumber(d,e){this.pageNumber=d,this.pageLabel=e,this._updateUIState(!1)}setPagesCount(d,e){this.pagesCount=d,this.hasPageLabels=e,this._updateUIState(!0)}setPageScale(d,e){this.pageScaleValue=(d||e).toString(),this.pageScale=e,this._updateUIState(!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=a.DEFAULT_SCALE_VALUE,this.pageScale=a.DEFAULT_SCALE,this._updateUIState(!0),this.updateLoadingIndicatorState()}_bindListeners(){const{pageNumber:d,scaleSelect:e}=this.items,n=this;for(const{element:o,eventName:l}of this.buttons)o.addEventListener("click",s=>{l!==null&&this.eventBus.dispatch(l,{source:this})});d.addEventListener("click",function(){this.select()}),d.addEventListener("change",function(){n.eventBus.dispatch("pagenumberchanged",{source:n,value:this.value})}),e.addEventListener("change",function(){this.value!=="custom"&&n.eventBus.dispatch("scalechanged",{source:n,value:this.value})}),e.addEventListener("click",function(o){const l=o.target;this.value===n.pageScaleValue&&l.tagName.toUpperCase()==="OPTION"&&this.blur()}),e.oncontextmenu=a.noContextMenuHandler,this.eventBus._on("localized",()=>{this._wasLocalized=!0,this._adjustScaleWidth(),this._updateUIState(!0)})}_updateUIState(d=!1){if(!this._wasLocalized)return;const{pageNumber:e,pagesCount:n,pageScaleValue:o,pageScale:l,items:s}=this;d&&(this.hasPageLabels?s.pageNumber.type="text":(s.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:n}).then(h=>{s.numPages.textContent=h})),s.pageNumber.max=n),this.hasPageLabels?(s.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:e,pagesCount:n}).then(h=>{s.numPages.textContent=h})):s.pageNumber.value=e,s.previous.disabled=e<=1,s.next.disabled=e>=n,s.zoomOut.disabled=l<=a.MIN_SCALE,s.zoomIn.disabled=l>=a.MAX_SCALE,this.l10n.get("page_scale_percent",{scale:Math.round(l*1e4)/100}).then(h=>{let r=!1;for(const _ of s.scaleSelect.options){if(_.value!==o){_.selected=!1;continue}_.selected=!0,r=!0}r||(s.customScaleOption.textContent=h,s.customScaleOption.selected=!0)})}updateLoadingIndicatorState(d=!1){this.items.pageNumber.classList.toggle(c,d)}async _adjustScaleWidth(){const{items:d,l10n:e}=this,n=Promise.all([e.get("page_scale_auto"),e.get("page_scale_actual"),e.get("page_scale_fit"),e.get("page_scale_width")]),o=getComputedStyle(d.scaleSelect),l=parseInt(o.getPropertyValue("--scale-select-container-width"),10),s=parseInt(o.getPropertyValue("--scale-select-overflow"),10);let h=document.createElement("canvas");h.mozOpaque=!0;let r=h.getContext("2d",{alpha:!1});await a.animationStarted,r.font=`${o.fontSize} ${o.fontFamily}`;let _=0;for(const p of await n){const{width:g}=r.measureText(p);g>_&&(_=g)}_+=2*s,_>l&&document.documentElement.style.setProperty("--scale-select-container-width",`${_}px`),h.width=0,h.height=0,h=r=null}}u.Toolbar=w},(z,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ViewHistory=void 0;const P=20;class a{constructor(w,b=P){this.fingerprint=w,this.cacheSize=b,this._initializedPromise=this._readFromStorage().then(d=>{const e=JSON.parse(d||"{}");let n=-1;if(!Array.isArray(e.files))e.files=[];else{for(;e.files.length>=this.cacheSize;)e.files.shift();for(let o=0,l=e.files.length;o<l;o++)if(e.files[o].fingerprint===this.fingerprint){n=o;break}}n===-1&&(n=e.files.push({fingerprint:this.fingerprint})-1),this.file=e.files[n],this.database=e})}async _writeToStorage(){const w=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",w)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(w,b){return await this._initializedPromise,this.file[w]=b,this._writeToStorage()}async setMultiple(w){await this._initializedPromise;for(const b in w)this.file[b]=w[b];return this._writeToStorage()}async get(w,b){await this._initializedPromise;const d=this.file[w];return d!==void 0?d:b}async getMultiple(w){await this._initializedPromise;const b=Object.create(null);for(const d in w){const e=this.file[d];b[d]=e!==void 0?e:w[d]}return b}}u.ViewHistory=a},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GenericCom=void 0;var a=P(2),c=P(39),w=P(40),b=P(41),d=P(43);const e={};u.GenericCom=e;class n extends c.BasePreferences{async _writeToStorage(s){localStorage.setItem("pdfjs.preferences",JSON.stringify(s))}async _readFromStorage(s){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class o extends a.DefaultExternalServices{static createDownloadManager(s){return new w.DownloadManager}static createPreferences(){return new n}static createL10n({locale:s="en-US"}){return new b.GenericL10n(s)}static createScripting({sandboxBundleSrc:s}){return new d.GenericScripting(s)}}a.PDFViewerApplication.externalServices=o},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BasePreferences=void 0;var a=P(1);class c{constructor(){if(this.constructor===c)throw new Error("Cannot initialize BasePreferences.");Object.defineProperty(this,"defaults",{value:Object.freeze({annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderer:"canvas",sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}),writable:!1,enumerable:!0,configurable:!1}),this.prefs=Object.create(null),this._initializedPromise=this._readFromStorage(this.defaults).then(b=>{for(const d in this.defaults){const e=b?.[d];typeof e==typeof this.defaults[d]&&(this.prefs[d]=e)}})}async _writeToStorage(b){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(b){throw new Error("Not implemented: _readFromStorage")}async reset(){return await this._initializedPromise,this.prefs=Object.create(null),this._writeToStorage(this.defaults)}async set(b,d){await this._initializedPromise;const e=this.defaults[b];if(e===void 0)throw new Error(`Set preference: "${b}" is undefined.`);if(d===void 0)throw new Error("Set preference: no value is specified.");const n=typeof d,o=typeof e;if(n!==o)if(n==="number"&&o==="string")d=d.toString();else throw new Error(`Set preference: "${d}" is a ${n}, expected a ${o}.`);else if(n==="number"&&!Number.isInteger(d))throw new Error(`Set preference: "${d}" must be an integer.`);return this.prefs[b]=d,this._writeToStorage(this.prefs)}async get(b){await this._initializedPromise;const d=this.defaults[b],e=this.prefs[b];if(d===void 0)throw new Error(`Get preference: "${b}" is undefined.`);return e!==void 0?e:d}async getAll(){await this._initializedPromise;const b=Object.create(null);for(const d in this.defaults){const e=this.prefs[d];b[d]=e!==void 0?e:this.defaults[d]}return b}}u.BasePreferences=c},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DownloadManager=void 0;var a=P(4),c=P(1);function w(d,e){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=d,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}class b{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(e,n){if(!(0,a.createValidAbsoluteUrl)(e,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${e}`);return}w(e+"#pdfjs.action=download",n)}downloadData(e,n,o){const l=(0,a.createObjectURL)(e,o,c.compatibilityParams.disableCreateObjectURL);w(l,n)}openOrDownloadData(e,n,o){const l=(0,a.isPdfFile)(o),s=l?"application/pdf":"";if(l&&!c.compatibilityParams.disableCreateObjectURL){let h=this._openBlobUrls.get(e);h||(h=URL.createObjectURL(new Blob([n],{type:s})),this._openBlobUrls.set(e,h));let r;r="?file="+encodeURIComponent(h+"#"+o);try{return window.open(r),!0}catch(_){console.error(`openOrDownloadData: ${_}`),URL.revokeObjectURL(h),this._openBlobUrls.delete(e)}}return this.downloadData(n,o,s),!1}download(e,n,o,l="download"){if(c.compatibilityParams.disableCreateObjectURL){this.downloadUrl(n,o);return}const s=URL.createObjectURL(e);w(s,o)}}u.DownloadManager=b},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GenericL10n=void 0,P(42);var a=P(29);const c=document.webL10n;class w{constructor(d){this._lang=d,this._ready=new Promise((e,n)=>{c.setLanguage((0,a.fixupLangCode)(d),()=>{e(c)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(d,e=null,n=(0,a.getL10nFallback)(d,e)){return(await this._ready).get(d,e,n)}async translate(d){return(await this._ready).translate(d)}}u.GenericL10n=w},()=>{document.webL10n=function(z,u,P){var a={},c="",w="textContent",b="",d={},e="loading",n=!0;function o(){return u.querySelectorAll('link[type="application/l10n"]')}function l(){var v=u.querySelector('script[type="application/l10n"]');return v?JSON.parse(v.innerHTML):null}function s(v){return v?v.querySelectorAll("*[data-l10n-id]"):[]}function h(v){if(!v)return{};var I=v.getAttribute("data-l10n-id"),D=v.getAttribute("data-l10n-args"),A={};if(D)try{A=JSON.parse(D)}catch{console.warn("could not parse arguments for #"+I)}return{id:I,args:A}}function r(v,I,D){I=I||function(j){},D=D||function(){};var A=new XMLHttpRequest;A.open("GET",v,n),A.overrideMimeType&&A.overrideMimeType("text/plain; charset=utf-8"),A.onreadystatechange=function(){A.readyState==4&&(A.status==200||A.status===0?I(A.responseText):D())},A.onerror=D,A.ontimeout=D;try{A.send(null)}catch{D()}}function _(v,I,D,A){var H=v.replace(/[^\/]*$/,"")||"./";function j(X){return X.lastIndexOf("\\")<0?X:X.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function L(X,K){var q={},ee=/^\s*|\s*$/,E=/^\s*#|^\s*$/,ae=/^\s*\[(.*)\]\s*$/,ce=/^\s*@import\s+url\((.*)\)\s*$/i,he=/^([^=\s]*)\s*=\s*(.+)$/;function fe(me,_e,we){var Pe=me.replace(ee,"").split(/[\r\n]+/),N="*",B=I.split("-",1)[0],U=!1,O="";function G(){for(;;){if(!Pe.length){we();return}var W=Pe.shift();if(!E.test(W)){if(_e){if(O=ae.exec(W),O){N=O[1].toLowerCase(),U=N!=="*"&&N!==I&&N!==B;continue}else if(U)continue;if(O=ce.exec(W),O){Ie(H+O[1],G);return}}var Q=W.match(he);Q&&Q.length==3&&(q[Q[1]]=j(Q[2]))}}}G()}function Ie(me,_e){r(me,function(we){fe(we,!1,_e)},function(){console.warn(me+" not found."),_e()})}fe(X,!0,function(){K(q)})}r(v,function(X){c+=X,L(X,function(K){for(var q in K){var ee,E,ae=q.lastIndexOf(".");ae>0?(ee=q.substring(0,ae),E=q.substring(ae+1)):(ee=q,E=w),a[ee]||(a[ee]={}),a[ee][E]=K[q]}D&&D()})},A)}function p(v,I){v&&(v=v.toLowerCase()),I=I||function(){},g(),b=v;var D=o(),A=D.length;if(A===0){var H=l();if(H&&H.locales&&H.default_locale){if(console.log("using the embedded JSON directory, early way out"),a=H.locales[v],!a){var j=H.default_locale.toLowerCase();for(var L in H.locales)if(L=L.toLowerCase(),L===v){a=H.locales[v];break}else L===j&&(a=H.locales[j])}I()}else console.log("no resource to load, early way out");e="complete";return}var X=null,K=0;X=function(){K++,K>=A&&(I(),e="complete")};function q(ae){var ce=ae.href;this.load=function(he,fe){_(ce,he,fe,function(){console.warn(ce+" not found."),console.warn('"'+he+'" resource not found'),b="",fe()})}}for(var ee=0;ee<A;ee++){var E=new q(D[ee]);E.load(v,X)}}function g(){a={},c="",b=""}function y(v){var I={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function D(L,X){return X.indexOf(L)!==-1}function A(L,X,K){return X<=L&&L<=K}var H={"0":function(L){return"other"},"1":function(L){return A(L%100,3,10)?"few":L===0?"zero":A(L%100,11,99)?"many":L==2?"two":L==1?"one":"other"},"2":function(L){return L!==0&&L%10==0?"many":L==2?"two":L==1?"one":"other"},"3":function(L){return L==1?"one":"other"},"4":function(L){return A(L,0,1)?"one":"other"},"5":function(L){return A(L,0,2)&&L!=2?"one":"other"},"6":function(L){return L===0?"zero":L%10==1&&L%100!=11?"one":"other"},"7":function(L){return L==2?"two":L==1?"one":"other"},"8":function(L){return A(L,3,6)?"few":A(L,7,10)?"many":L==2?"two":L==1?"one":"other"},"9":function(L){return L===0||L!=1&&A(L%100,1,19)?"few":L==1?"one":"other"},"10":function(L){return A(L%10,2,9)&&!A(L%100,11,19)?"few":L%10==1&&!A(L%100,11,19)?"one":"other"},"11":function(L){return A(L%10,2,4)&&!A(L%100,12,14)?"few":L%10==0||A(L%10,5,9)||A(L%100,11,14)?"many":L%10==1&&L%100!=11?"one":"other"},"12":function(L){return A(L,2,4)?"few":L==1?"one":"other"},"13":function(L){return A(L%10,2,4)&&!A(L%100,12,14)?"few":L!=1&&A(L%10,0,1)||A(L%10,5,9)||A(L%100,12,14)?"many":L==1?"one":"other"},"14":function(L){return A(L%100,3,4)?"few":L%100==2?"two":L%100==1?"one":"other"},"15":function(L){return L===0||A(L%100,2,10)?"few":A(L%100,11,19)?"many":L==1?"one":"other"},"16":function(L){return L%10==1&&L!=11?"one":"other"},"17":function(L){return L==3?"few":L===0?"zero":L==6?"many":L==2?"two":L==1?"one":"other"},"18":function(L){return L===0?"zero":A(L,0,2)&&L!==0&&L!=2?"one":"other"},"19":function(L){return A(L,2,10)?"few":A(L,0,1)?"one":"other"},"20":function(L){return(A(L%10,3,4)||L%10==9)&&!(A(L%100,10,19)||A(L%100,70,79)||A(L%100,90,99))?"few":L%1e6==0&&L!==0?"many":L%10==2&&!D(L%100,[12,72,92])?"two":L%10==1&&!D(L%100,[11,71,91])?"one":"other"},"21":function(L){return L===0?"zero":L==1?"one":"other"},"22":function(L){return A(L,0,1)||A(L,11,99)?"one":"other"},"23":function(L){return A(L%10,1,2)||L%20==0?"one":"other"},"24":function(L){return A(L,3,10)||A(L,13,19)?"few":D(L,[2,12])?"two":D(L,[1,11])?"one":"other"}},j=I[v.replace(/-.*$/,"")];return j in H?H[j]:(console.warn("plural form unknown for ["+v+"]"),function(){return"other"})}d.plural=function(v,I,D,A){var H=parseFloat(I);if(isNaN(H)||A!=w)return v;d._pluralRules||(d._pluralRules=y(b));var j="["+d._pluralRules(H)+"]";return H===0&&D+"[zero]"in a?v=a[D+"[zero]"][A]:H==1&&D+"[one]"in a?v=a[D+"[one]"][A]:H==2&&D+"[two]"in a?v=a[D+"[two]"][A]:D+j in a?v=a[D+j][A]:D+"[other]"in a&&(v=a[D+"[other]"][A]),v};function t(v,I,D){var A=a[v];if(!A){if(console.warn("#"+v+" is undefined."),!D)return null;A=D}var H={};for(var j in A){var L=A[j];L=f(L,I,v,j),L=S(L,I,v),H[j]=L}return H}function f(v,I,D,A){var H=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,j=H.exec(v);if(!j||!j.length)return v;var L=j[1],X=j[2],K;if(I&&X in I?K=I[X]:X in a&&(K=a[X]),L in d){var q=d[L];v=q(v,K,D,A)}return v}function S(v,I,D){var A=/\{\{\s*(.+?)\s*\}\}/g;return v.replace(A,function(H,j){return I&&j in I?I[j]:j in a?a[j]:(console.log("argument {{"+j+"}} for #"+D+" is undefined."),H)})}function V(v){var I=h(v);if(!!I.id){var D=t(I.id,I.args);if(!D){console.warn("#"+I.id+" is undefined.");return}if(D[w]){if(T(v)===0)v[w]=D[w];else{for(var A=v.childNodes,H=!1,j=0,L=A.length;j<L;j++)A[j].nodeType===3&&/\S/.test(A[j].nodeValue)&&(H?A[j].nodeValue="":(A[j].nodeValue=D[w],H=!0));if(!H){var X=u.createTextNode(D[w]);v.insertBefore(X,v.firstChild)}}delete D[w]}for(var K in D)v[K]=D[K]}}function T(v){if(v.children)return v.children.length;if(typeof v.childElementCount!="undefined")return v.childElementCount;for(var I=0,D=0;D<v.childNodes.length;D++)I+=v.nodeType===1?1:0;return I}function C(v){v=v||u.documentElement;for(var I=s(v),D=I.length,A=0;A<D;A++)V(I[A]);V(v)}return{get:function(v,I,D){var A=v.lastIndexOf("."),H=w;A>0&&(H=v.substring(A+1),v=v.substring(0,A));var j;D&&(j={},j[H]=D);var L=t(v,I,j);return L&&H in L?L[H]:"{{"+v+"}}"},getData:function(){return a},getText:function(){return c},getLanguage:function(){return b},setLanguage:function(v,I){p(v,function(){I&&I()})},getDirection:function(){var v=["ar","he","fa","ps","ur"],I=b.split("-",1)[0];return v.indexOf(I)>=0?"rtl":"ltr"},translate:C,getReadyState:function(){return e},ready:function(v){if(v)e=="complete"||e=="interactive"?z.setTimeout(function(){v()}):u.addEventListener&&u.addEventListener("localized",function I(){u.removeEventListener("localized",I),v()});else return}}}(window,document)},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GenericScripting=void 0,u.docPropertiesLookup=c;var a=P(4);async function c(b){const d="",e=d.split("#")[0];let{info:n,metadata:o,contentDispositionFilename:l,contentLength:s}=await b.getMetadata();if(!s){const{length:h}=await b.getDownloadInfo();s=h}return{...n,baseURL:e,filesize:s,filename:l||(0,a.getPdfFilenameFromUrl)(d),metadata:o?.getRaw(),authors:o?.get("dc:creator"),numPages:b.numPages,URL:d}}class w{constructor(d){this._ready=(0,a.loadScript)(d,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(d){(await this._ready).create(d)}async dispatchEventInSandbox(d){(await this._ready).dispatchEvent(d)}async destroySandbox(){(await this._ready).nukeSandbox()}}u.GenericScripting=w},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFPrintService=o;var a=P(4),c=P(2),w=P(1),b=P(45);let d=null,e=null;function n(g,y,t,f,S,V){const T=d.scratchCanvas,C=S/a.PixelsPerInch.PDF;T.width=Math.floor(f.width*C),T.height=Math.floor(f.height*C);const v=T.getContext("2d");return v.save(),v.fillStyle="rgb(255, 255, 255)",v.fillRect(0,0,T.width,T.height),v.restore(),y.getPage(t).then(function(I){const D={canvasContext:v,transform:[C,0,0,C,0,0],viewport:I.getViewport({scale:1,rotation:f.rotation}),intent:"print",annotationMode:a.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:V};return I.render(D).promise})}function o(g,y,t,f,S=null,V){this.pdfDocument=g,this.pagesOverview=y,this.printContainer=t,this._printResolution=f||150,this._optionalContentConfigPromise=S||g.getOptionalContentConfig(),this.l10n=V,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}o.prototype={layout(){this.throwIfInactive();const g=document.querySelector("body");g.setAttribute("data-pdfjsprinting",!0),this.pagesOverview.every(function(f){return f.width===this.pagesOverview[0].width&&f.height===this.pagesOverview[0].height},this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");const t=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+t.width+"pt "+t.height+"pt;}",g.appendChild(this.pageStyleSheet)},destroy(){if(d!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,d=null,p().then(function(){e.active==="printServiceOverlay"&&e.close("printServiceOverlay")})},renderPages(){if(this.pdfDocument.isPureXfa)return(0,b.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument),Promise.resolve();const g=this.pagesOverview.length,y=(t,f)=>{if(this.throwIfInactive(),++this.currentPage>=g){r(g,g,this.l10n),t();return}const S=this.currentPage;r(S,g,this.l10n),n(this,this.pdfDocument,S+1,this.pagesOverview[S],this._printResolution,this._optionalContentConfigPromise).then(this.useRenderedPage.bind(this)).then(function(){y(t,f)},f)};return new Promise(y)},useRenderedPage(){this.throwIfInactive();const g=document.createElement("img"),y=this.scratchCanvas;"toBlob"in y&&!w.compatibilityParams.disableCreateObjectURL?y.toBlob(function(f){g.src=URL.createObjectURL(f)}):g.src=y.toDataURL();const t=document.createElement("div");return t.className="printedPage",t.appendChild(g),this.printContainer.appendChild(t),new Promise(function(f,S){g.onload=f,g.onerror=S})},performPrint(){return this.throwIfInactive(),new Promise(g=>{setTimeout(()=>{if(!this.active){g();return}l.call(window),setTimeout(g,20)},0)})},get active(){return this===d},throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};const l=window.print;window.print=function(){if(d){console.warn("Ignored window.print() because of a pending print job.");return}p().then(function(){d&&e.open("printServiceOverlay")});try{s("beforeprint")}finally{if(!d){console.error("Expected print service to be initialized."),p().then(function(){e.active==="printServiceOverlay"&&e.close("printServiceOverlay")});return}const g=d;d.renderPages().then(function(){return g.performPrint()}).catch(function(){}).then(function(){g.active&&h()})}};function s(g){const y=document.createEvent("CustomEvent");y.initCustomEvent(g,!1,!1,"custom"),window.dispatchEvent(y)}function h(){d&&(d.destroy(),s("afterprint"))}function r(g,y,t){const f=document.getElementById("printServiceOverlay"),S=Math.round(100*g/y),V=f.querySelector("progress"),T=f.querySelector(".relative-progress");V.value=S,t.get("print_progress_percent",{progress:S}).then(C=>{T.textContent=C})}if(window.addEventListener("keydown",function(g){g.keyCode===80&&(g.ctrlKey||g.metaKey)&&!g.altKey&&(!g.shiftKey||window.chrome||window.opera)&&(window.print(),g.preventDefault(),g.stopImmediatePropagation?g.stopImmediatePropagation():g.stopPropagation())},!0),"onbeforeprint"in window){const g=function(y){y.detail!=="custom"&&y.stopImmediatePropagation&&y.stopImmediatePropagation()};window.addEventListener("beforeprint",g),window.addEventListener("afterprint",g)}let _;function p(){if(!_){if(e=c.PDFViewerApplication.overlayManager,!e)throw new Error("The overlay manager has not yet been initialized.");_=e.register("printServiceOverlay",document.getElementById("printServiceOverlay"),h,!0),document.getElementById("printCancel").onclick=h}return _}c.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService(g,y,t,f,S,V){if(d)throw new Error("The print service is created and active.");return d=new o(g,y,t,f,S,V),d}}},(z,u,P)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getXfaHtmlForPrinting=w;var a=P(4),c=P(34);function w(b,d){const e=d.allXfaHtml,n=new c.DefaultXfaLayerFactory,o=Math.round(a.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const l of e.children){const s=document.createElement("div");s.className="xfaPrintedPage",b.appendChild(s);const h=n.createXfaLayerBuilder(s,null,d.annotationStorage,l),r=(0,a.getXfaPageViewport)(l,{scale:o});h.render(r,"print")}}}],Ge={};function Te(z){var u=Ge[z];if(u!==void 0)return u.exports;var P=Ge[z]={exports:{}};return lt[z](P,P.exports,Te),P.exports}var dt={};(()=>{var z=dt;Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"PDFViewerApplication",{enumerable:!0,get:function(){return P.PDFViewerApplication}}),Object.defineProperty(z,"PDFViewerApplicationOptions",{enumerable:!0,get:function(){return u.AppOptions}});var u=Te(1),P=Te(2);const a="2.12.154",c="4ee906adf";window.PDFViewerApplication=P.PDFViewerApplication,window.PDFViewerApplicationOptions=u.AppOptions,Te(38),Te(44);function w(){let d=null;return d={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")},{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:d,printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"}}function b(){const d=w(),e=document.createEvent("CustomEvent");e.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(e)}catch(n){console.error(`webviewerloaded: ${n}`),document.dispatchEvent(e)}P.PDFViewerApplication.run(d)}document.blockUnblockOnload&&document.blockUnblockOnload(!0),document.readyState==="interactive"||document.readyState==="complete"?b():document.addEventListener("DOMContentLoaded",b,!0)})()})();
